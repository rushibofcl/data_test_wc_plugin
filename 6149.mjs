(self.webpackChunkdata_test_wc_plugin=self.webpackChunkdata_test_wc_plugin||[]).push([[6149],{49029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},18674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},36128:(e,t,n)=>{var i=n(20731),r=n(21078),l=n(45652);e.exports=function(e,t,n){var a=e.length;if(a<2)return a?l(e[0]):[];for(var o=-1,s=Array(a);++o<a;)for(var c=e[o],u=-1;++u<a;)u!=o&&(s[o]=i(s[o]||c,e[u],t,n));return l(r(s,1),t,n)}},35393:(e,t,n)=>{var i=n(62663),r=n(53816),l=n(58748),a=RegExp("['’]","g");e.exports=function(e){return function(t){return i(l(r(t).replace(a,"")),e,"")}}},69389:(e,t,n)=>{var i=n(18674)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=i},93157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},2757:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+l+"]",o="\\d+",s="["+n+"]",c="["+i+"]",u="[^"+t+l+o+n+i+r+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="["+r+"]",p="(?:"+c+"|"+u+")",h="(?:"+g+"|"+u+")",f="(?:['’](?:d|ll|m|re|s|t|ve))?",b="(?:['’](?:D|LL|M|RE|S|T|VE))?",E="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",v="[\\ufe0e\\ufe0f]?",C=v+E+"(?:\\u200d(?:"+["[^"+t+"]",d,m].join("|")+")"+v+E+")*",y="(?:"+[s,d,m].join("|")+")"+C,S=RegExp([g+"?"+c+"+"+f+"(?="+[a,g,"$"].join("|")+")",h+"+"+b+"(?="+[a,g+p,"$"].join("|")+")",g+"?"+p+"+"+f,g+"+"+b,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,y].join("|"),"g");e.exports=function(e){return e.match(S)||[]}},68929:(e,t,n)=>{var i=n(48403),r=n(35393)((function(e,t,n){return t=t.toLowerCase(),e+(n?i(t):t)}));e.exports=r},53816:(e,t,n)=>{var i=n(69389),r=n(79833),l=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=r(e))&&e.replace(l,i).replace(a,"")}},21804:(e,t,n)=>{var i=n(35393)((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));e.exports=i},58748:(e,t,n)=>{var i=n(49029),r=n(93157),l=n(79833),a=n(2757);e.exports=function(e,t,n){return e=l(e),void 0===(t=n?void 0:t)?r(e)?a(e):i(e):e.match(t)||[]}},72905:(e,t,n)=>{var i=n(34963),r=n(5976),l=n(36128),a=n(29246),o=n(10928),s=r((function(e){var t=o(e);return t="function"==typeof t?t:void 0,l(i(e,a),void 0,t)}));e.exports=s},56149:(e,t,n)=>{n.r(t),n.d(t,{AttributeDatasetInfo:()=>mo,AttributeDisplayFormSelect:()=>ao,AttributeFilter:()=>Xa,AttributeFilterAllValuesFilteredResult:()=>ka,AttributeFilterButton:()=>eo,AttributeFilterButtonToolip:()=>oa,AttributeFilterConfigurationButton:()=>so,AttributeFilterDeleteButton:()=>uo,AttributeFilterDependencyTooltip:()=>bo,AttributeFilterDropdownActions:()=>pa,AttributeFilterDropdownBody:()=>ga,AttributeFilterDropdownButton:()=>ca,AttributeFilterElementsActions:()=>Va,AttributeFilterElementsSearchBar:()=>ha,AttributeFilterElementsSelect:()=>fa,AttributeFilterElementsSelectError:()=>Ca,AttributeFilterElementsSelectItem:()=>va,AttributeFilterElementsSelectLoading:()=>ya,AttributeFilterEmptyAttributeResult:()=>Ia,AttributeFilterEmptyResult:()=>xa,AttributeFilterEmptySearchResult:()=>Sa,AttributeFilterError:()=>da,AttributeFilterFilteredStatus:()=>Da,AttributeFilterLoading:()=>ua,AttributeFilterSelectionStatus:()=>Aa,AttributeFilterSimpleDropdownButton:()=>Qa,AttributeFilterSimpleDropdownButtonWithSelection:()=>Ja,AttributeFilterStatusBar:()=>Ba,DateFilter:()=>An,DateFilterHelpers:()=>q,EmptyElementsSearchBar:()=>go,MeasureValueFilter:()=>ri,MeasureValueFilterDropdown:()=>ni,RankingFilter:()=>Ai,RankingFilterDropdown:()=>Di,SingleSelectionAttributeFilterElementsSelectItem:()=>Ha,SingleSelectionAttributeFilterStatusBar:()=>Za,defaultDateFilterOptions:()=>m,filterVisibleDateFilterOptions:()=>D,getLocalizedIcuDateFormatPattern:()=>ye,isAbsoluteDateFilterOption:()=>F,isRelativeDateFilterOption:()=>k,isUiRelativeDateFilterForm:()=>w,isWarningMessage:()=>zn,newAttributeFilterHandler:()=>Vl,useAttributeFilterContext:()=>ia,useAttributeFilterController:()=>Jl,useAttributeFilterHandler:()=>$l,useAttributeFilterSearch:()=>fo,useAutoOpenAttributeFilterDropdownButton:()=>po,useOnCloseAttributeFilterDropdownButton:()=>ho});const i={"GDC.time.minute":"minute","GDC.time.hour":"hour","GDC.time.date":"day","GDC.time.week_us":"week","GDC.time.month":"month","GDC.time.quarter":"quarter","GDC.time.year":"year"};var r=n(30381);const l="YYYY-MM-DD",a="YYYY-MM-DD HH:mm",o="HH:mm",s=", HH:mm",c="00:00",u="23:59",d="MM/dd/yyyy",m={allTime:{localIdentifier:"ALL_TIME",type:"allTime",name:"",visible:!0},absoluteForm:{localIdentifier:"ABSOLUTE_FORM",type:"absoluteForm",from:r().subtract(1,"month").startOf("day").format(l),to:r().startOf("day").format(l),name:"",visible:!0},absolutePreset:[],relativeForm:{localIdentifier:"RELATIVE_FORM",type:"relativeForm",granularity:"GDC.time.month",from:void 0,to:void 0,name:"",visible:!0},relativePreset:{"GDC.time.date":[{from:-6,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_7_DAYS",type:"relativePreset",visible:!0,name:""},{from:-29,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_30_DAYS",type:"relativePreset",visible:!0,name:""},{from:-89,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_90_DAYS",type:"relativePreset",visible:!0,name:""}],"GDC.time.month":[{from:0,to:0,granularity:"GDC.time.month",localIdentifier:"THIS_MONTH",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.month",localIdentifier:"LAST_MONTH",type:"relativePreset",visible:!0,name:""},{from:-11,to:0,granularity:"GDC.time.month",localIdentifier:"LAST_12_MONTHS",type:"relativePreset",visible:!0,name:""}],"GDC.time.quarter":[{from:0,to:0,granularity:"GDC.time.quarter",localIdentifier:"THIS_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.quarter",localIdentifier:"LAST_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-3,to:0,granularity:"GDC.time.quarter",localIdentifier:"LAST_4_QUARTERS",type:"relativePreset",visible:!0,name:""}],"GDC.time.year":[{from:0,to:0,granularity:"GDC.time.year",localIdentifier:"THIS_YEAR",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.year",localIdentifier:"LAST_YEAR",type:"relativePreset",visible:!0,name:""}]}};var g=n(53244),p=n(47037),h=n(47960);const f=(e,t=l)=>h(e)?r(e).local().format(t):e,b=e=>p(e)?new Date(r(e,a).format()):e,E=(0,n(50049).vU)({minute:{id:"filters.granularity.minutes"},hour:{id:"filters.granularity.hours"},day:{id:"filters.granularity.days"},week:{id:"filters.granularity.weeks"},month:{id:"filters.granularity.months"},quarter:{id:"filters.granularity.quarters"},year:{id:"filters.granularity.years"},allTimeExcluded:{id:"filters.allTime.excludeCurrentPeriod"},minuteExcluded:{id:"filters.minute.excludeCurrentPeriod"},hourExcluded:{id:"filters.hour.excludeCurrentPeriod"},dayExcluded:{id:"filters.day.excludeCurrentPeriod"},weekExcluded:{id:"filters.week.excludeCurrentPeriod"},monthExcluded:{id:"filters.month.excludeCurrentPeriod"},quarterExcluded:{id:"filters.quarter.excludeCurrentPeriod"},yearExcluded:{id:"filters.year.excludeCurrentPeriod"},minute_history:{id:"filters.floatingRange.option.minute.offset.history"},minute_today:{id:"filters.floatingRange.option.minute.offset.today"},minute_future:{id:"filters.floatingRange.option.minute.offset.future"},hour_history:{id:"filters.floatingRange.option.hour.offset.history"},hour_today:{id:"filters.floatingRange.option.hour.offset.today"},hour_future:{id:"filters.floatingRange.option.hour.offset.future"},day_history:{id:"filters.floatingRange.option.day.offset.history"},day_today:{id:"filters.floatingRange.option.day.offset.today"},day_future:{id:"filters.floatingRange.option.day.offset.future"},week_history:{id:"filters.floatingRange.option.week.offset.history"},week_today:{id:"filters.floatingRange.option.week.offset.today"},week_future:{id:"filters.floatingRange.option.week.offset.future"},month_history:{id:"filters.floatingRange.option.month.offset.history"},month_today:{id:"filters.floatingRange.option.month.offset.today"},month_future:{id:"filters.floatingRange.option.month.offset.future"},quarter_history:{id:"filters.floatingRange.option.quarter.offset.history"},quarter_today:{id:"filters.floatingRange.option.quarter.offset.today"},quarter_future:{id:"filters.floatingRange.option.quarter.offset.future"},year_history:{id:"filters.floatingRange.option.year.offset.history"},year_today:{id:"filters.floatingRange.option.year.offset.today"},year_future:{id:"filters.floatingRange.option.year.offset.future"},"GDC.time.minute":{id:"filters.minute.title"},"GDC.time.hour":{id:"filters.hour.title"},"GDC.time.date":{id:"filters.day.title"},"GDC.time.week_us":{id:"filters.week.title"},"GDC.time.month":{id:"filters.month.title"},"GDC.time.quarter":{id:"filters.quarter.title"},"GDC.time.year":{id:"filters.year.title"},top:{id:"rankingFilter.top"},bottom:{id:"rankingFilter.bottom"},topWithAttr:{id:"rankingFilter.preview.top_with_attribute"},topWithoutAttr:{id:"rankingFilter.preview.top_without_attribute"},bottomWithAttr:{id:"rankingFilter.preview.bottom_with_attribute"},bottomWithoutAttr:{id:"rankingFilter.preview.bottom_without_attribute"},ALL:{id:"mvf.operator.all"},GREATER_THAN:{id:"mvf.operator.greaterThan"},GREATER_THAN_OR_EQUAL_TO:{id:"mvf.operator.greaterThanOrEqualTo"},LESS_THAN:{id:"mvf.operator.lessThan"},LESS_THAN_OR_EQUAL_TO:{id:"mvf.operator.lessThanOrEqualTo"},EQUAL_TO:{id:"mvf.operator.equalTo"},NOT_EQUAL_TO:{id:"mvf.operator.notEqualTo"},BETWEEN:{id:"mvf.operator.between"},NOT_BETWEEN:{id:"mvf.operator.notBetween"},incorrectFormat:{id:"filters.staticPeriod.incorrectFormat"},endDateBeforeStartDate:{id:"filters.staticPeriod.endDateBeforeStartDate"},thisMinute:{id:"filters.thisMinute.title"},lastMinute:{id:"filters.lastMinute.title"},nextMinute:{id:"filters.nextMinute.title"},thisHour:{id:"filters.thisHour.title"},lastHour:{id:"filters.lastHour.title"},nextHour:{id:"filters.nextHour.title"},thisDay:{id:"filters.thisDay.title"},lastDay:{id:"filters.lastDay.title"},nextDay:{id:"filters.nextDay.title"},thisWeek:{id:"filters.thisWeek.title"},lastWeek:{id:"filters.lastWeek.title"},nextWeek:{id:"filters.nextWeek.title"},thisMonth:{id:"filters.thisMonth.title"},lastMonth:{id:"filters.lastMonth.title"},nextMonth:{id:"filters.nextMonth.title"},thisQuarter:{id:"filters.thisQuarter.title"},lastQuarter:{id:"filters.lastQuarter.title"},nextQuarter:{id:"filters.nextQuarter.title"},thisYear:{id:"filters.thisYear.title"},lastYear:{id:"filters.lastYear.title"},nextYear:{id:"filters.nextYear.title"},lastNMinutes:{id:"filters.lastNMinutes"},lastNHours:{id:"filters.lastNHours"},lastNDays:{id:"filters.lastNDays"},lastNWeeks:{id:"filters.lastNWeeks"},lastNMonths:{id:"filters.lastNMonths"},lastNQuarters:{id:"filters.lastNQuarters"},lastNYears:{id:"filters.lastNYears"},nextNMinutes:{id:"filters.nextNMinutes"},nextNHours:{id:"filters.nextNHours"},nextNDays:{id:"filters.nextNDays"},nextNWeeks:{id:"filters.nextNWeeks"},nextNMonths:{id:"filters.nextNMonths"},nextNQuarters:{id:"filters.nextNQuarters"},nextNYears:{id:"filters.nextNYears"},"minutes.past":{id:"filters.interval.minutes.past"},"minutes.past.sameValue":{id:"filters.interval.minutes.past.sameValue"},"minutes.future":{id:"filters.interval.minutes.future"},"minutes.future.sameValue":{id:"filters.interval.minutes.future.sameValue"},"minutes.mixed":{id:"filters.interval.minutes.mixed"},"hours.past":{id:"filters.interval.hours.past"},"hours.past.sameValue":{id:"filters.interval.hours.past.sameValue"},"hours.future":{id:"filters.interval.hours.future"},"hours.future.sameValue":{id:"filters.interval.hours.future.sameValue"},"hours.mixed":{id:"filters.interval.hours.mixed"},"days.past":{id:"filters.interval.days.past"},"days.past.sameValue":{id:"filters.interval.days.past.sameValue"},"days.future":{id:"filters.interval.days.future"},"days.future.sameValue":{id:"filters.interval.days.future.sameValue"},"days.mixed":{id:"filters.interval.days.mixed"},"weeks.past":{id:"filters.interval.weeks.past"},"weeks.past.sameValue":{id:"filters.interval.weeks.past.sameValue"},"weeks.future":{id:"filters.interval.weeks.future"},"weeks.future.sameValue":{id:"filters.interval.weeks.future.sameValue"},"weeks.mixed":{id:"filters.interval.weeks.mixed"},"months.past":{id:"filters.interval.months.past"},"months.past.sameValue":{id:"filters.interval.months.past.sameValue"},"months.future":{id:"filters.interval.months.future"},"months.future.sameValue":{id:"filters.interval.months.future.sameValue"},"months.mixed":{id:"filters.interval.months.mixed"},"quarters.past":{id:"filters.interval.quarters.past"},"quarters.past.sameValue":{id:"filters.interval.quarters.past.sameValue"},"quarters.future":{id:"filters.interval.quarters.future"},"quarters.future.sameValue":{id:"filters.interval.quarters.future.sameValue"},"quarters.mixed":{id:"filters.interval.quarters.mixed"},"years.past":{id:"filters.interval.years.past"},"years.past.sameValue":{id:"filters.interval.years.past.sameValue"},"years.future":{id:"filters.interval.years.future"},"years.future.sameValue":{id:"filters.interval.years.future.sameValue"},"years.mixed":{id:"filters.interval.years.mixed"}}),v=e=>{const t={};return e.visible||(t[e.type]={}),t},C=e=>(0,g.isAbsoluteDateFilterForm)(e)?(e=>{const t=v(e);return["from","to"].forEach((n=>{e[n]||(t.absoluteForm=t.absoluteForm||{},void 0===e[n]&&(t.absoluteForm[n]=E.incorrectFormat.id))})),t.absoluteForm||b(e.from)>b(e.to)&&(t.absoluteForm={to:E.endDateBeforeStartDate.id}),t.absoluteForm?t:{}})(e):(0,g.isRelativeDateFilterForm)(e)?(e=>{const t=v(e);return["from","to"].forEach((n=>{void 0===e[n]&&(t.relativeForm=t.relativeForm||{})})),t.relativeForm?t:{}})(e):v(e),y=(e,t)=>{if(!e||!t)return e;if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterForm)(e))return e;if((0,g.isRelativeDateFilterPreset)(e)){const{from:t,to:n}=e,i=0===n&&t<n;return Object.assign(Object.assign({},e),{from:i?e.from-1:e.from,to:i?-1:n})}throw new Error("Unknown date filter value type")},S=e=>!!e.visible&&!!(0,g.isRelativeDateFilterPreset)(e)&&0===e.to&&e.from<e.to;var I=n(41609);const w=e=>!I(e)&&"relativeForm"===e.type,F=e=>(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e),k=e=>(0,g.isRelativeDateFilterForm)(e)||(0,g.isRelativeDateFilterPreset)(e);function x(e){return null==e?void 0:e.visible}function O(e){return x(e)?e:void 0}function P(e){const{absoluteForm:t,absolutePreset:n,allTime:i,relativeForm:r,relativePreset:l}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i&&{allTime:i}),t&&{absoluteForm:t}),!I(n)&&{absolutePreset:n}),r&&{relativeForm:r}),!I(l)&&{relativePreset:l})}function D(e){var t;const n=O(e.allTime),i=O(e.absoluteForm),r=O(e.relativeForm);return P({allTime:n,absoluteForm:i,absolutePreset:null===(t=e.absolutePreset)||void 0===t?void 0:t.filter(x),relativeForm:r,relativePreset:e.relativePreset&&(l=e.relativePreset,Object.keys(l).reduce(((e,t)=>{const n=l[t].filter(x);return n.length&&(e[t]=n),e}),{}))});var l}function A(e){return e.from>e.to?Object.assign(Object.assign({},e),{from:e.to,to:e.from}):e}function N(e){var t;const n=null===(t=e.absolutePreset)||void 0===t?void 0:t.map(A),i=e.relativePreset&&function(e){return Object.keys(e).reduce(((t,n)=>{const i=e[n];return t[n]=i.map(A),t}),{})}(e.relativePreset);return P(Object.assign(Object.assign({},e),{absolutePreset:n,relativePreset:i}))}var T=n(15616),M=n(48403),R=n(2525);const L=(e,t,n=c)=>p(e)&&t&&1===e.split(" ").length?`${e} ${n}`:e,_=(e,t,n)=>{const i=n.includes(o),l=n.replace(s,""),a=L(e,i,c),d=L(t,i,u),m=b(a),g=b(d),p=(f=g,0===(h=m).getHours()&&0===h.getMinutes()&&23===f.getHours()&&59===f.getMinutes());var h,f;if(r(m).isSame(g,"day"))return i&&!p?`${T(m,l)}, ${((e,t)=>{const n=T(e,o),i=T(t,o);return n===i?n:`${n} – ${i}`})(m,g)}`:T(m,l);const E=p?l:n;return`${T(m,E)} – ${T(g,E)}`},B=[{predicate:(e,t)=>0===e&&0===t,formatter:(e,t,n,i)=>i.formatMessage(E[`this${M(n)}`])},{predicate:(e,t)=>1===e&&1===t,formatter:(e,t,n,i)=>i.formatMessage(E[`next${M(n)}`])},{predicate:(e,t)=>-1===e&&-1===t,formatter:(e,t,n,i)=>i.formatMessage(E[`last${M(n)}`])},{predicate:e=>0===e,formatter:(e,t,n,i)=>i.formatMessage(E[`nextN${M(n)}s`],{n:Math.abs(t)+1})},{predicate:(e,t)=>0===t,formatter:(e,t,n,i)=>i.formatMessage(E[`lastN${M(n)}s`],{n:Math.abs(e)+1})},{predicate:(e,t)=>e<0&&e===t,formatter:(e,t,n,i)=>i.formatMessage(E[`${n}s.past.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e>0&&e===t,formatter:(e,t,n,i)=>i.formatMessage(E[`${n}s.future.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e<0&&t<0,formatter:(e,t,n,i)=>i.formatMessage(E[`${n}s.past`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:(e,t)=>e>0&&t>0,formatter:(e,t,n,i)=>i.formatMessage(E[`${n}s.future`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:()=>!0,formatter:(e,t,n,i)=>i.formatMessage(E[`${n}s.mixed`],{from:Math.abs(e),to:Math.abs(t)})}],V=(e,t,n,r)=>{const l=i[n],{formatter:a}=B.find((n=>n.predicate(e,t)));return a(e,t,l,r)},H=(e,t,n)=>{if((0,g.isAbsoluteDateFilterForm)(e)||(0,g.isRelativeDateFilterForm)(e))return Z(e,t,n);if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterPreset)(e))return e.name||Z(e,t,n);throw new Error("Unknown DateFilterOption type")},j=(e,t,n=d)=>{const i=(0,R.getIntl)(t);return H(e,i,n)},Z=(e,t,n)=>{if((0,g.isAbsoluteDateFilterForm)(e))return((e,t)=>e.from&&e.to?_(e.from,e.to,t):"")(e,n);if((0,g.isAbsoluteDateFilterPreset)(e))return((e,t)=>_(e.from,e.to,t))(e,n);if((0,g.isAllTimeDateFilterOption)(e))return(e=>e.formatMessage({id:"filters.allTime.title"}))(t);if((0,g.isRelativeDateFilterForm)(e))return((e,t)=>"number"==typeof e.from&&"number"==typeof e.to?V(e.from,e.to,e.granularity,t):"")(e,t);if((0,g.isRelativeDateFilterPreset)(e))return((e,t)=>V(e.from,e.to,e.granularity,t))(e,t);throw new Error("Unknown DateFilterOption type")},q={validateFilterOption:C,getDateFilterTitle:j,getDateFilterTitleUsingTranslator:(e,t,n=d)=>H(e,t,n),getDateFilterRepresentation:(e,t,n=d)=>{const i=(0,R.getIntl)(t);return Z(e,i,n)},granularityIntlCodes:i,applyExcludeCurrentPeriod:y,defaultDateFilterOptions:m,canExcludeCurrentPeriod:S,mapOptionToAfm:(e,t,n)=>{const i=y(e,n);if((0,g.isAllTimeDateFilterOption)(i))return null;if(F(i))return((e,t)=>({absoluteDateFilter:{dataSet:t,from:e.from,to:e.to}}))(i,t);if(k(i))return((e,t)=>({relativeDateFilter:{dataSet:t,from:e.from,to:e.to,granularity:e.granularity}}))(i,t);throw new Error("Unknown date filter value provided")},formatAbsoluteDateRange:_,formatRelativeDateRange:V,filterVisibleDateFilterOptions:D};var z=n(59882),W=n(18446),G=n(14293),U=n(50308),K=n(97582),$=n(59242),Y=n(1852),Q=n(25356),J=n(65165);const X=(e=>`only screen and (min-width:${e.lower}px) and (max-width:${e.upper}px)`)({lower:0,upper:640});var ee=n(44012),te=n(93967);const ne=[{align:"bc tl",offset:{x:0,y:5}}],ie=({customIcon:e,disabled:t})=>{if(!e)return null;const{icon:n,tooltip:i,bubbleClassNames:r,bubbleAlignPoints:l}=e,a=te(["gd-filter-button-custom-icon-wrapper","s-gd-filter-button-custom-icon-wrapper"],{"disabled s-disabled":t});return z.createElement("div",{className:a},z.createElement(J.BubbleHoverTrigger,null,z.createElement("i",{className:`gd-filter-button-custom-icon s-gd-filter-button-custom-icon ${n}`}),z.createElement(J.Bubble,{className:`bubble-primary ${r||""}`,alignPoints:l||ne},i)))},re=({isOpen:e,isMobile:t,title:n,children:i,disabled:r,customIcon:l})=>z.createElement("div",{className:te("s-date-filter-button","gd-date-filter-button","dropdown-button",t&&"gd-date-filter-button-mobile",e&&"is-active",r&&"disabled")},z.createElement("div",{className:"button-content"},z.createElement("div",{className:"s-date-filter-title button-title"},n),z.createElement("div",{className:"button-subtitle"},i)),z.createElement(ie,{customIcon:l,disabled:r}));var le=n(74806);const ae=(0,le.ZP)((({dateFormat:e,filter:t,intl:n})=>z.createElement(z.Fragment,null,j(t,(0,R.resolveLocale)(n.locale),e)))),oe=({dateFilterOption:e,dateFormat:t,isOpen:n=!1,isMobile:i=!0,customFilterName:r,disabled:l,customIcon:a})=>z.createElement(re,{title:r||z.createElement(ee.Z,{id:"dateFilterDropdown.title"}),isOpen:n,isMobile:i,disabled:l,customIcon:a},z.createElement("span",{className:"s-button-text"},z.createElement(ae,{filter:e,dateFormat:t}))),se=(0,Q.b)(Y),ce=e=>{var{isSelected:t,className:n,children:i}=e,r=(0,K._T)(e,["isSelected","className","children"]);return z.createElement(z.Fragment,null,z.createElement("button",Object.assign({className:te("gd-list-item","gd-filter-list-item",{"is-selected":t,"gd-filter-list-item-selected":t},n)},r),i,t?z.createElement(se,{query:X},z.createElement(J.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-date-filter"})):null))},ue=e=>{const t=!e.disabled&&e.granularity?E[`${i[e.granularity]}Excluded`].id:E.allTimeExcluded.id;return z.createElement(ee.Z,{id:t},((...e)=>z.createElement("span",{className:"input-label-text"},e)))},de=[{align:"tc bc"}],me=({value:e,onChange:t,disabled:n,granularity:i})=>z.createElement("div",{className:"gd-extended-date-filter-exclude-current"},z.createElement(J.BubbleHoverTrigger,null,z.createElement("label",{className:te("s-exclude-current-period","input-checkbox-label",{"s-exclude-current-perod-enabled":!n,"s-exclude-current-perod-disabled":n})},z.createElement("input",{type:"checkbox",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked),disabled:n})," ",z.createElement(ue,{granularity:i,disabled:n})),n?z.createElement(J.Bubble,{alignPoints:de},z.createElement(ee.Z,{id:"filters.excludeCurrentPeriod.unavailable"})):null)),ge=e=>{var{className:t,children:n}=e,i=(0,K._T)(e,["className","children"]);return z.createElement("div",Object.assign({className:te("gd-visible-scrollbar",t)},i),n)},pe=({className:e,filterOption:t,selectedFilterOption:n,onSelectedFilterOptionChange:i})=>z.createElement(ce,{isSelected:t.localIdentifier===n.localIdentifier,onClick:()=>i(t),className:te("s-all-time",e)},t.name?t.name:z.createElement(ee.Z,{id:"filters.allTime.title"})),he=e=>{var{children:t,isMobile:n,className:i}=e,r=(0,K._T)(e,["children","isMobile","className"]);return z.createElement("div",Object.assign({className:te(i,"gd-date-filter-form-wrapper",!n&&"gd-date-filter-form-wrapper-desktop")},r),z.createElement("div",{className:"gd-date-filter-form-wrapper-inner"},t))};var fe=n(12595);const be=e=>r(e).format(l);var Ee=n(2498);const ve=e=>{var t;const n=r().locale(Ee.Z(e)),i=(null==n?void 0:n.localeData)&&n.localeData();return null===(t=null==i?void 0:i._longDateFormat)||void 0===t?void 0:t.L},Ce={"en-US":"M/d/y","en-GB":"dd/MM/y","cs-CZ":"d. M. y","de-DE":"d.M.y","es-ES":"d/M/y","fr-FR":"dd/MM/y","ja-JP":"y/M/d","nl-NL":"d-M-y","pt-BR":"dd/MM/y","pt-PT":"dd/MM/y","zh-Hans":"y/M/d","ru-RU":"dd.MM.y"},ye=e=>{var t;return null!==(t=Ce[e])&&void 0!==t?t:Ce["en-US"]},Se=(0,le.ZP)((e=>{const{dateFormat:t,errorId:n,intl:i}=e;return z.createElement("div",{className:"gd-date-range-picker-error-message s-absolute-range-error"},z.createElement(ee.Z,{id:n,values:{format:t||ve(i.locale)}}))}));var Ie=n(39989),we=n(91884);class Fe extends z.Component{constructor(){super(...arguments),this.inputRef=z.createRef(),this.invokeInputMethod=e=>{this.inputRef.current&&this.inputRef.current[e]()},this.blur=()=>this.invokeInputMethod("blur"),this.focus=()=>this.invokeInputMethod("focus")}get value(){return this.inputRef.current?this.inputRef.current.value:""}render(){const{className:e}=this.props;return z.createElement("span",{className:te(e)},z.createElement("span",{className:"gd-icon-calendar"}),z.createElement("input",Object.assign({},this.props,{ref:this.inputRef,className:"input-text s-date-range-picker-input-field"})))}}function ke(e,t){return T(e,t)}const xe=z.forwardRef(((e,t)=>{const{placeholderDate:n,value:i,onChange:l,dateFormat:a,handleDayClick:s,isMobile:c,isTimeEnabled:u,onKeyDown:d,className:m,error:g=!1}=e,[p,h]=(0,z.useState)((e=>r(e).format(o))(i)),[f,E]=(0,z.useState)(ke(i,a));(0,z.useEffect)((()=>{E(ke(i,a))}),[i,a]);const v=e=>{l((e=>{if(u&&e){const t=null!=i?i:r(p,o).toDate();e.setHours(t.getHours()),e.setMinutes(t.getMinutes())}return e})(e))};return z.createElement("div",{className:te(m,u&&"gd-flex-row")},c?z.createElement(Fe,{type:"date",className:te("s-date-range-picker-date","gd-date-range-picker-input","gd-date-range-picker-input-native",g&&"gd-date-range-picker-input-error"),placeholder:n,onChange:e=>v(b(e.target.value)),value:be(i)}):z.createElement("div",{className:te("gd-date-range-picker-input",g&&"gd-date-range-picker-input-error")},z.createElement("span",null,z.createElement("span",{className:"gd-icon-calendar"}),z.createElement("input",{onKeyDown:d,ref:t,placeholder:n,onChange:e=>(e=>{E(e);const t=function(e,t){try{const n=we(e,t,new Date);return Ie(n)&&n.getFullYear()>=1e3&&e===ke(n,t)?n:void 0}catch(e){return}}(e,a);v(t)})(e.target.value),onClick:s,onFocus:s,value:f,className:"input-text s-date-range-picker-input-field"}))),u?z.createElement("span",{className:te("gd-date-range-picker-input","gd-date-range-picker-input-time","s-date-range-picker-input-time",g&&"gd-date-range-picker-input-error")},z.createElement("span",{className:"gd-icon-clock"}),z.createElement("input",{type:"time",className:"input-text",onChange:e=>(e=>{const t=null!=i?i:new Date,n=r(e,o);n.isValid()&&(t.setHours(n.hours()),t.setMinutes(n.minutes()),h(e)),l(t)})(e.target.value),value:p})):null)}));xe.displayName="DateTimePickerComponent";const Oe=(0,le.ZP)(xe,{forwardRef:!0});Oe.displayName="DateTimePicker";var Pe=n(82512),De=n(76119),Ae=n(19962),Ne=n(63126),Te=n(42180),Me=n(70390),Re=n(63086);const Le={"en-US":Pe,"de-DE":De,"es-ES":Ae,"fr-FR":Ne,"ja-JP":Te,"nl-NL":Me,"pt-BR":n(81333),"pt-PT":Re,"zh-Hans":n(24602),"ru-RU":n(66754)},_e=[{align:"bl tl",offset:{x:0,y:1}}];function Be(e){switch(e){case"Sunday":return 0;case"Monday":return 1;default:throw new Error(`Unknown week start ${e}`)}}class Ve extends z.Component{constructor(e){super(e),this.dateRangePickerInputFrom=z.createRef(),this.dateRangePickerInputTo=z.createRef(),this.dateRangePickerContainer=z.createRef(),this.handleRangeSelect=(e,t)=>{let n,i;"from"==this.state.selectedInput?(n=this.setTimeForDate(t,this.state.inputFromValue),i=this.state.inputToValue):(n=this.state.inputFromValue,i=this.setTimeForDate(t,this.state.inputToValue)),this.setState({inputFromValue:n,inputToValue:i,selectedRange:{from:n,to:i},isOpen:!1},(()=>{this.updateRange(n,i)}))},this.updateRange=(e,t)=>{this.props.onRangeChange({from:e,to:t})},this.handleFromDayClick=()=>{this.setState({selectedInput:"from",isOpen:!0,monthDate:this.props.range.from})},this.handleToDayClick=()=>{this.setState({selectedInput:"to",isOpen:!0,monthDate:this.props.range.to})},this.handleFromChange=e=>{e&&this.setState({inputFromValue:e}),this.setState({selectedRange:{from:e,to:this.state.selectedRange.to},monthDate:e},(()=>{this.updateRange(e,this.state.selectedRange.to)}))},this.handleToChange=e=>{e&&this.setState({inputToValue:e}),this.setState({selectedRange:{from:this.state.selectedRange.from,to:e},monthDate:e},(()=>{this.updateRange(this.state.selectedRange.from,e)}))},this.state={isOpen:!1,inputFromValue:this.props.range.from,inputToValue:this.props.range.to,selectedRange:{from:this.props.range.from,to:this.props.range.to},monthDate:null,selectedInput:null},this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleRangeSelect=this.handleRangeSelect.bind(this),this.handleFromDayClick=this.handleFromDayClick.bind(this),this.handleToDayClick=this.handleToDayClick.bind(this),this.handleFromChange=this.handleFromChange.bind(this),this.handleToChange=this.handleToChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}render(){const{dateFormat:e,range:{from:t,to:n},dayPickerProps:i,intl:r,isMobile:l,errors:{from:a,to:o}={from:void 0,to:void 0},isTimeEnabled:s,weekStart:c="Sunday",shouldOverlayDatePicker:d=!1}=this.props;var m;const g=(S={mode:"range",showOutsideDays:!0,modifiers:{start:t,end:n},selected:{from:t,to:n},locale:(m=r.locale,Le[m])},(I=i)?((e,t)=>{return Object.assign(Object.assign(Object.assign({},e),t),(n=e.modifiers,i=t.modifiers,n?{modifiers:Object.assign(Object.assign({},n),i)}:void 0));var n,i})(S,I):S),p={root:`gd-date-range-picker-picker s-date-range-calendar-${this.state.selectedInput}`},h=z.createElement("div",{className:"gd-date-range-picker-wrapper",ref:this.dateRangePickerContainer},z.createElement(fe._W,Object.assign({},g,{onSelect:this.handleRangeSelect,selected:this.state.selectedRange,month:this.state.monthDate,classNames:p,onMonthChange:this.handleMonthChanged,weekStartsOn:Be(c)}))),f=z.createElement(J.Overlay,{alignTo:`.gd-date-range-picker-${s?this.state.selectedInput:"from"}`,alignPoints:_e,closeOnOutsideClick:!0,closeOnMouseDrag:!0,closeOnParentScroll:!0},h),b=z.createElement(Oe,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputFrom,placeholderDate:r.formatMessage({id:"filters.from"}),onChange:this.handleFromChange,value:this.state.inputFromValue,dateFormat:e,isMobile:l,handleDayClick:this.handleFromDayClick,isTimeEnabled:s,className:te("s-date-range-picker-from","gd-date-range-picker-from"),error:void 0!==a}),E=z.createElement(Oe,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputTo,placeholderDate:r.formatMessage({id:"filters.to"}),onChange:this.handleToChange,value:this.state.inputToValue,dateFormat:e,isMobile:l,handleDayClick:this.handleToDayClick,isTimeEnabled:s,className:te("s-date-range-picker-to","gd-date-range-picker-to"),defaultTime:u,error:void 0!==o}),v=d?f:h,C="from"===this.state.selectedInput&&this.state.isOpen,y="to"===this.state.selectedInput&&this.state.isOpen;var S,I;return z.createElement(z.Fragment,null,s?z.createElement("div",{className:"gd-date-range-picker datetime s-date-range-picker"},z.createElement("label",null,r.formatMessage({id:"filters.from"})),b,C?v:null,z.createElement("label",null,r.formatMessage({id:"filters.to"})),E,y?v:null):z.createElement(z.Fragment,null,z.createElement("div",{className:"gd-date-range-picker gd-flex-row s-date-range-picker"},b,z.createElement("span",{className:"gd-date-range-picker-dash"},"–"),E),this.state.isOpen?v:null),a||o?z.createElement(Se,{dateFormat:e,errorId:a||o}):null)}onKeyDown(e){"Escape"!==e.key&&"Tab"!==e.key||this.setState({isOpen:!1})}handleMonthChanged(e){this.setState({monthDate:e})}setTimeForDate(e,t){const n=new Date(e);return n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n}handleClickOutside(e){this.dateRangePickerContainer.current&&!this.dateRangePickerContainer.current.contains(e.target)&&this.dateRangePickerInputFrom&&!this.dateRangePickerInputFrom.current.contains(e.target)&&this.dateRangePickerInputTo&&!this.dateRangePickerInputTo.current.contains(e.target)&&this.setState({isOpen:!1})}}const He=(0,le.ZP)(Ve),je=(e,t=!1)=>{const n=e.from&&e.from.split(" ").length>1,i=e.to&&e.to.split(" ").length>1,r=e&&b(e.from),l=e&&b(e.to);return r&&!n&&t&&(r.setHours(0),r.setMinutes(0)),l&&!i&&t&&(l.setHours(23),l.setMinutes(59)),{from:r,to:l}},Ze={mode:"range",weekStartsOn:0};class qe extends z.Component{constructor(){super(...arguments),this.handleRangeChange=e=>{const{selectedFilterOption:t,isTimeEnabled:n}=this.props;this.props.onSelectedFilterOptionChange(((e,t,n)=>{const i=n?a:l;return{from:f(e.from,i),to:f(e.to,i),localIdentifier:t,type:"absoluteForm",name:"",visible:!0}})(e,t.localIdentifier,n))}}render(){const{dateFormat:e,isMobile:t,selectedFilterOption:n,errors:i,isTimeEnabled:r,weekStart:l,shouldOverlayDatePicker:a}=this.props;return z.createElement(He,{dateFormat:e,onRangeChange:this.handleRangeChange,range:je(n,r),errors:i,isMobile:t,dayPickerProps:Ze,isTimeEnabled:r,weekStart:l,shouldOverlayDatePicker:a})}}const ze=e=>{var{children:t,className:n,bubbleAlignPoints:i}=e,r=(0,K._T)(e,["children","className","bubbleAlignPoints"]);return z.createElement("span",Object.assign({className:te("gd-list-item-tooltip",n)},r),z.createElement(J.BubbleHoverTrigger,null,z.createElement("span",{className:"gd-icon-circle-question gd-list-item-tooltip-icon"}),z.createElement(J.Bubble,{alignPoints:i},t)))};var We=n(89734);const Ge=e=>{var{className:t,children:n}=e,i=(0,K._T)(e,["className","children"]);return z.createElement("div",Object.assign({className:te("gd-tabs small is-condensed",t)},i),n)},Ue=e=>{var{selected:t,className:n,children:i}=e,r=(0,K._T)(e,["selected","className","children"]);return z.createElement("div",Object.assign({className:te(t&&"is-active","gd-tab",n)},r),i)},Ke={"GDC.time.year":0,"GDC.time.quarter":1,"GDC.time.month":2,"GDC.time.week_us":3,"GDC.time.date":4,"GDC.time.hour":5,"GDC.time.minute":6},$e=({availableGranularities:e,onSelectedGranularityChange:t,selectedGranularity:n})=>{return z.createElement(Ge,{className:"gd-relative-filter-form-granularity-tabs s-relative-filter-form-granularity-tabs"},(r=e,We(r,(e=>Ke[e]))).map((e=>{const r=i[e];return z.createElement(Ue,{key:e,selected:e===n,onClick:()=>t(e),className:`s-granularity-${r}`},z.createElement(ee.Z,{id:E[r].id}))})));var r};var Ye=n(63366),Qe=n(87462),Je=n(97326),Xe=n(94578),et=n(45697),tt=n.n(et),nt=n(9155);function it(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function rt(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function lt(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return rt(n.overflowY,t)||rt(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function at(e,t,n,i,r,l,a,o){return l<e&&a>t||l>e&&a<t?0:l<=e&&o<=n||a>=t&&o>=n?l-e-i:a>t&&o<n||l<e&&o>n?a-t+r:0}n(59864);var ot=0;function st(e){return"function"==typeof e?e:ct}function ct(){}function ut(e,t){if(null!==e){var n=function(e,t){var n=window,i=t.scrollMode,r=t.block,l=t.inline,a=t.boundary,o=t.skipOverflowHiddenElements,s="function"==typeof a?a:function(e){return e!==a};if(!it(e))throw new TypeError("Invalid target");for(var c,u,d=document.scrollingElement||document.documentElement,m=[],g=e;it(g)&&s(g);){if((g=null==(u=(c=g).parentElement)?c.getRootNode().host||null:u)===d){m.push(g);break}null!=g&&g===document.body&&lt(g)&&!lt(document.documentElement)||null!=g&&lt(g,o)&&m.push(g)}for(var p=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,E=e.getBoundingClientRect(),v=E.height,C=E.width,y=E.top,S=E.right,I=E.bottom,w=E.left,F="start"===r||"nearest"===r?y:"end"===r?I:y+v/2,k="center"===l?w+C/2:"end"===l?S:w,x=[],O=0;O<m.length;O++){var P=m[O],D=P.getBoundingClientRect(),A=D.height,N=D.width,T=D.top,M=D.right,R=D.bottom,L=D.left;if("if-needed"===i&&y>=0&&w>=0&&I<=h&&S<=p&&y>=T&&I<=R&&w>=L&&S<=M)return x;var _=getComputedStyle(P),B=parseInt(_.borderLeftWidth,10),V=parseInt(_.borderTopWidth,10),H=parseInt(_.borderRightWidth,10),j=parseInt(_.borderBottomWidth,10),Z=0,q=0,z="offsetWidth"in P?P.offsetWidth-P.clientWidth-B-H:0,W="offsetHeight"in P?P.offsetHeight-P.clientHeight-V-j:0,G="offsetWidth"in P?0===P.offsetWidth?0:N/P.offsetWidth:0,U="offsetHeight"in P?0===P.offsetHeight?0:A/P.offsetHeight:0;if(d===P)Z="start"===r?F:"end"===r?F-h:"nearest"===r?at(b,b+h,h,V,j,b+F,b+F+v,v):F-h/2,q="start"===l?k:"center"===l?k-p/2:"end"===l?k-p:at(f,f+p,p,B,H,f+k,f+k+C,C),Z=Math.max(0,Z+b),q=Math.max(0,q+f);else{Z="start"===r?F-T-V:"end"===r?F-R+j+W:"nearest"===r?at(T,R,A,V,j+W,F,F+v,v):F-(T+A/2)+W/2,q="start"===l?k-L-B:"center"===l?k-(L+N/2)+z/2:"end"===l?k-M+H+z:at(L,M,N,B,H+z,k,k+C,C);var K=P.scrollLeft,$=P.scrollTop;F+=$-(Z=Math.max(0,Math.min($+Z/U,P.scrollHeight-A/U+W))),k+=K-(q=Math.max(0,Math.min(K+q/G,P.scrollWidth-N/G+z)))}x.push({el:P,top:Z,left:q})}return x}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach((function(e){var t=e.el,n=e.top,i=e.left;t.scrollTop=n,t.scrollLeft=i}))}}function dt(e,t){return e===t||e.contains&&e.contains(t)}function mt(e,t){var n;function i(){n&&clearTimeout(n)}function r(){for(var r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];i(),n=setTimeout((function(){n=null,e.apply(void 0,l)}),t)}return r.cancel=i,r}function gt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.some((function(t){return t&&t.apply(void 0,[e].concat(i)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function ht(e){var t=e.isOpen,n=e.selectedItem,i=e.resultCount,r=e.previousResultCount,l=e.itemToString;return t?i?i!==r?i+" result"+(1===i?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":n?l(n):""}function ft(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}var bt=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function Et(e){void 0===e&&(e={});var t={};return bt.forEach((function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}function vt(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function Ct(e,t,n){var i=n-1;("number"!=typeof t||t<0||t>=n)&&(t=e>0?-1:i+1);var r=t+e;return r<0?r=i:r>i&&(r=0),r}var yt=mt((function(){St().textContent=""}),500);function St(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var It=Object.freeze({__proto__:null,unknown:0,mouseUp:1,itemMouseEnter:2,keyDownArrowUp:3,keyDownArrowDown:4,keyDownEscape:5,keyDownEnter:6,keyDownHome:7,keyDownEnd:8,clickItem:9,blurInput:10,changeInput:11,keyDownSpaceButton:12,clickButton:13,blurButton:14,controlledPropUpdatedSelectedItem:15,touchEnd:16}),wt=function(){var e=function(e){function t(t){var n=e.call(this,t)||this;n.id=n.props.id||"downshift-"+String(ot++),n.menuId=n.props.menuId||n.id+"-menu",n.labelId=n.props.labelId||n.id+"-label",n.inputId=n.props.inputId||n.id+"-input",n.getItemId=n.props.getItemId||function(e){return n.id+"-item-"+e},n.input=null,n.items=[],n.itemCount=null,n.previousResultCount=0,n.timeoutIds=[],n.internalSetTimeout=function(e,t){var i=setTimeout((function(){n.timeoutIds=n.timeoutIds.filter((function(e){return e!==i})),e()}),t);n.timeoutIds.push(i)},n.setItemCount=function(e){n.itemCount=e},n.unsetItemCount=function(){n.itemCount=null},n.setHighlightedIndex=function(e,t){void 0===e&&(e=n.props.defaultHighlightedIndex),void 0===t&&(t={}),t=Et(t),n.internalSetState((0,Qe.Z)({highlightedIndex:e},t))},n.clearSelection=function(e){n.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:n.props.defaultHighlightedIndex,isOpen:n.props.defaultIsOpen},e)},n.selectItem=function(e,t,i){t=Et(t),n.internalSetState((0,Qe.Z)({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,selectedItem:e,inputValue:n.props.itemToString(e)},t),i)},n.selectItemAtIndex=function(e,t,i){var r=n.items[e];null!=r&&n.selectItem(r,t,i)},n.selectHighlightedItem=function(e,t){return n.selectItemAtIndex(n.getState().highlightedIndex,e,t)},n.internalSetState=function(e,t){var i,r,l={},a="function"==typeof e;return!a&&e.hasOwnProperty("inputValue")&&n.props.onInputValueChange(e.inputValue,(0,Qe.Z)({},n.getStateAndHelpers(),{},e)),n.setState((function(t){t=n.getState(t);var o=a?e(t):e;o=n.props.stateReducer(t,o),i=o.hasOwnProperty("selectedItem");var s={},c={};return i&&o.selectedItem!==t.selectedItem&&(r=o.selectedItem),o.type=o.type||0,Object.keys(o).forEach((function(e){t[e]!==o[e]&&(l[e]=o[e]),"type"!==e&&(c[e]=o[e],n.isControlledProp(e)||(s[e]=o[e]))})),a&&o.hasOwnProperty("inputValue")&&n.props.onInputValueChange(o.inputValue,(0,Qe.Z)({},n.getStateAndHelpers(),{},o)),s}),(function(){st(t)(),Object.keys(l).length>1&&n.props.onStateChange(l,n.getStateAndHelpers()),i&&n.props.onSelect(e.selectedItem,n.getStateAndHelpers()),void 0!==r&&n.props.onChange(r,n.getStateAndHelpers()),n.props.onUserAction(l,n.getStateAndHelpers())}))},n.rootRef=function(e){return n._rootNode=e},n.getRootProps=function(e,t){var i,r=void 0===e?{}:e,l=r.refKey,a=void 0===l?"ref":l,o=r.ref,s=(0,Ye.Z)(r,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,u=void 0!==c&&c;n.getRootProps.called=!0,n.getRootProps.refKey=a,n.getRootProps.suppressRefError=u;var d=n.getState().isOpen;return(0,Qe.Z)(((i={})[a]=pt(o,n.rootRef),i.role="combobox",i["aria-expanded"]=d,i["aria-haspopup"]="listbox",i["aria-owns"]=d?n.menuId:null,i["aria-labelledby"]=n.labelId,i),s)},n.keyDownHandlers={ArrowDown:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var n=e.shiftKey?5:1;this.moveHighlightedIndex(n,{type:4})}else this.internalSetState({isOpen:!0,type:4},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(Ct(1,t.getState().highlightedIndex,e),{type:4})}))},ArrowUp:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var n=e.shiftKey?-5:-1;this.moveHighlightedIndex(n,{type:3})}else this.internalSetState({isOpen:!0,type:3},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(Ct(-1,t.getState().highlightedIndex,e),{type:4})}))},Enter:function(e){var t=this.getState(),n=t.isOpen,i=t.highlightedIndex;if(n&&null!=i){e.preventDefault();var r=this.items[i],l=this.getItemNodeFromIndex(i);if(null==r||l&&l.hasAttribute("disabled"))return;this.selectHighlightedItem({type:6})}},Escape:function(e){e.preventDefault(),this.reset({type:5,selectedItem:null,inputValue:""})}},n.buttonKeyDownHandlers=(0,Qe.Z)({},n.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:12})}}),n.inputKeyDownHandlers=(0,Qe.Z)({},n.keyDownHandlers,{Home:function(e){this.highlightFirstOrLastIndex(e,!0,{type:7})},End:function(e){this.highlightFirstOrLastIndex(e,!1,{type:8})}}),n.getToggleButtonProps=function(e){var t=void 0===e?{}:e,i=t.onClick,r=(t.onPress,t.onKeyDown),l=t.onKeyUp,a=t.onBlur,o=(0,Ye.Z)(t,["onClick","onPress","onKeyDown","onKeyUp","onBlur"]),s=n.getState().isOpen,c={onClick:gt(i,n.buttonHandleClick),onKeyDown:gt(r,n.buttonHandleKeyDown),onKeyUp:gt(l,n.buttonHandleKeyUp),onBlur:gt(a,n.buttonHandleBlur)},u=o.disabled?{}:c;return(0,Qe.Z)({type:"button",role:"button","aria-label":s?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},u,{},o)},n.buttonHandleKeyUp=function(e){e.preventDefault()},n.buttonHandleKeyDown=function(e){var t=vt(e);n.buttonKeyDownHandlers[t]&&n.buttonKeyDownHandlers[t].call((0,Je.Z)(n),e)},n.buttonHandleClick=function(e){e.preventDefault(),n.props.environment.document.activeElement===n.props.environment.document.body&&e.target.focus(),n.internalSetTimeout((function(){return n.toggleMenu({type:13})}))},n.buttonHandleBlur=function(e){var t=e.target;n.internalSetTimeout((function(){n.isMouseDown||null!=n.props.environment.document.activeElement&&n.props.environment.document.activeElement.id===n.inputId||n.props.environment.document.activeElement===t||n.reset({type:14})}))},n.getLabelProps=function(e){return(0,Qe.Z)({htmlFor:n.inputId,id:n.labelId},e)},n.getInputProps=function(e){var t,i=void 0===e?{}:e,r=i.onKeyDown,l=i.onBlur,a=i.onChange,o=i.onInput,s=(i.onChangeText,(0,Ye.Z)(i,["onKeyDown","onBlur","onChange","onInput","onChangeText"])),c={},u=n.getState(),d=u.inputValue,m=u.isOpen,g=u.highlightedIndex;return s.disabled||((t={}).onChange=gt(a,o,n.inputHandleChange),t.onKeyDown=gt(r,n.inputHandleKeyDown),t.onBlur=gt(l,n.inputHandleBlur),c=t),(0,Qe.Z)({"aria-autocomplete":"list","aria-activedescendant":m&&"number"==typeof g&&g>=0?n.getItemId(g):null,"aria-controls":m?n.menuId:null,"aria-labelledby":n.labelId,autoComplete:"off",value:d,id:n.inputId},c,{},s)},n.inputHandleKeyDown=function(e){var t=vt(e);t&&n.inputKeyDownHandlers[t]&&n.inputKeyDownHandlers[t].call((0,Je.Z)(n),e)},n.inputHandleChange=function(e){n.internalSetState({type:11,isOpen:!0,inputValue:e.target.value,highlightedIndex:n.props.defaultHighlightedIndex})},n.inputHandleBlur=function(){n.internalSetTimeout((function(){var e=n.props.environment.document&&!!n.props.environment.document.activeElement&&!!n.props.environment.document.activeElement.dataset&&n.props.environment.document.activeElement.dataset.toggle&&n._rootNode&&n._rootNode.contains(n.props.environment.document.activeElement);n.isMouseDown||e||n.reset({type:10})}))},n.menuRef=function(e){n._menuNode=e},n.getMenuProps=function(e,t){var i,r=void 0===e?{}:e,l=r.refKey,a=void 0===l?"ref":l,o=r.ref,s=(0,Ye.Z)(r,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,u=void 0!==c&&c;return n.getMenuProps.called=!0,n.getMenuProps.refKey=a,n.getMenuProps.suppressRefError=u,(0,Qe.Z)(((i={})[a]=pt(o,n.menuRef),i.role="listbox",i["aria-labelledby"]=s&&s["aria-label"]?null:n.labelId,i.id=n.menuId,i),s)},n.getItemProps=function(e){var t,i=void 0===e?{}:e,r=i.onMouseMove,l=i.onMouseDown,a=i.onClick,o=(i.onPress,i.index),s=i.item,c=void 0===s?void 0:s,u=(0,Ye.Z)(i,["onMouseMove","onMouseDown","onClick","onPress","index","item"]);void 0===o?(n.items.push(c),o=n.items.indexOf(c)):n.items[o]=c;var d=a,m=((t={onMouseMove:gt(r,(function(){o!==n.getState().highlightedIndex&&(n.setHighlightedIndex(o,{type:2}),n.avoidScrolling=!0,n.internalSetTimeout((function(){return n.avoidScrolling=!1}),250))})),onMouseDown:gt(l,(function(e){e.preventDefault()}))}).onClick=gt(d,(function(){n.selectItemAtIndex(o,{type:9})})),t),g=u.disabled?{onMouseDown:m.onMouseDown}:m;return(0,Qe.Z)({id:n.getItemId(o),role:"option","aria-selected":n.getState().highlightedIndex===o},g,{},u)},n.clearItems=function(){n.items=[]},n.reset=function(e,t){void 0===e&&(e={}),e=Et(e),n.internalSetState((function(t){var i=t.selectedItem;return(0,Qe.Z)({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,inputValue:n.props.itemToString(i)},e)}),t)},n.toggleMenu=function(e,t){void 0===e&&(e={}),e=Et(e),n.internalSetState((function(t){var i=t.isOpen;return(0,Qe.Z)({isOpen:!i},i&&{highlightedIndex:n.props.defaultHighlightedIndex},{},e)}),(function(){var i=n.getState(),r=i.isOpen,l=i.highlightedIndex;r&&n.getItemCount()>0&&"number"==typeof l&&n.setHighlightedIndex(l,e),st(t)()}))},n.openMenu=function(e){n.internalSetState({isOpen:!0},e)},n.closeMenu=function(e){n.internalSetState({isOpen:!1},e)},n.updateStatus=mt((function(){var e=n.getState(),t=n.items[e.highlightedIndex],i=n.getItemCount(),r=n.props.getA11yStatusMessage((0,Qe.Z)({itemToString:n.props.itemToString,previousResultCount:n.previousResultCount,resultCount:i,highlightedItem:t},e));n.previousResultCount=i,function(e,t){var n=St(t);e&&(n.textContent=e,yt())}(r,n.props.environment.document)}),200);var i=n.props,r=i.defaultHighlightedIndex,l=i.initialHighlightedIndex,a=void 0===l?r:l,o=i.defaultIsOpen,s=i.initialIsOpen,c=void 0===s?o:s,u=i.initialInputValue,d=void 0===u?"":u,m=i.initialSelectedItem,g=void 0===m?null:m,p=n.getState({highlightedIndex:a,isOpen:c,inputValue:d,selectedItem:g});return null!=p.selectedItem&&void 0===n.props.initialInputValue&&(p.inputValue=n.props.itemToString(p.selectedItem)),n.state=p,n}(0,Xe.Z)(t,e);var n=t.prototype;return n.internalClearTimeouts=function(){this.timeoutIds.forEach((function(e){clearTimeout(e)})),this.timeoutIds=[]},n.getState=function(e){var t=this;return void 0===e&&(e=this.state),Object.keys(e).reduce((function(n,i){return n[i]=t.isControlledProp(i)?t.props[i]:e[i],n}),{})},n.isControlledProp=function(e){return void 0!==this.props[e]},n.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},n.getItemNodeFromIndex=function(e){return this.props.environment.document.getElementById(this.getItemId(e))},n.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},n.moveHighlightedIndex=function(e,t){var n=this.getItemCount();if(n>0){var i=Ct(e,this.getState().highlightedIndex,n);this.setHighlightedIndex(i,t)}},n.highlightFirstOrLastIndex=function(e,t,n){var i=this.getItemCount()-1;i<0||!this.getState().isOpen||(e.preventDefault(),this.setHighlightedIndex(t?0:i,n))},n.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,n=e.inputValue,i=e.selectedItem,r=e.isOpen,l=this.props.itemToString,a=this.id,o=this.getRootProps,s=this.getToggleButtonProps,c=this.getLabelProps,u=this.getMenuProps,d=this.getInputProps,m=this.getItemProps,g=this.openMenu,p=this.closeMenu,h=this.toggleMenu,f=this.selectItem,b=this.selectItemAtIndex,E=this.selectHighlightedItem,v=this.setHighlightedIndex,C=this.clearSelection,y=this.clearItems;return{getRootProps:o,getToggleButtonProps:s,getLabelProps:c,getMenuProps:u,getInputProps:d,getItemProps:m,reset:this.reset,openMenu:g,closeMenu:p,toggleMenu:h,selectItem:f,selectItemAtIndex:b,selectHighlightedItem:E,setHighlightedIndex:v,clearSelection:C,clearItems:y,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:l,id:a,highlightedIndex:t,inputValue:n,isOpen:r,selectedItem:i}},n.componentDidMount=function(){var e=this,t=function(t,n){void 0===n&&(n=!0);var i=e.props.environment.document;return[e._rootNode,e._menuNode].some((function(e){return e&&(dt(e,t)||n&&dt(e,i.activeElement))}))},n=function(){e.isMouseDown=!0},i=function(n){e.isMouseDown=!1,!t(n.target)&&e.getState().isOpen&&e.reset({type:1},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},r=function(){e.isTouchMove=!1},l=function(){e.isTouchMove=!0},a=function(n){var i=t(n.target,!1);e.isTouchMove||i||!e.getState().isOpen||e.reset({type:16},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},o=this.props.environment;o.addEventListener("mousedown",n),o.addEventListener("mouseup",i),o.addEventListener("touchstart",r),o.addEventListener("touchmove",l),o.addEventListener("touchend",a),this.cleanup=function(){e.internalClearTimeouts(),e.updateStatus.cancel(),o.removeEventListener("mousedown",n),o.removeEventListener("mouseup",i),o.removeEventListener("touchstart",r),o.removeEventListener("touchmove",l),o.removeEventListener("touchend",a)}},n.shouldScroll=function(e,t){var n=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,i=(void 0===t.highlightedIndex?e:t).highlightedIndex;return n&&this.getState().isOpen&&!e.isOpen||n!==i},n.componentDidUpdate=function(e,t){this.isControlledProp("selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:15,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},n.componentWillUnmount=function(){this.cleanup()},n.render=function(){var e=ft(this.props.children,ct);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var t=ft(e(this.getStateAndHelpers()));return t?this.getRootProps.called||this.props.suppressRefError?t:function(e){return"string"==typeof e.type}(t)?(0,nt.cloneElement)(t,this.getRootProps(function(e){return e.props}(t))):void 0:null},t}(nt.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:ht,itemToString:function(e){return null==e?"":String(e)},onStateChange:ct,onInputValueChange:ct,onUserAction:ct,onChange:ct,onSelect:ct,onOuterClick:ct,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?{}:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:ut},e.stateChangeTypes=It,e}();tt().array.isRequired,tt().func,tt().func,tt().func,tt().bool,tt().number,tt().number,tt().number,tt().bool,tt().bool,tt().bool,tt().any,tt().any,tt().any,tt().string,tt().string,tt().string,tt().func,tt().string,tt().func,tt().func,tt().func,tt().func,tt().func,tt().shape({addEventListener:tt().func,removeEventListener:tt().func,document:tt().shape({getElementById:tt().func,activeElement:tt().any,body:tt().any})}),"undefined"==typeof window||window;const Ft=wt,kt=e=>"option"===(null==e?void 0:e.type)&&e.label?e.label:"",xt=e=>e.filter((e=>"option"===e.type));var Ot=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Pt(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((i=e[n])===(r=t[n])||Ot(i)&&Ot(r)))return!1;var i,r;return!0}const Dt=function(e,t){var n;void 0===t&&(t=Pt);var i,r=[],l=!1;return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return l&&n===this&&t(a,r)||(i=e.apply(this,a),l=!0,n=this,r=a),i}};var At=n(31049),Nt="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Tt(e){cancelAnimationFrame(e.id)}var Mt=-1;function Rt(e){if(void 0===e&&(e=!1),-1===Mt||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),Mt=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Mt}var Lt=null;function _t(e){if(void 0===e&&(e=!1),null===Lt||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?Lt="positive-descending":(t.scrollLeft=1,Lt=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Lt}return Lt}var Bt=function(e,t){return e};function Vt(e){var t,n=e.getItemOffset,i=e.getEstimatedTotalSize,r=e.getItemSize,l=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,o=e.getStopIndexForStartIndex,s=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return t=function(e){function t(t){var i;return(i=e.call(this,t)||this)._instanceProps=s(i.props,(0,Je.Z)(i)),i._outerRef=void 0,i._resetIsScrollingTimeoutId=null,i.state={instance:(0,Je.Z)(i),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof i.props.initialScrollOffset?i.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},i._callOnItemsRendered=void 0,i._callOnItemsRendered=Dt((function(e,t,n,r){return i.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:r})})),i._callOnScroll=void 0,i._callOnScroll=Dt((function(e,t,n){return i.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),i._getItemStyle=void 0,i._getItemStyle=function(e){var t,l=i.props,a=l.direction,o=l.itemSize,s=l.layout,u=i._getItemStyleCache(c&&o,c&&s,c&&a);if(u.hasOwnProperty(e))t=u[e];else{var d=n(i.props,e,i._instanceProps),m=r(i.props,e,i._instanceProps),g="horizontal"===a||"horizontal"===s,p="rtl"===a,h=g?d:0;u[e]=t={position:"absolute",left:p?void 0:h,right:p?h:void 0,top:g?0:d,height:g?"100%":m,width:g?m:"100%"}}return t},i._getItemStyleCache=void 0,i._getItemStyleCache=Dt((function(e,t,n){return{}})),i._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,r=t.scrollLeft,l=t.scrollWidth;i.setState((function(e){if(e.scrollOffset===r)return null;var t=i.props.direction,a=r;if("rtl"===t)switch(_t()){case"negative":a=-r;break;case"positive-descending":a=l-n-r}return a=Math.max(0,Math.min(a,l-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),i._resetIsScrollingDebounced)},i._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,r=t.scrollHeight,l=t.scrollTop;i.setState((function(e){if(e.scrollOffset===l)return null;var t=Math.max(0,Math.min(l,r-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),i._resetIsScrollingDebounced)},i._outerRefSetter=function(e){var t=i.props.outerRef;i._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},i._resetIsScrollingDebounced=function(){var e,t,n,r;null!==i._resetIsScrollingTimeoutId&&Tt(i._resetIsScrollingTimeoutId),i._resetIsScrollingTimeoutId=(e=i._resetIsScrolling,t=150,n=Nt(),r={id:requestAnimationFrame((function i(){Nt()-n>=t?e.call(null):r.id=requestAnimationFrame(i)}))})},i._resetIsScrolling=function(){i._resetIsScrollingTimeoutId=null,i.setState({isScrolling:!1},(function(){i._getItemStyleCache(-1,null)}))},i}(0,Xe.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return Ht(e,t),u(e),null};var d=t.prototype;return d.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},d.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props,i=n.itemCount,r=n.layout,a=this.state.scrollOffset;e=Math.max(0,Math.min(e,i-1));var o=0;if(this._outerRef){var s=this._outerRef;o="vertical"===r?s.scrollWidth>s.clientWidth?Rt():0:s.scrollHeight>s.clientHeight?Rt():0}this.scrollTo(l(this.props,e,t,a,this._instanceProps,o))},d.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,i=e.layout;if("number"==typeof n&&null!=this._outerRef){var r=this._outerRef;"horizontal"===t||"horizontal"===i?r.scrollLeft=n:r.scrollTop=n}this._callPropsCallbacks()},d.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,i=this.state,r=i.scrollOffset;if(i.scrollUpdateWasRequested&&null!=this._outerRef){var l=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(_t()){case"negative":l.scrollLeft=-r;break;case"positive-ascending":l.scrollLeft=r;break;default:var a=l.clientWidth,o=l.scrollWidth;l.scrollLeft=o-a-r}else l.scrollLeft=r;else l.scrollTop=r}this._callPropsCallbacks()},d.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Tt(this._resetIsScrollingTimeoutId)},d.render=function(){var e=this.props,t=e.children,n=e.className,r=e.direction,l=e.height,a=e.innerRef,o=e.innerElementType,s=e.innerTagName,c=e.itemCount,u=e.itemData,d=e.itemKey,m=void 0===d?Bt:d,g=e.layout,p=e.outerElementType,h=e.outerTagName,f=e.style,b=e.useIsScrolling,E=e.width,v=this.state.isScrolling,C="horizontal"===r||"horizontal"===g,y=C?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),I=S[0],w=S[1],F=[];if(c>0)for(var k=I;k<=w;k++)F.push((0,At.createElement)(t,{data:u,key:m(k,u),index:k,isScrolling:b?v:void 0,style:this._getItemStyle(k)}));var x=i(this.props,this._instanceProps);return(0,At.createElement)(p||h||"div",{className:n,onScroll:y,ref:this._outerRefSetter,style:(0,Qe.Z)({position:"relative",height:l,width:E,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},f)},(0,At.createElement)(o||s||"div",{children:F,ref:a,style:{height:C?"100%":x,pointerEvents:v?"none":void 0,width:C?x:"100%"}}))},d._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],i=e[2],r=e[3];this._callOnItemsRendered(t,n,i,r)}if("function"==typeof this.props.onScroll){var l=this.state,a=l.scrollDirection,o=l.scrollOffset,s=l.scrollUpdateWasRequested;this._callOnScroll(a,o,s)}},d._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,i=this.state,r=i.isScrolling,l=i.scrollDirection,s=i.scrollOffset;if(0===t)return[0,0,0,0];var c=a(this.props,s,this._instanceProps),u=o(this.props,c,s,this._instanceProps),d=r&&"backward"!==l?1:Math.max(1,n),m=r&&"forward"!==l?1:Math.max(1,n);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,u+m)),c,u]},t}(At.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Ht=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},jt=function(e,t,n){var i=e.itemSize,r=n.itemMetadataMap,l=n.lastMeasuredIndex;if(t>l){var a=0;if(l>=0){var o=r[l];a=o.offset+o.size}for(var s=l+1;s<=t;s++){var c=i(s);r[s]={offset:a,size:c},a+=c}n.lastMeasuredIndex=t}return r[t]},Zt=function(e,t,n,i,r){for(;i<=n;){var l=i+Math.floor((n-i)/2),a=jt(e,l,t).offset;if(a===r)return l;a<r?i=l+1:a>r&&(n=l-1)}return i>0?i-1:0},qt=function(e,t){var n=e.itemCount,i=t.itemMetadataMap,r=t.estimatedItemSize,l=t.lastMeasuredIndex,a=0;if(l>=n&&(l=n-1),l>=0){var o=i[l];a=o.offset+o.size}return a+(n-l-1)*r},zt=Vt({getItemOffset:function(e,t,n){return jt(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:qt,getOffsetForIndexAndAlignment:function(e,t,n,i,r,l){var a=e.direction,o=e.height,s=e.layout,c=e.width,u="horizontal"===a||"horizontal"===s?c:o,d=jt(e,t,r),m=qt(e,r),g=Math.max(0,Math.min(m-u,d.offset)),p=Math.max(0,d.offset-u+d.size+l);switch("smart"===n&&(n=i>=p-u&&i<=g+u?"auto":"center"),n){case"start":return g;case"end":return p;case"center":return Math.round(p+(g-p)/2);default:return i>=p&&i<=g?i:i<p?p:g}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var i=t.itemMetadataMap,r=t.lastMeasuredIndex;return(r>0?i[r].offset:0)>=n?Zt(e,t,r,0,n):function(e,t,n,i){for(var r=e.itemCount,l=1;n<r&&jt(e,n,t).offset<i;)n+=l,l*=2;return Zt(e,t,Math.min(n,r-1),Math.floor(n/2),i)}(e,t,Math.max(0,r),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,i){for(var r=e.direction,l=e.height,a=e.itemCount,o=e.layout,s=e.width,c="horizontal"===r||"horizontal"===o?s:l,u=jt(e,t,i),d=n+c,m=u.offset+u.size,g=t;g<a-1&&m<d;)g++,m+=jt(e,g,i).size;return g},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,i){void 0===i&&(i=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),i&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),Wt=n(96026);const Gt=e=>{var{isFocused:t,isSelected:n,className:i,children:r}=e,l=(0,K._T)(e,["isFocused","isSelected","className","children"]);return z.createElement("div",Object.assign({className:te("gd-list-item","gd-select-option",n&&"gd-select-option-is-selected",t&&"gd-select-option-is-focused s-select-item-focused",i)},l),r)},Ut=e=>{var{children:t,className:n}=e,i=(0,K._T)(e,["children","className"]);return z.createElement("div",Object.assign({className:te("gd-select-heading gd-list-item gd-list-item-header",n)},i),t)},Kt=e=>{var{className:t}=e,n=(0,K._T)(e,["className"]);return z.createElement("hr",Object.assign({className:te("gd-separator-generic",t)},n))},$t=e=>{var{className:t}=e,n=(0,K._T)(e,["className"]);return z.createElement("div",Object.assign({className:te("gd-select-separator",t)},n),z.createElement(Kt,null))},Yt={option:32,heading:22,error:22,separator:1},Qt=e=>t=>{const n=e[t].type;return Yt[n]},Jt=e=>Math.floor(e.length/2);class Xt extends z.Component{constructor(){super(...arguments),this.listRef=z.createRef(),this.scrollToIndex=(e=this.props.highlightedIndex)=>{if(this.listRef.current){const{items:t}=this.props,n=xt(t)[null!==e?e:Jt(xt(t))],i=t.indexOf(n);this.listRef.current.scrollToItem(i,"center")}},this.scrollToTop=()=>{this.listRef.current&&this.listRef.current.scrollTo(0)},this.componentDidUpdate=e=>{const{highlightedIndex:t,items:n,setHighlightedIndex:i,inputValue:r}=this.props,l=xt(e.items).length-1,a=xt(n).length-1,o=0===e.highlightedIndex&&t===a,s=e.highlightedIndex===l&&0===t,c=""===r.trim(),u=""!==e.inputValue.trim()&&c,d=e.inputValue.trim()!==r.trim(),m=Jt(xt(n));u?i(m):d&&i(0);const g=1===this.props.items.length;u?this.scrollToIndex(m):o||s?this.scrollToIndex():g&&this.scrollToTop()}}render(){const{items:e,selectedItem:t,highlightedIndex:n,getItemProps:i,getMenuProps:r,className:l,optionClassName:a,visibleItemsRange:o}=this.props,s=(({items:e,selectedItem:t,highlightedIndex:n,getItemProps:i,optionClassName:r})=>function({index:l,style:a}){const o=xt(e),s=e[l];return"option"===s.type?z.createElement(Gt,Object.assign({},i({key:`${s.type}-${s.value}`,item:s,index:o.indexOf(s),isSelected:!(!t||!s)&&t.value===s.value,className:r}),{isFocused:!(!o[n]||!s)&&o[n].value===s.value,style:a}),s.label):"heading"===s.type||"error"===s.type?z.createElement(Ut,{key:`${s.type}-${s.label}`,style:a},s.label):"separator"===s.type?z.createElement($t,{key:`${s.type}-${l}`,style:a}):null})({items:e,selectedItem:t,highlightedIndex:n,getItemProps:i,optionClassName:a}),c=Jt(xt(e)),u=Wt(Math.max(c-o,0),Math.min(c+o+1,e.length)).reduce(((t,n)=>t+Qt(e)(n)),0);return z.createElement("div",Object.assign({},r({className:te("gd-select-menu-wrapper",l)})),z.createElement("div",{className:"gd-select-menu s-select-menu"},z.createElement(zt,{className:"List",ref:this.listRef,itemCount:e.length,itemSize:Qt(e),height:u,width:"100%",overscanCount:10,estimatedItemSize:Yt.option,style:1===e.length?{overflow:"hidden"}:void 0},s)))}componentDidMount(){if(this.props.inputValue)this.scrollToIndex();else{const e=Jt(xt(this.props.items));this.props.setHighlightedIndex(e),this.scrollToIndex(e)}}}Xt.defaultProps={selectedItem:null,visibleItemsRange:3};const en="GDC.time.date",tn={inputCategory:"Empty"},nn={inputCategory:"TooBig"},rn={"GDC.time.minute":120,"GDC.time.hour":48,[en]:365,"GDC.time.week_us":104,"GDC.time.month":60,"GDC.time.quarter":20,"GDC.time.year":20},ln=(e,t,n)=>{const r=i[t],l=e<0?"history":0===e?"today":"future";return{type:"option",value:e,label:n.formatMessage(E[`${r}_${l}`],{offset:e,n:Math.abs(e)})}},an=(e,t,n)=>e.map((e=>ln(e,t,n))),on=(e,t,n,i)=>{const r=e.toLowerCase(),l=((e,t,n)=>{const i=[-1,0,1],r=Math.abs(e),l=void 0!==e&&r>1?[-r,...i,r]:i;return an(l,t,n)})(t,n,i).filter((e=>e.label.toLowerCase().includes(r)));return l.length>0?l:(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.noMatch"})}])(i)},sn=(e,t)=>xt(e).find((e=>e.value===t));function cn(e="",t=en,n){const i=(e=>null==e?void 0:e.trim())(e),r=(e=>{if(!e)return tn;const t=/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e);if(t){const i=t[1],r=Number.parseInt(i,10);return n=r,Math.abs(n)<=99999?{offset:r,isOnlyNumber:i===e,inputCategory:"Numeric"}:nn}var n;return{inputCategory:"Textual",trimmedValue:e}})(i);switch(r.inputCategory){case"Empty":return((e,t)=>{const n=rn[e],i=an(Wt(-n,0),e,t),r=an(Wt(1,n+1),e,t);return[...i,{type:"separator"},ln(0,e,t),{type:"separator"},...r]})(t,n);case"TooBig":return(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.tooBig"},{limit:99999})}])(n);case"Textual":return on(r.trimmedValue,void 0,t,n);case"Numeric":{const{offset:e,isOnlyNumber:l}=r;return l?((e,t,n)=>an(e>0?[e,-e]:[e],t,n))(e,t,n):on(i,e,t,n)}}}const un=(0,Q.b)(Ft);class dn extends z.Component{constructor(e){super(e),this.inputRef=z.createRef(),this.onChange=e=>{e&&this.props.onChange(e.value)},this.componentDidUpdate=e=>{var t;if(e.value!==this.props.value){const e=this.props.getItems(this.props.value.toString()),n=(null===(t=sn(e,this.props.value))||void 0===t?void 0:t.label)||this.props.value.toString();this.setState({inputValue:n})}},this.focus=()=>{this.inputRef.current&&this.inputRef.current.focus()},this.blur=()=>{this.inputRef.current&&this.inputRef.current.blur()},this.onInputValueChanged=e=>{e!==this.state.inputValue&&this.setState({inputValue:e})},this.onBlurHandler=(e,t,n)=>{const{customValueValidator:i,value:r}=this.props;i?(n(),this.onInputValueChanged(null==r?void 0:r.toString())):(t(e),this.onInputValueChanged(e?e.label:""))},this.onChangeHandler=(e,t)=>{const{customValueValidator:n}=this.props,i=e.target.value;(null==n?void 0:n(i))&&t({type:"option",value:Number(i),label:i}),this.onInputValueChanged(i)};const t=void 0!==e.value?sn(e.getItems(e.value.toString()),e.value):null;this.state={inputValue:t?kt(t):e.value?e.value.toString():""}}render(){const{initialIsOpen:e,placeholder:t,getItems:n,value:i=null,className:r,style:l,optionClassName:a,visibleItemsRange:o}=this.props,s=n(this.state.inputValue),c=null!==i?n(i.toString()):[],u=null!==i&&sn(c,i)||null,d=xt(s),m=""!==this.state.inputValue.trim();return z.createElement(un,{onChange:this.onChange,itemToString:kt,initialIsOpen:e,selectedItem:u,itemCount:d.length,inputValue:this.state.inputValue,defaultHighlightedIndex:u||m?0:Jt(d)},(({getInputProps:e,getMenuProps:n,getItemProps:i,isOpen:c,openMenu:m,closeMenu:g,inputValue:p,highlightedIndex:h,setHighlightedIndex:f,selectItem:b})=>{const E=h>d.length-1?0:h,v={items:s,selectedItem:u,highlightedIndex:E,getItemProps:i,getMenuProps:n,className:"gd-dynamic-select-menu",optionClassName:a,inputValue:p,setHighlightedIndex:f,visibleItemsRange:o};return z.createElement("div",{className:te("gd-dynamic-select",r),style:l},z.createElement("div",{className:"gd-dynamic-select-input-wrapper"},z.createElement("input",Object.assign({type:"text",className:"s-relative-range-input gd-input-field"},e({ref:this.inputRef,placeholder:u?u.label:t,value:p,onFocus:()=>{this.setState({inputValue:""}),m()},onChange:e=>this.onChangeHandler(e,b),onBlur:()=>this.onBlurHandler(u,b,g)})))),c&&s.length>0?z.createElement(Xt,Object.assign({},v)):null)}))}}dn.defaultProps={onChange:U,initialIsOpen:!1,visibleItemsRange:3};class mn extends z.Component{constructor(){super(...arguments),this.toFieldRef=z.createRef(),this.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,this.focusToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout((()=>{var e;null===(e=this.toFieldRef.current)||void 0===e||e.focus()}),0):this.toFieldRef.current.focus())},this.blurToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout((()=>{var e;null===(e=this.toFieldRef.current)||void 0===e||e.blur()}),0):this.toFieldRef.current.blur())},this.handleFromChange=e=>{this.props.onSelectedFilterOptionChange(Object.assign(Object.assign({},this.props.selectedFilterOption),{from:e})),void 0!==e&&this.focusToField()},this.handleToChange=e=>{this.props.onSelectedFilterOptionChange(Object.assign(Object.assign({},this.props.selectedFilterOption),{to:e})),this.blurToField()}}render(){const{handleFromChange:e,handleToChange:t}=this,{selectedFilterOption:n,intl:i,isMobile:r}=this.props,l={visibleItemsRange:r?5:3,optionClassName:"s-relative-date-filter-option s-do-not-close-dropdown-on-click",getItems:e=>{const t=cn(e,n.granularity,i);return r?t.filter((e=>"separator"!==e.type)):t}};return z.createElement("div",{className:"gd-relative-range-picker s-relative-range-picker"},z.createElement(dn,Object.assign({value:n.from,onChange:e,placeholder:i.formatMessage({id:"filters.from"}),className:te("gd-relative-range-picker-picker","s-relative-range-picker-from",r&&"gd-relative-range-picker-picker-mobile")},l)),z.createElement("span",{className:"gd-relative-range-picker-dash"},"–"),z.createElement(dn,Object.assign({value:n.to,onChange:t,placeholder:i.formatMessage({id:"filters.to"}),className:te("gd-relative-range-picker-picker","s-relative-range-picker-to",r&&"gd-relative-range-picker-picker-mobile")},l,{ref:this.toFieldRef})))}}const gn=(0,le.ZP)(mn),pn=({selectedFilterOption:e,availableGranularities:t,onSelectedFilterOptionChange:n,isMobile:i})=>z.createElement(z.Fragment,null,z.createElement($e,{availableGranularities:t,selectedGranularity:e.granularity,onSelectedGranularityChange:t=>n(Object.assign(Object.assign(Object.assign({},e),e.granularity!==t&&{from:void 0,to:void 0}),{granularity:t}))}),z.createElement(gn,{selectedFilterOption:e,onSelectedFilterOptionChange:n,key:e.granularity,isMobile:i}));var hn=n(21804);const fn=e=>{var{children:t,className:n}=e,i=(0,K._T)(e,["children","className"]);return z.createElement("div",Object.assign({className:te("gd-list-item gd-list-item-header gd-filter-list-heading",n)},i),t)},bn=({granularity:e})=>{const t=E[e]||null;return t?z.createElement(ee.Z,{id:t.id}):null},En=["GDC.time.year","GDC.time.quarter","GDC.time.month","GDC.time.week_us","GDC.time.date","GDC.time.hour","GDC.time.minute"],vn=({dateFormat:e,filterOption:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r})=>{const l=En.filter((e=>{var n;return Boolean((null===(n=null==t?void 0:t[e])||void 0===n?void 0:n.length)>0)})).map((e=>({granularity:e,items:t[e]})));return z.createElement(z.Fragment,null,l.map((t=>z.createElement(z.Fragment,{key:t.granularity},z.createElement(fn,{className:r},z.createElement(bn,{granularity:t.granularity})),t.items.map((t=>z.createElement(ce,{key:t.localIdentifier,isSelected:t.localIdentifier===n.localIdentifier,onClick:()=>i(t),className:te(`s-relative-preset-${hn(t.localIdentifier)}`,r)},z.createElement(ae,{filter:t,dateFormat:e}))))))))},Cn=()=>z.createElement("div",{className:"s-extended-date-filter-edit-mode-message gd-extended-date-filter-edit-mode-message"},z.createElement("div",{className:"gd-extended-date-filter-edit-mode-message-text"},z.createElement(ee.Z,{id:"dateFilterDropdown.setDefault",values:{nbsp:z.createElement(z.Fragment,null," ")}})),z.createElement("hr",{className:"gd-separator-generic"})),yn=e=>{var{children:t,changeRoute:n}=e,i=(0,K._T)(e,["children","changeRoute"]);return z.createElement("button",Object.assign({className:"gd-extended-date-filter-header s-do-not-close-dropdown-on-click",onClick:e=>{e.preventDefault(),n(null)}},i),z.createElement("span",{className:"gd-icon-navigateleft"})," ",t)},Sn=(0,le.ZP)((e=>z.createElement(J.Button,{type:"button",value:e.intl.formatMessage({id:e.messageId}),className:e.className,disabled:e.disabled,onClick:e.onClick}))),In=[{align:"bc tc",offset:{x:-1,y:5}}],wn=e=>{const{onConfiguration:t}=e;return z.createElement("div",{className:"gd-date-filter-configuration-button s-gd-date-filter-configuration-button"},z.createElement(J.BubbleHoverTrigger,null,z.createElement(J.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:t}),z.createElement(J.Bubble,{className:"bubble-primary",alignPoints:In},z.createElement(ee.Z,{id:"dateFilterDropdown.configuration"}))))},Fn=({filterOptions:e,dateFormat:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r})=>z.createElement(z.Fragment,null,e.map((e=>z.createElement(ce,{key:e.localIdentifier,isSelected:e.localIdentifier===n.localIdentifier,onClick:()=>i(e),className:te(`s-absolute-preset-${hn(e.localIdentifier)}`,r)},z.createElement(ae,{filter:e,dateFormat:t}))))),kn="gd-date-filter-item-mobile";class xn extends z.Component{constructor(){super(...arguments),this.state={route:null},this.changeRoute=(e=null)=>{this.setState({route:e})},this.renderDateFilterBody=()=>{const{isExcludeCurrentPeriodEnabled:e,isMobile:t,isEditMode:n,selectedFilterOption:i}=this.props,r=!t||e,l=this.calculateHeight(r);let a={},o={};return l&&(a={display:"block",height:`${l}px`},o={minHeight:`${l}px`}),z.createElement(z.Fragment,null,z.createElement("div",{className:te("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,g.isRelativeDateFilterForm)(i)}),style:a},n&&!t?z.createElement(Cn,null):null,t?this.renderMobileContent():z.createElement(ge,{className:"gd-extended-date-filter-body-scrollable",style:o},this.renderDefaultContent())))},this.renderAllTime=()=>{const{filterOptions:e,isMobile:t,selectedFilterOption:n,onSelectedFilterOptionChange:i}=this.props;return e.allTime?z.createElement(pe,{filterOption:e.allTime,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:t?kn:void 0}):null},this.renderAbsoluteForm=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,isTimeForAbsoluteRangeEnabled:r,isMobile:l,errors:a,weekStart:o}=this.props;if(!t.absoluteForm)return null;const{route:s}=this.state,c=t.absoluteForm.localIdentifier===n.localIdentifier,u="absoluteForm"===s;return z.createElement(z.Fragment,null,l&&u?null:z.createElement(ce,{isSelected:c,onClick:()=>{this.changeRoute("absoluteForm"),(0,g.isAbsoluteDateFilterForm)(n)||i(t.absoluteForm)},className:te("s-absolute-form","s-do-not-close-dropdown-on-click",l&&kn)},t.absoluteForm.name?t.absoluteForm.name:z.createElement(ee.Z,{id:"filters.staticPeriod"})),!c||l&&!u?null:z.createElement(he,{isMobile:l},z.createElement(qe,{dateFormat:e,errors:(null==a?void 0:a.absoluteForm)||void 0,onSelectedFilterOptionChange:i,selectedFilterOption:n,isMobile:l,isTimeEnabled:r,weekStart:o})))},this.renderRelativeForm=()=>{const{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:n,availableGranularities:i,isMobile:r}=this.props;if(!e.relativeForm)return null;const{route:l}=this.state,a=e.relativeForm.localIdentifier===t.localIdentifier,o="relativeForm"===l;return z.createElement(z.Fragment,null,r&&o?null:z.createElement(ce,{isSelected:a,onClick:()=>{this.changeRoute("relativeForm"),(0,g.isRelativeDateFilterForm)(t)||n(e.relativeForm)},className:te("s-relative-form","s-do-not-close-dropdown-on-click",r&&kn)},e.relativeForm.name?e.relativeForm.name:z.createElement(ee.Z,{id:"filters.floatingRange"}),r?null:z.createElement(ze,{bubbleAlignPoints:[{align:"cr cl"}]},z.createElement(ee.Z,{id:"filters.floatingRange.tooltip"}))),!a||r&&!o?null:z.createElement(he,{isMobile:r},z.createElement(pn,{onSelectedFilterOptionChange:e=>{n(e)},selectedFilterOption:t,availableGranularities:i,isMobile:r})))},this.renderAbsolutePreset=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,isMobile:r}=this.props;return t.absolutePreset&&t.absolutePreset.length>0?z.createElement(Fn,{dateFormat:e,filterOptions:t.absolutePreset,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r?kn:void 0}):null},this.renderRelativePreset=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,isMobile:r}=this.props;return t.relativePreset?z.createElement(vn,{dateFormat:e,filterOption:t.relativePreset,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r?kn:void 0}):null},this.renderExcludeCurrent=()=>{const{selectedFilterOption:e,onExcludeCurrentPeriodChange:t,excludeCurrentPeriod:n,isExcludeCurrentPeriodEnabled:i}=this.props;return z.createElement(me,{value:n,onChange:t,disabled:!i,granularity:(r=e,w(r)||(0,g.isRelativeDateFilterPreset)(r)?r.granularity:void 0)});var r},this.calculateHeight=e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}}}componentDidMount(){this.props.isMobile&&((0,g.isAbsoluteDateFilterForm)(this.props.selectedFilterOption)?this.changeRoute("absoluteForm"):(0,g.isRelativeDateFilterForm)(this.props.selectedFilterOption)&&this.changeRoute("relativeForm"))}render(){const{isExcludeCurrentPeriodEnabled:e,isMobile:t,onApplyClick:n,onCancelClick:i,closeDropdown:r,onConfigurationClick:l,dateFilterButton:a,errors:o,isConfigurationEnabled:s}=this.props,{route:c}=this.state,u=!t||e;return z.createElement("div",{className:"gd-extended-date-filter-container"},z.createElement("div",{className:te("gd-extended-date-filter-body","s-extended-date-filters-body",t&&"gd-extended-date-filter-body-mobile")},null===c&&t?z.createElement("div",{onClick:()=>{i(),r()}},a):null,this.renderDateFilterBody(),u?this.renderExcludeCurrent():null,z.createElement("div",{className:te("gd-extended-date-filter-actions")},z.createElement("div",{className:"gd-extended-date-filter-actions-left-content"},s?z.createElement(wn,{onConfiguration:l}):null),z.createElement("div",{className:"gd-extended-date-filter-actions-buttons"},z.createElement(Sn,{messageId:"cancel",className:"gd-button-secondary gd-button-small s-date-filter-cancel",onClick:()=>{i(),r()}}),z.createElement(Sn,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!I(o),onClick:()=>{n(),r()}})))))}renderMobileContent(){const{route:e}=this.state;return"absoluteForm"===e?z.createElement(z.Fragment,null,z.createElement(yn,{changeRoute:this.changeRoute},z.createElement(ee.Z,{id:"filters.staticPeriod"})),this.renderAbsoluteForm()):"relativeForm"===e?I(this.props.availableGranularities)?null:z.createElement(z.Fragment,null,z.createElement(yn,{changeRoute:this.changeRoute},z.createElement(ee.Z,{id:"filters.floatingRange"})),this.renderRelativeForm()):this.renderDefaultContent()}renderDefaultContent(){return z.createElement(z.Fragment,null,this.renderAllTime(),this.renderAbsoluteForm(),I(this.props.availableGranularities)?null:this.renderRelativeForm(),this.renderAbsolutePreset(),this.renderRelativePreset())}}const On=(0,Q.b)(Y),Pn=(e,t=!1)=>t?e+s:e,Dn=e=>{var{originalSelectedFilterOption:t,originalExcludeCurrentPeriod:n,onDropdownOpenChanged:i,customFilterName:r,dateFormat:l,disabled:a,locale:o,filterOptions:s,isTimeForAbsoluteRangeEnabled:c,weekStart:u,customIcon:m,FilterConfigurationComponent:g,onApplyClick:p,onCancelClick:h}=e,f=(0,K._T)(e,["originalSelectedFilterOption","originalExcludeCurrentPeriod","onDropdownOpenChanged","customFilterName","dateFormat","disabled","locale","filterOptions","isTimeForAbsoluteRangeEnabled","weekStart","customIcon","FilterConfigurationComponent","onApplyClick","onCancelClick"]);const[b,E]=(0,z.useState)(!1),v=(e=>{try{return T(new Date,e),e}catch(t){return console.warn(`Unsupported date format ${e}, the default format ${d} is used instead.`),d}})(l),C=(0,z.useMemo)((()=>$(D,N)(s)),[s]),S=()=>{E(!1)},I=()=>{E(!0)},w=()=>{S(),h()},F=e=>{i(e),e||S()};return z.createElement(R.IntlWrapper,{locale:o||"en-US"},z.createElement(On,{query:X},(e=>{const i=(i=!1)=>z.createElement(oe,{disabled:a,isMobile:e,isOpen:i,dateFilterOption:y(t,n),dateFormat:Pn(v,c),customFilterName:r,customIcon:m});return z.createElement(J.Dropdown,{closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-50}}],onOpenStateChanged:F,renderButton:({isOpen:e,toggleDropdown:t})=>z.createElement("span",{onClick:a?U:t},i(e)),ignoreClicksOnByClass:[".s-do-not-close-dropdown-on-click",".rdp-day"],renderBody:({closeDropdown:t})=>b?z.createElement(g,{onSaveButtonClick:S,onCancelButtonClick:w}):z.createElement(xn,Object.assign({},f,{onApplyClick:p,onCancelClick:h,filterOptions:C,isMobile:e,closeDropdown:t,dateFilterButton:i(),dateFormat:v,isTimeForAbsoluteRangeEnabled:c,weekStart:u,isConfigurationEnabled:void 0!==g,onConfigurationClick:I}))})})))};class An extends z.PureComponent{static getDerivedStateFromProps(e,t){return W(e.selectedFilterOption,t.initSelectedFilterOption)&&e.excludeCurrentPeriod===t.initExcludeCurrentPeriod?null:An.getStateFromProps(e)}static getStateFromProps(e){const t=S(e.selectedFilterOption);return{initSelectedFilterOption:e.selectedFilterOption,selectedFilterOption:e.selectedFilterOption,initExcludeCurrentPeriod:e.excludeCurrentPeriod,excludeCurrentPeriod:!!t&&e.excludeCurrentPeriod,isTimeForAbsoluteRangeEnabled:e.isTimeForAbsoluteRangeEnabled,isExcludeCurrentPeriodEnabled:t}}constructor(e){super(e),this.handleApplyClick=()=>{const e=(t=this.state.selectedFilterOption,w(t)&&t.from>t.to?Object.assign(Object.assign({},t),{from:t.to,to:t.from}):t);var t;this.props.onApply(e,this.state.excludeCurrentPeriod)},this.onChangesDiscarded=()=>{this.setState((()=>An.getStateFromProps(this.props)))},this.onCancelClicked=()=>{this.props.onCancel(),this.onChangesDiscarded()},this.onDropdownOpenChanged=e=>{e?this.props.onOpen():(this.props.onClose(),this.onChangesDiscarded())},this.handleExcludeCurrentPeriodChange=e=>{this.setState({excludeCurrentPeriod:e})},this.handleSelectedFilterOptionChange=e=>{this.setState((t=>An.getStateFromSelectedOption(e,t.excludeCurrentPeriod)))},this.state=An.getStateFromProps(e)}componentDidMount(){An.checkInitialFilterOption(this.props.selectedFilterOption)}render(){const{customFilterName:e,dateFilterMode:t,dateFormat:n,filterOptions:i,selectedFilterOption:r,excludeCurrentPeriod:l,availableGranularities:a,isEditMode:o,locale:s,isTimeForAbsoluteRangeEnabled:c,weekStart:u,customIcon:d,FilterConfigurationComponent:m}=this.props,{excludeCurrentPeriod:g,selectedFilterOption:p,isExcludeCurrentPeriodEnabled:h}=this.state;return"hidden"===t?null:z.createElement(Dn,{availableGranularities:a,customFilterName:e,dateFormat:n,disabled:"readonly"===t,excludeCurrentPeriod:g,originalExcludeCurrentPeriod:l,isExcludeCurrentPeriodEnabled:h,isTimeForAbsoluteRangeEnabled:c,isEditMode:o,filterOptions:i,selectedFilterOption:p,originalSelectedFilterOption:r,locale:s,onApplyClick:this.handleApplyClick,onCancelClick:this.onCancelClicked,onDropdownOpenChanged:this.onDropdownOpenChanged,onExcludeCurrentPeriodChange:this.handleExcludeCurrentPeriodChange,onSelectedFilterOptionChange:this.handleSelectedFilterOptionChange,errors:C(p),weekStart:u,customIcon:d,FilterConfigurationComponent:m})}}An.defaultProps={dateFormat:d,isEditMode:!1,isTimeForAbsoluteRangeEnabled:!1,locale:"en-US",onCancel:U,onOpen:U,onClose:U,weekStart:"Sunday"},An.getStateFromSelectedOption=(e,t)=>{const n=S(e);return{selectedFilterOption:e,excludeCurrentPeriod:!!n&&t,isExcludeCurrentPeriodEnabled:n}},An.checkInitialFilterOption=e=>{(0,g.isAbsoluteDateFilterForm)(e)&&(G(e.from)||G(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from absoluteForm filter option must be specified."),w(e)&&(G(e.from)||G(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from relativeForm filter option must be specified.")};var Nn=n(56541);const Tn=e=>E[e].id,Mn=e=>({ALL:"all",GREATER_THAN:"greater-than",GREATER_THAN_OR_EQUAL_TO:"greater-than-equal-to",LESS_THAN:"less-than",LESS_THAN_OR_EQUAL_TO:"less-than-equal-to",EQUAL_TO:"equal-to",NOT_EQUAL_TO:"not-equal-to",BETWEEN:"between",NOT_BETWEEN:"not-between"}[e]);class Rn extends z.PureComponent{constructor(){super(...arguments),this.handleOnClick=e=>{const{operator:t,onClick:n}=this.props;n(t),e.preventDefault()}}render(){const{intl:e,operator:t,selectedOperator:n,bubbleText:i}=this.props,r=te("gd-list-item","gd-list-item-shortened",`s-mvf-operator-${Nn.gl(t)}`,{"is-selected":n===t}),l=e.formatMessage({id:Tn(t)});return z.createElement("div",{className:r,onClick:this.handleOnClick},z.createElement("div",{className:`gd-icon-${Mn(t)}`,title:l}),z.createElement("span",{title:l},M(l)),i?this.renderBubble(i):null)}renderBubble(e){return z.createElement("div",{className:"tooltip-bubble"},z.createElement(J.BubbleHoverTrigger,{tagName:"div",showDelay:400,hideDelay:200},z.createElement("div",{className:"inlineBubbleHelp"}),z.createElement(J.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},e)))}}Rn.defaultProps={onClick:U,bubbleText:null};const Ln=(0,le.ZP)(Rn);class _n extends z.PureComponent{render(){const{onSelect:e,onClose:t,selectedOperator:n,alignTo:i,intl:r}=this.props;return z.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:i,alignPoints:[{align:"bl tl"}],onClose:t},z.createElement("div",{className:"gd-dropdown overlay"},z.createElement("div",{className:"gd-mvf-operator-dropdown-body s-mvf-operator-dropdown-body"},z.createElement(Ln,{operator:"ALL",selectedOperator:n,onClick:e}),z.createElement(J.Separator,null),z.createElement(Ln,{operator:"GREATER_THAN",selectedOperator:n,onClick:e}),z.createElement(Ln,{operator:"GREATER_THAN_OR_EQUAL_TO",selectedOperator:n,onClick:e}),z.createElement(J.Separator,null),z.createElement(Ln,{operator:"LESS_THAN",selectedOperator:n,onClick:e}),z.createElement(Ln,{operator:"LESS_THAN_OR_EQUAL_TO",selectedOperator:n,onClick:e}),z.createElement(J.Separator,null),z.createElement(Ln,{operator:"BETWEEN",selectedOperator:n,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.between.tooltip.bubble"})}),z.createElement(Ln,{operator:"NOT_BETWEEN",selectedOperator:n,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.notBetween.tooltip.bubble"})}),z.createElement(J.Separator,null),z.createElement(Ln,{operator:"EQUAL_TO",selectedOperator:n,onClick:e}),z.createElement(Ln,{operator:"NOT_EQUAL_TO",selectedOperator:n,onClick:e}))))}}const Bn=(0,le.ZP)(_n);class Vn extends z.PureComponent{constructor(){super(...arguments),this.state={opened:!1},this.handleOperatorSelected=e=>{this.closeOperatorDropdown(),this.props.onSelect(e)},this.closeOperatorDropdown=()=>this.setState({opened:!1}),this.handleOperatorDropdownButtonClick=()=>this.setState((e=>Object.assign(Object.assign({},e),{opened:!e.opened})))}render(){return z.createElement(z.Fragment,null,this.renderDropdownButton(),this.state.opened?z.createElement(Bn,{alignTo:".gd-mvf-operator-dropdown-button",onSelect:this.handleOperatorSelected,selectedOperator:this.props.operator,onClose:this.closeOperatorDropdown}):null)}renderDropdownButton(){const{intl:e,operator:t,isDisabled:n}=this.props,{opened:i}=this.state,r=M(e.formatMessage({id:Tn(t)})),l=te("gd-mvf-operator-dropdown-button","s-mvf-operator-dropdown-button",`s-mvf-operator-dropdown-button-${Nn.gl(t)}`,"gd-button-primary","gd-button-small",{"button-dropdown":!0,"is-dropdown-open":i,"is-active":i});return z.createElement(J.Button,{title:r,className:l,value:r,onClick:this.handleOperatorDropdownButtonClick,iconLeft:`gd-icon-${Mn(t)}`,iconRight:i?"gd-icon-navigateup":"gd-icon-navigatedown",disabled:n})}}const Hn=(0,le.ZP)(Vn),jn=({from:e,to:t,usePercentage:n,disableAutofocus:i,onFromChange:r,onToChange:l,onEnterKeyPress:a,separators:o})=>z.createElement("div",{className:"gd-mvf-range-input"},z.createElement(J.InputWithNumberFormat,{className:"s-mvf-range-from-input",value:e,onChange:r,onEnterKeyPress:a,isSmall:!0,autofocus:!i,suffix:n?"%":"",separators:o}),z.createElement(J.InputWithNumberFormat,{className:"s-mvf-range-to-input",value:t,onChange:l,onEnterKeyPress:a,isSmall:!0,suffix:n?"%":"",separators:o})),Zn=({value:e,usePercentage:t,disableAutofocus:n,onValueChange:i,onEnterKeyPress:r,separators:l})=>z.createElement(J.InputWithNumberFormat,{className:"s-mvf-comparison-value-input",value:e,onEnterKeyPress:r,onChange:i,isSmall:!0,autofocus:!n,suffix:t?"%":"",separators:l}),qn=({checked:e=!1,onChange:t,intl:n})=>z.createElement("label",{className:"input-checkbox-label gd-mvf-treat-null-values-as-zero s-treat-null-values-as-zero"},z.createElement("input",{type:"checkbox",name:"treat-null-values-as",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked)}),z.createElement("span",{className:"input-label-text"},n.formatMessage({id:"mvf.treatNullValuesAsZeroLabel"}),z.createElement(J.BubbleHoverTrigger,{showDelay:400,hideDelay:200},z.createElement("span",{className:"inlineBubbleHelp"}),z.createElement(J.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},n.formatMessage({id:"mvf.treatNullValuesAsZeroTooltip"})))));function zn(e){return!I(e)&&!!e.severity}const Wn=({warningMessage:e,className:t})=>{const n=te("gd-mvf-warning-message",(e=>{if("string"==typeof e)return"gd-mvf-warning-message-low s-mvf-warning-message-low";switch(e.severity){case"low":return"gd-mvf-warning-message-low s-mvf-warning-message-low";case"medium":return"gd-mvf-warning-message-medium s-mvf-warning-message-medium";case"high":return"gd-mvf-warning-message-high s-mvf-warning-message-high"}})(e),t,"s-mvf-warning-message");return z.createElement("div",{className:n},zn(e)?e.text:e)},Gn=6;class Un extends z.PureComponent{constructor(e){super(e),this.renderInputSection=()=>{const{usePercentage:e,disableAutofocus:t,separators:n}=this.props,{operator:i,value:{value:r=null,from:l=null,to:a=null}}=this.state;return(0,g.isComparisonConditionOperator)(i)?z.createElement(Zn,{value:r,usePercentage:e,onValueChange:this.handleValueChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:n}):(0,g.isRangeConditionOperator)(i)?z.createElement(jn,{from:l,to:a,usePercentage:e,onFromChange:this.handleFromChange,onToChange:this.handleToChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:n}):null},this.isChanged=()=>this.state.operator!==this.props.operator||this.state.enabledTreatNullValuesAsZero!==this.props.treatNullAsZeroValue,this.isApplyButtonDisabled=()=>{const{operator:e}=this.state;return(0,g.isComparisonConditionOperator)(e)?this.isApplyButtonDisabledForComparison():(0,g.isRangeConditionOperator)(e)?this.isApplyButtonDisabledForRange():this.isApplyButtonDisabledForAll()},this.handleOperatorSelection=e=>this.setState({operator:e}),this.handleValueChange=e=>{this.setState({value:Object.assign(Object.assign({},this.state.value),{value:e})})},this.handleFromChange=e=>{this.setState({value:Object.assign(Object.assign({},this.state.value),{from:e})})},this.handleToChange=e=>{this.setState({value:Object.assign(Object.assign({},this.state.value),{to:e})})},this.handleTreatNullAsZeroClicked=e=>{this.setState({enabledTreatNullValuesAsZero:e})},this.trimToPrecision=e=>{const{valuePrecision:t=Gn}=this.props;return e?parseFloat(e.toFixed(t)):e},this.fromPercentToDecimal=e=>e?e/100:e,this.fromDecimalToPercent=e=>e?100*e:e,this.convertToRawValue=(e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromPercentToDecimal(e.value))}:{from:this.trimToPrecision(this.fromPercentToDecimal(e.from)),to:this.trimToPrecision(this.fromPercentToDecimal(e.to))}:e,this.convertToPercentageValue=(e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromDecimalToPercent(e.value))}:{from:this.trimToPrecision(this.fromDecimalToPercent(e.from)),to:this.trimToPrecision(this.fromDecimalToPercent(e.to))}:e,this.onApply=()=>{if(this.isApplyButtonDisabled())return;const{enabledTreatNullValuesAsZero:e,operator:t,value:n}=this.state,{usePercentage:i}=this.props,r="ALL"===t?null:t,l=i?this.convertToRawValue(n,t):n;this.props.onApply(r,l,e)};const{operator:t,value:n,usePercentage:i,treatNullAsZeroValue:r}=e;this.state={operator:t||"ALL",value:(i?this.convertToPercentageValue(n,t):n)||{},enabledTreatNullValuesAsZero:r}}render(){const{onCancel:e,warningMessage:t,displayTreatNullAsZeroOption:n,enableOperatorSelection:i,intl:r}=this.props,{operator:l,enabledTreatNullValuesAsZero:a}=this.state;return z.createElement("div",{className:"gd-mvf-dropdown-body gd-dialog gd-dropdown overlay s-mvf-dropdown-body"},z.createElement("div",{className:"gd-mvf-dropdown-content"},t?z.createElement("div",{className:"gd-mvf-dropdown-section"},z.createElement(Wn,{warningMessage:t})):null,z.createElement("div",{className:"gd-mvf-dropdown-section"},z.createElement(Hn,{onSelect:this.handleOperatorSelection,operator:l,isDisabled:!i})),"ALL"!==l?z.createElement("div",{className:"gd-mvf-dropdown-section"},this.renderInputSection()," ",n?z.createElement(qn,{onChange:this.handleTreatNullAsZeroClicked,checked:a,intl:r}):null):null),z.createElement("div",{className:"gd-mvf-dropdown-footer"},z.createElement(J.Button,{className:"gd-button-secondary gd-button-small s-mvf-dropdown-cancel",onClick:e,value:r.formatMessage({id:"cancel"})}),z.createElement(J.Button,{className:"gd-button-action gd-button-small s-mvf-dropdown-apply",onClick:this.onApply,value:r.formatMessage({id:"apply"}),disabled:this.isApplyButtonDisabled()})))}isApplyButtonDisabledForComparison(){const{value:e=null}=this.state.value;return null===e||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.value:e===this.props.value.value)}isApplyButtonDisabledForRange(){const{from:e=null,to:t=null}=this.state.value;return null===e||null===t||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.from&&this.trimToPrecision(this.fromPercentToDecimal(t))===this.props.value.to:e===this.props.value.from&&t===this.props.value.to)}isApplyButtonDisabledForAll(){return"ALL"===this.props.operator}}const Kn=(0,le.ZP)(Un);class $n extends z.PureComponent{render(){return z.createElement(R.IntlWrapper,{locale:this.props.locale},z.createElement(Kn,Object.assign({},this.props)))}}const Yn=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}})));class Qn extends z.PureComponent{constructor(){super(...arguments),this.onApply=(e,t,n)=>{this.props.onApply(e,t,n)}}render(){const{operator:e,value:t,usePercentage:n,warningMessage:i,locale:r,onCancel:l,anchorEl:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:u}=this.props,d=null!==e?e:"ALL";return z.createElement(J.Overlay,{alignTo:a,alignPoints:Yn,closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,onClose:l},z.createElement($n,{operator:d,value:t,usePercentage:n,warningMessage:i,locale:r,onCancel:l,onApply:this.onApply,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:u}))}}Qn.defaultProps={value:{},operator:"ALL",displayTreatNullAsZeroOption:!1,treatNullAsZeroValue:!1};const Jn=(0,le.ZP)(Qn);class Xn extends z.PureComponent{render(){return z.createElement(R.IntlWrapper,{locale:this.props.locale},z.createElement(Jn,Object.assign({},this.props)))}}const ei=e=>{if(!e)return{};const t=(0,g.measureValueFilterCondition)(e);return t?(0,g.isRangeCondition)(t)?{from:t.range.from,to:t.range.to}:{value:t.comparison.value}:{}},ti=(e,t)=>{if(!e||!(0,g.measureValueFilterCondition)(e))return void 0!==t&&t;const n=(0,g.measureValueFilterCondition)(e);return(0,g.isComparisonCondition)(n)&&void 0!==n.comparison.treatNullValuesAs||(0,g.isRangeCondition)(n)&&void 0!==n.range.treatNullValuesAs||!1};class ni extends z.PureComponent{constructor(){super(...arguments),this.onApply=(e,t,n)=>{var i,r,l;const{filter:a,measureIdentifier:o,onApply:s}=this.props;null===e||"ALL"===e?s(null):(0,g.isRangeConditionOperator)(e)?s((0,g.newMeasureValueFilter)({localIdentifier:o}||a.measureValueFilter.measure,e,null!==(i=t.from)&&void 0!==i?i:0,null!==(r=t.to)&&void 0!==r?r:0,n?0:void 0)):s((0,g.newMeasureValueFilter)({localIdentifier:o}||a.measureValueFilter.measure,e,null!==(l=t.value)&&void 0!==l?l:0,n?0:void 0))}}render(){const{filter:e,onCancel:t,usePercentage:n,warningMessage:i,locale:r,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroDefaultValue:s,enableOperatorSelection:c}=this.props;return z.createElement(Xn,{onApply:this.onApply,onCancel:t,operator:e&&(0,g.measureValueFilterOperator)(e)||null,value:e&&ei(e)||null,usePercentage:n,warningMessage:i,locale:r,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroValue:ti(e,s),enableOperatorSelection:c})}}ni.defaultProps={displayTreatNullAsZeroOption:!1,treatNullAsZeroDefaultValue:!1,enableOperatorSelection:!0};const ii=({isActive:e,buttonTitle:t,onClick:n})=>{const i=te("gd-mvf-dropdown-button","s-mvf-dropdown-button","gd-button","gd-button-secondary","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e});return z.createElement("button",{className:i,onClick:n},t)};class ri extends z.PureComponent{constructor(){super(...arguments),this.state={displayDropdown:!1},this.buttonRef=z.createRef(),this.onApply=e=>{this.closeDropdown(),this.props.onApply(e)},this.onCancel=()=>{this.closeDropdown(),this.props.onCancel()},this.closeDropdown=()=>{this.setState({displayDropdown:!1})},this.toggleDropdown=()=>{this.setState((e=>Object.assign(Object.assign({},e),{displayDropdown:!e.displayDropdown})))}}render(){const{displayDropdown:e}=this.state,{filter:t,measureIdentifier:n,buttonTitle:i,usePercentage:r,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:u}=this.props;return z.createElement(z.Fragment,null,z.createElement("div",{ref:this.buttonRef},z.createElement(ii,{onClick:this.toggleDropdown,isActive:e,buttonTitle:i})),e?z.createElement(ni,{onApply:this.onApply,onCancel:this.onCancel,filter:t,measureIdentifier:n,usePercentage:r,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:u,anchorEl:this.buttonRef.current}):null)}}ri.defaultProps={onCancel:U};const li=({isActive:e,onClick:t,title:n,className:i})=>{const r=te("gd-button","gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e},"s-rf-dropdown-button",i);return z.createElement("button",{className:r,onClick:t},n)},ai=({title:e,value:t,isSelected:n,onSelect:i})=>{const r=te("gd-list-item","gd-list-item-shortened",{"is-selected":n},"gd-button-link",`s-rf-operator-${Nn.gl(e)}`);return z.createElement("button",{className:r,onClick:()=>i(t)},z.createElement("span",null,e))},oi=(0,le.ZP)((({items:e,selectedValue:t,onSelect:n,onClose:i,intl:r})=>z.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-operator-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:i},z.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-operator-dropdown-body s-rf-operator-dropdown-body"},e.map((({value:e,translationId:i})=>{const l=r.formatMessage({id:i});return z.createElement(ai,{key:e,title:l,value:e,isSelected:e===t,onSelect:n})})))))),si=[{value:"TOP",translationId:E.top.id},{value:"BOTTOM",translationId:E.bottom.id}],ci=(0,le.ZP)((({selectedValue:e,onSelect:t,intl:n})=>{const[i,r]=(0,z.useState)(!1),l=te("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":i,"gd-icon-navigatedown":!i},"gd-rf-operator-dropdown-button","s-rf-operator-dropdown-button"),a=n.formatMessage({id:(o=e,si.find((({value:e})=>e===o)).translationId)});var o;return z.createElement(z.Fragment,null,z.createElement(J.Button,{className:l,value:a,onClick:()=>{r(!i)}}),i?z.createElement(oi,{items:si,selectedValue:e,onSelect:e=>{t(e),r(!1)},onClose:()=>r(!1)}):null)})),ui=[3,5,10,15,20,25,50,100].map((e=>({type:"option",value:e,label:`${e}`}))),di=e=>/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e),mi=e=>e&&di(e)&&Number(e)>0&&Number(e)<=99999,gi=(0,le.ZP)((({selectedValue:e,onSelect:t,intl:n})=>z.createElement(dn,{getItems:e=>((e,t)=>{if(!e)return ui;const n=(e=>null==e?void 0:e.trim())(e),i=di(n);if(i){const e=i[1];return((e,t)=>e<1?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]:e>99999?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooLarge"})}]:ui.filter((t=>t.label.toLowerCase().includes(e.toString()))))(Number.parseInt(e,10),t)}return[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]})(e,n),onChange:t,value:e,className:"gd-rf-value-dropdown-button s-rf-value-dropdown-button",optionClassName:"s-rf-value-dropdown-item",customValueValidator:mi}))),pi=({item:e,iconClass:t,isSelected:n,onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})=>{const{title:o,ref:s}=e,c=a&&!a.enable,u=te("gd-list-item","gd-list-item-shortened",{"is-selected":n,"is-disabled":c},"gd-button-link",t,`s-rf-attribute-${Nn.gl(o)}`);return c?z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement(J.Button,{className:u,value:o,title:o,disabled:!0}),z.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-disabled-attribute-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},a.warningMessage)):z.createElement("button",{className:u,onClick:()=>i(s),onMouseOver:()=>{r&&r(s)},onMouseOut:()=>{l&&l()},title:o},z.createElement("span",null,o))},hi=({isSelected:e,onSelect:t})=>{const n=te("gd-list-item","gd-list-item-shortened",{"is-selected":e},"gd-button-link","s-rf-attribute-all-records");return z.createElement("button",{className:n,onClick:()=>t()},z.createElement(ee.Z,{id:"rankingFilter.allRecords"}),z.createElement("div",null,z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement("span",{className:"gd-icon-circle-question gd-rf-attribute-all-records-icon s-rf-attribute-all-records-icon"}),z.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-all-records-bubble",arrowOffsets:{"cr cl":[16,0],"cl cr":[-16,0]},alignPoints:[{align:"cr cl"},{align:"cl cr"}]},z.createElement(ee.Z,{id:"rankingFilter.allRecords.tooltip"})))))},fi=({items:e,selectedItemRef:t,onSelect:n,onClose:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})=>z.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-attribute-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:i},z.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-attribute-dropdown-body s-rf-attribute-dropdown-body"},e.map((e=>{const{type:i,ref:o}=e;return z.createElement(pi,{key:(0,g.objRefToString)(o),iconClass:"DATE"===i?"gd-icon-date":"gd-icon-attribute",item:e,isSelected:(0,g.areObjRefsEqual)(o,t),onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})})),z.createElement("div",{className:"gd-rf-attribute-dropdown-separator"}),z.createElement(hi,{isSelected:!t,onSelect:n}))),bi=(0,le.ZP)((({items:e,selectedItemRef:t,onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,customGranularitySelection:l,intl:a})=>{const[o,s]=(0,z.useState)(!1),c=1===e.length,u=te("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":o,"gd-icon-navigatedown":!o},"gd-rf-attribute-dropdown-button","s-rf-attribute-dropdown-button"),d=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),m=((e,t)=>e?e.title:t.formatMessage({id:"rankingFilter.allRecords"}))(d,a);return c?z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement(J.Button,{className:u,value:m,disabled:!0}),z.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-no-options-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},z.createElement(ee.Z,{id:"rankingFilter.attributeDropdown.oneAttributeTooltip"}))):z.createElement(z.Fragment,null,z.createElement(J.Button,{className:u,value:m,onClick:()=>{s(!o)},iconLeft:(p=d,p?"DATE"===p.type?"gd-icon-date":"gd-icon-attribute":null)}),o?z.createElement(fi,{items:e,selectedItemRef:t,onSelect:e=>{n(e),s(!1),null==r||r()},onClose:()=>s(!1),onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,customGranularitySelection:l}):null);var p})),Ei=({item:e,isSelected:t,onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l})=>{const{title:a,ref:o,sequenceNumber:s}=e,c=te("gd-list-item","gd-list-item-shortened",{"is-selected":t},"gd-button-link",l?"gd-icon-metric":"gd-icon-measure",`s-rf-measure-${Nn.gl(a)}`);return z.createElement("button",{className:c,onClick:()=>n(o),onMouseOver:()=>{i&&i(o)},onMouseOut:()=>{r&&r()},title:a},z.createElement("span",{className:"gd-rf-measure-title"},a),s?z.createElement("span",{className:"gd-rf-sequence-number"},s):null)},vi=({items:e,selectedItemRef:t,onSelect:n,onClose:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})=>z.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-measure-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:i},z.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-measure-dropdown-body s-rf-measure-dropdown-body"},e.map((e=>{const{ref:i}=e;return z.createElement(Ei,{key:(0,g.objRefToString)(i),item:e,isSelected:(0,g.areObjRefsEqual)(i,t),onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})})))),Ci=({items:e,selectedItemRef:t,onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l})=>{const[a,o]=(0,z.useState)(!1),s=te("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":a,"gd-icon-navigatedown":!a},"gd-rf-measure-dropdown-button","s-rf-measure-dropdown-button"),c=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),u=null==c?void 0:c.title;return z.createElement(z.Fragment,null,z.createElement(J.Button,{className:s,value:u,onClick:()=>{o(!a)},iconLeft:l?"gd-icon-metric":"gd-icon-measure"}),a?z.createElement(vi,{items:e,selectedItemRef:t,onSelect:e=>{n(e),o(!1),null==r||r()},onClose:()=>o(!1),onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l}):null)};var yi=n(72905);const Si=(e,t)=>{switch(e){case"TOP":return t?E.topWithAttr.id:E.topWithoutAttr.id;case"BOTTOM":return t?E.bottomWithAttr.id:E.bottomWithoutAttr.id;default:throw new Error(`Operator '${e}' is not supported!`)}},Ii=({operator:e,value:t,measure:n,attribute:i})=>z.createElement("div",{className:"gd-rf-preview s-rf-preview"},z.createElement(ee.Z,{id:Si(e,i),tagName:"span",values:{measure:n.title,attribute:null==i?void 0:i.title,operator:e,value:t,strong:e=>z.createElement("strong",null,e)}})),wi=(e,t)=>{const n=e.rankingFilter,i=t.rankingFilter,r=n.operator===i.operator,l=n.value===i.value,a=I(yi(n.attributes,i.attributes,W)),o=W(n.measure,i.measure);return r&&l&&a&&o},Fi=({measureItems:e,attributeItems:t,filter:n,onApply:i,onCancel:r,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o,intl:s,enableRenamingMeasureToMetric:c})=>{var u;const d=n.rankingFilter,[m,p]=(0,z.useState)(d.value),[h,f]=(0,z.useState)(d.operator),[b,E]=(0,z.useState)(d.measure),[v,C]=(0,z.useState)(null===(u=d.attributes)||void 0===u?void 0:u[0]),y=e.find((e=>(0,g.areObjRefsEqual)(e.ref,b))),S=t.find((e=>(0,g.areObjRefsEqual)(e.ref,v))),I=(0,z.useCallback)((()=>v?(0,g.newRankingFilter)(b,[v],h,m):(0,g.newRankingFilter)(b,h,m)),[b,v,h,m]);return z.createElement("div",{className:"gd-dialog gd-dropdown overlay gd-rf-dropdown-body s-rf-dropdown-body"},z.createElement("div",{className:"gd-rf-dropdown-header"},z.createElement(ee.Z,{id:"rankingFilter.topBottom"})),z.createElement("div",{className:"gd-rf-dropdown-section"},z.createElement("div",{className:"gd-rf-value-section"},z.createElement(ci,{selectedValue:h,onSelect:f}),z.createElement(gi,{selectedValue:m,onSelect:p}),z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement("span",{className:"gd-icon-circle-question gd-rf-value-tooltip-icon s-rf-value-tooltip-icon"}),z.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-value-tooltip",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},z.createElement(ee.Z,{id:"rankingFilter.valueTooltip"})))),z.createElement("div",{className:"gd-rf-dropdown-section-title"},z.createElement(ee.Z,{id:"rankingFilter.outOf"})),z.createElement(bi,{items:t,selectedItemRef:v,onSelect:C,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o}),z.createElement("div",{className:"gd-rf-dropdown-section-title"},z.createElement(ee.Z,{id:"rankingFilter.basedOn"})),z.createElement(Ci,{items:e,selectedItemRef:b,onSelect:E,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,enableRenamingMeasureToMetric:c}),z.createElement("div",{className:"gd-rf-dropdown-section-title"},z.createElement(ee.Z,{id:"rankingFilter.preview"})),z.createElement(Ii,{measure:y,attribute:S,operator:h,value:m})),z.createElement("div",{className:"gd-rf-dropdown-footer"},z.createElement(J.Button,{className:"gd-button-secondary gd-button-small s-rf-dropdown-cancel",onClick:()=>r(),value:s.formatMessage({id:"cancel"})}),z.createElement(J.Button,{className:"gd-button-action gd-button-small s-rf-dropdown-apply",onClick:()=>{const e=I();i(e)},value:s.formatMessage({id:"apply"}),disabled:wi(n,I())})))};Fi.defaultProps={onCancel:U};const ki=(0,le.ZP)(Fi),xi=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),Oi=({measureItems:e,attributeItems:t,filter:n,onApply:i,onCancel:r,anchorEl:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c})=>{const[u,d]=(0,z.useState)((e=>{const{measure:t,attributes:n,operator:i,value:r}=e.rankingFilter,l=null==n?void 0:n[0],a=l?{attributes:[l]}:{};return{rankingFilter:Object.assign({operator:i,value:r,measure:t},a)}})(n));return z.createElement(J.Overlay,{closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,alignTo:l,alignPoints:xi,onClose:r,ignoreClicksOnByClass:[".gd-rf-inner-overlay-dropdown"]},z.createElement(ki,{measureItems:e,attributeItems:t,filter:u,onApply:e=>{d(e),i(e)},onCancel:r,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c}))};Oi.defaultProps={onCancel:U};const Pi=(0,le.ZP)(Oi),Di=e=>z.createElement(R.IntlWrapper,{locale:e.locale},z.createElement(Pi,Object.assign({},e))),Ai=({measureItems:e,attributeItems:t,filter:n,onApply:i,onCancel:r,buttonTitle:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:u})=>{const[d,m]=(0,z.useState)(!1);return z.createElement(z.Fragment,null,z.createElement(li,{isActive:d,onClick:()=>{m(!d)},title:l,className:"gd-rf-dropdown-button"}),d?z.createElement(Di,{measureItems:e,attributeItems:t,filter:n,onApply:e=>{i(e),m(!1)},onCancel:()=>{r(),m(!1)},anchorEl:".gd-rf-dropdown-button",onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:u}):null)};Ai.defaultProps={onCancel:U};var Ni=n(44586),Ti=n(47591),Mi=n(39693),Ri=n(24268),Li=n(30797),_i=n(6557);const Bi={init:_i,initStart:e=>{e.initialization.status="loading"},initSuccess:e=>{e.initialization.status="success"},initError:(e,t)=>{e.initialization.status="error",e.initialization.error=t.payload.error},initCancel:e=>{e.initialization.status="canceled"}},Vi={loadAttributeRequest:_i,loadAttributeStart:e=>{e.attribute.status="loading",e.attribute.error=void 0,e.attribute.data=void 0},loadAttributeSuccess:(e,t)=>{e.attribute.status="success",e.attribute.data=t.payload.attribute},loadAttributeError:(e,t)=>{e.attribute.status="error",e.attribute.error=t.payload.error},loadAttributeCancelRequest:_i,loadAttributeCancel:e=>{e.attribute.status="canceled"}},Hi=e=>e,ji=(e,t)=>"uris"===e.elementsForm?t.uri:t.title,Zi=e=>e.elementsForm,qi={loadCustomElementsRequest:_i,loadCustomElementsStart:_i,loadCustomElementsSuccess:(e,t)=>{t.payload.elements.forEach((t=>{const n=ji(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)}))},loadCustomElementsError:_i,loadCustomElementsCancelRequest:_i,loadCustomElementsCancel:_i},zi={loadInitialElementsPageRequest:_i,loadInitialElementsPageStart:e=>{e.elements.initialPageLoad.status="loading",e.elements.initialPageLoad.error=void 0,e.elements.currentOptions.offset=0,e.elements.lastLoadedOptions.offset=0,e.elements.data=[]},loadInitialElementsPageSuccess:(e,t)=>{e.elements.initialPageLoad.status="success",e.elements.totalCountWithCurrentSettings=t.payload.totalCount,t.payload.elements.forEach((t=>{const n=ji(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=t.payload.elements.map((t=>ji(e,t))),e.elements.lastLoadedOptions=t.payload.options},loadInitialElementsPageError:(e,t)=>{e.elements.initialPageLoad.status="error",e.elements.initialPageLoad.error=t.payload.error},loadInitialElementsPageCancelRequest:_i,loadInitialElementsPageCancel:e=>{e.attribute.status="canceled"}},Wi={loadNextElementsPageRequest:_i,loadNextElementsPageStart:e=>{e.elements.nextPageLoad.status="loading",e.elements.nextPageLoad.error=void 0},loadNextElementsPageSuccess:(e,t)=>{e.elements.nextPageLoad.status="success",t.payload.elements.forEach((t=>{const n=ji(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=e.elements.data.concat(t.payload.elements.map((t=>ji(e,t)))),e.elements.lastLoadedOptions=t.payload.options},loadNextElementsPageError:(e,t)=>{e.elements.nextPageLoad.status="error",e.elements.nextPageLoad.error=t.payload.error},loadNextElementsPageCancelRequest:_i,loadNextElementsPageCancel:e=>{e.elements.nextPageLoad.status="canceled"}};var Gi=n(20573);const Ui=(0,Gi.createSelector)(Hi,(e=>e.selection.working.keys)),Ki=(0,Gi.createSelector)(Hi,(e=>e.selection.working.isInverted)),$i=(0,Gi.createSelector)(Hi,(e=>e.selection.working.irrelevantKeys)),Yi=(0,Gi.createSelector)(Hi,(e=>e.selection.commited.keys)),Qi=(0,Gi.createSelector)(Hi,(e=>e.selection.commited.isInverted)),Ji=(0,Gi.createSelector)(Hi,(e=>e.selection.commited.irrelevantKeys)),Xi=(0,Gi.createSelector)(Ui,Ki,$i,((e,t,n)=>({keys:e,isInverted:t,irrelevantKeys:n}))),er=(0,Gi.createSelector)(Yi,Qi,Ji,((e,t,n)=>({keys:e,isInverted:t,irrelevantKeys:n}))),tr=(0,Gi.createSelector)(Ki,Ui,Qi,Yi,((e,t,n,i)=>e!==n||!W([...i].sort(),[...t].sort()))),nr=(0,Gi.createSelector)(Ui,I),ir={changeSelection:(e,t)=>{e.selection.working.keys=t.payload.selection,t.payload.irrelevantSelection&&(e.selection.working.irrelevantKeys=t.payload.irrelevantSelection),G(t.payload.isInverted)||(e.selection.working.isInverted=t.payload.isInverted)},revertSelection:e=>{const t=Yi(e),n=Qi(e),i=Ji(e);e.selection.working.keys=t,e.selection.working.isInverted=n,e.selection.working.irrelevantKeys=i},commitSelection:e=>{const t=Ui(e),n=Ki(e),i=$i(e);e.selection.commited.keys=t,e.selection.commited.isInverted=n,e.selection.commited.irrelevantKeys=i},invertSelection:e=>{const t=Ki(e);e.selection.working.isInverted=!t},clearSelection:e=>{e.selection.working.keys=[]}},rr={setElementsTotalCount:(e,t)=>{e.elements.totalCount=t.payload.totalCount},initTotalCount:_i,initTotalCountStart:e=>{e.elements.totalCountInitialization.status="loading"},initTotalCountSuccess:e=>{e.elements.totalCountInitialization.status="success"},initTotalCountError:(e,t)=>{e.elements.totalCountInitialization.status="error",e.elements.totalCountInitialization.error=t.payload.error},initTotalCountCancel:e=>{e.elements.totalCountInitialization.status="canceled"},setElementsTotalCountWithCurrentSettings:(e,t)=>{e.elements.totalCountWithCurrentSettings=t.payload.totalCount},setOffset:(e,t)=>{e.elements.currentOptions.offset=t.payload.offset},setLimit:(e,t)=>{e.elements.currentOptions.limit=t.payload.limit},setSearch:(e,t)=>{e.elements.currentOptions.search=t.payload.search},setOrder:(e,t)=>{e.elements.currentOptions.order=t.payload.order},setLimitingAttributeFilters:(e,t)=>{e.elements.currentOptions.limitingAttributeFilters=t.payload.filters},setLimitingMeasures:(e,t)=>{e.elements.currentOptions.limitingMeasures=t.payload.filters},setLimitingDateFilters:(e,t)=>{e.elements.currentOptions.limitingDateFilters=t.payload.filters},setLimitingAttributeFiltersAttributes:(e,t)=>{e.elements.limitingAttributeFiltersAttributes=t.payload.attributes}},lr={loadIrrelevantElementsRequest:_i,loadIrrelevantElementsStart:e=>{e.selection.commited.irrelevantKeys=[],e.selection.working.irrelevantKeys=[]},loadIrrelevantElementsSuccess:(e,t)=>{e.selection.commited.irrelevantKeys=t.payload.elementTitles,e.selection.working.irrelevantKeys=t.payload.elementTitles},loadIrrelevantElementsError:_i,loadIrrelevantElementsCancelRequest:_i,loadIrrelevantElementsCancel:_i},ar=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Bi),Vi),zi),Wi),qi),lr),ir),rr),or={initialization:{status:"pending"},attribute:{status:"pending"},elements:{cache:{},currentOptions:{offset:0,limit:500,search:"",limitingAttributeFilters:[],limitingDateFilters:[],limitingMeasures:[]},initialPageLoad:{status:"pending"},nextPageLoad:{status:"pending"},limitingAttributeFiltersAttributes:[],lastLoadedOptions:{},totalCountInitialization:{status:"pending"}},config:{},selection:{commited:{},working:{}}},sr=(0,Ri.oM)({name:"attributeFilterSlice",initialState:or,reducers:ar}),cr=sr.reducer,ur=sr.actions;var dr=n(34857);function*mr(){return yield(0,dr.fw)("attributeFilterContext")}var gr=n(91966),pr=n(93386);const hr=(0,Gi.createSelector)(Hi,(e=>e.elementsForm)),fr=(0,Gi.createSelector)(Hi,(e=>{var t;return null!==(t=e.config.hiddenElements)&&void 0!==t?t:[]})),br=(0,Gi.createSelector)(hr,fr,((e,t)=>"uris"===e?{uris:t}:{values:t})),Er=(0,Gi.createSelector)(Hi,(e=>e.displayFormRef)),vr=(0,Gi.createSelector)(hr,Yi,((e,t)=>"uris"===e?{uris:t}:{values:t})),Cr=(0,Gi.createSelector)(hr,Yi,Qi,fr,((e,t,n,i)=>{const r=n?pr(t,i):gr(t,i);return"uris"===e?{uris:r}:{values:r}})),yr=(0,Gi.createSelector)(Er,Qi,Cr,((e,t,n)=>t?(0,g.newNegativeAttributeFilter)(e,n):(0,g.newPositiveAttributeFilter)(e,n)));async function Sr(e,t){return e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t).catch((e=>{throw(0,R.convertError)(e)}))}function*Ir(){yield(0,dr.Fm)([ur.loadAttributeRequest.match,ur.loadAttributeCancelRequest.match],wr)}function*wr(e){if(ur.loadAttributeCancelRequest.match(e))return;const{payload:{correlation:t}}=e;try{const e=yield(0,dr.Ys)(Er),n=yield(0,dr.RE)(mr);yield(0,dr.gz)(ur.loadAttributeStart({correlation:t}));const i=yield(0,dr.RE)(Sr,n,e);return yield(0,dr.gz)(ur.loadAttributeSuccess({attribute:i,correlation:t})),i}catch(e){yield(0,dr.gz)(ur.loadAttributeError({error:e,correlation:t}))}finally{(yield(0,dr.By)())&&(yield(0,dr.gz)(ur.loadAttributeCancel({correlation:t})))}}var Fr=n(57557);const kr=(0,Gi.createSelector)(Hi,(e=>e.attribute.data)),xr=(0,Gi.createSelector)(Hi,(e=>e.attribute.status)),Or=(0,Gi.createSelector)(Hi,(e=>e.attribute.error)),Pr=(e,t)=>Mi(e.map((e=>t[e]))),Dr=(0,Gi.createSelector)(Hi,(e=>{var t;return null!==(t=e.elements.data)&&void 0!==t?t:[]})),Ar=(0,Gi.createSelector)(Hi,(e=>e.elements.cache)),Nr=(0,Gi.createSelector)(Dr,Ar,Pr),Tr=(0,Gi.createSelector)(Hi,(e=>e.elements.totalCount)),Mr=(0,Gi.createSelector)(Hi,(e=>{var t;return null===(t=e.elements.totalCountInitialization)||void 0===t?void 0:t.status})),Rr=(0,Gi.createSelector)(Hi,(e=>{var t;return null===(t=e.elements.totalCountInitialization)||void 0===t?void 0:t.error})),Lr=(0,Gi.createSelector)(Hi,(e=>e.elements.totalCountWithCurrentSettings)),_r=(0,Gi.createSelector)(Hi,(e=>{var t;return null!==(t=e.config.staticElements)&&void 0!==t?t:[]})),Br=(0,Gi.createSelector)(Hi,(e=>e.elements.currentOptions.search)),Vr=(0,Gi.createSelector)(Hi,(e=>e.elements.currentOptions.order)),Hr=(0,Gi.createSelector)(Hi,(e=>e.elements.currentOptions.limit)),jr=(0,Gi.createSelector)(Hi,(e=>{var t,n,i;return null!==(i=null===(n=null===(t=e.elements)||void 0===t?void 0:t.lastLoadedOptions)||void 0===n?void 0:n.offset)&&void 0!==i?i:e.elements.currentOptions.offset})),Zr=(0,Gi.createSelector)(Hi,(e=>e.elements.currentOptions.limitingAttributeFilters)),qr=(0,Gi.createSelector)(Hi,(e=>e.elements.currentOptions.limitingMeasures)),zr=(0,Gi.createSelector)(Hi,(e=>e.elements.currentOptions.limitingDateFilters)),Wr=(0,Gi.createSelector)(jr,Hr,Vr,Br,Zr,qr,zr,((e,t,n,i,r,l,a)=>({limit:t,limitingAttributeFilters:r,limitingDateFilters:a,limitingMeasures:l,offset:e,order:n,search:i}))),Gr=(0,Gi.createSelector)(Hi,(e=>e.elements.lastLoadedOptions)),Ur=(0,Gi.createSelector)(Hi,(e=>e.elements.limitingAttributeFiltersAttributes));var Kr=n(20434);class $r{constructor(e,t=50,n=0){this.allItems=e,(0,Ti.kG)(n>=0,`paging offset must be non-negative, got: ${n}`),(0,Ti.kG)(t>0,`limit must be a positive number, got: ${t}`),this.items=e.slice(n,n+t),this.offset=Math.min(n,e.length),this.limit=t,this.totalCount=e.length}async next(){return 0===this.items.length?this:new $r(this.allItems,this.limit,this.offset+this.items.length)}async goTo(e){return 0===this.items.length?this:new $r(this.allItems,this.limit,e*this.items.length)}async all(){return[...this.allItems]}async allSorted(e){return[...this.allItems].sort(e)}}const Yr=e=>t=>(0,g.attributeElementsIsEmpty)(e)?t:(0,g.isAttributeElementsByRef)(e)?t.filter((t=>!e.uris.includes(t.uri))):t.filter((t=>!e.values.includes(t.title))),Qr=e=>t=>{if(!e)return t;if((0,Kr.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e))throw new Kr.NotImplemented("Elements by primary display form value are not supported yet");return(0,Kr.isElementsQueryOptionsElementsByValue)(e)?t.filter((t=>e.values.includes(t.title))):t.filter((t=>e.uris.includes(t.uri)))},Jr=e=>t=>e?t.filter((t=>t.title.toLowerCase().includes(e.toLowerCase()))):t;const Xr=e=>!!e.capabilities.supportsElementUris;async function el(e,t,n,i){return(null==i?void 0:i.length)?async function(e,t,n){let i=$(Yr(t.hiddenElements),Qr(e.elements),Jr(e.search))(n);return"desc"===e.order&&(i=[...i].reverse()),new $r(i,e.limit,e.offset)}(t,n,i):async function(e,t,n){const{backend:i,workspace:r}=e,{displayFormRef:l,elements:a,limit:o,limitingAttributeFilters:s,limitingDateFilters:c,limitingMeasures:u,offset:d,search:m,order:p,includeTotalCountWithoutFilters:h,excludePrimaryLabel:f=!0,signal:b}=t,E=I(s)&&I(c)&&I(u)&&!m&&!f&&!p&&0===d;if(Xr(i)&&(0,Kr.isElementsQueryOptionsElementsByValue)(a)&&E){const e=await async function(e,t,n,i,r){const l=i.values,a=[(0,g.newPositiveAttributeFilter)(n,l)];(0,g.attributeElementsIsEmpty)(r.hiddenElements)||a.push((0,g.newNegativeAttributeFilter)(n,r.hiddenElements));const o=await e.workspace(t).execution().forItems([(0,g.newAttribute)(n)],a).execute().catch((e=>{throw(0,R.convertError)(e)})),s=await o.readAll().catch((e=>{throw(0,R.convertError)(e)})),c=R.DataViewFacade.for(s),[u]=c.meta().attributeHeaders();return u.map((([e])=>({title:e.attributeHeaderItem.name,uri:e.attributeHeaderItem.uri})))}(i,r,l,a,n);return new $r(e,o,d)}let v=i.workspace(r).attributes().elements().forDisplayForm(l);const C={};o&&(v=v.withLimit(o)),d&&(v=v.withOffset(d)),m&&(C.filter=m),f&&!Xr(i)&&(C.excludePrimaryLabel=!0),a&&(C.elements=Xr(i)||(0,Kr.isValueBasedElementsQueryOptionsElements)(a)?a:{primaryValues:a.uris}),p&&(C.order=p),h&&(C.includeTotalCountWithoutFilters=h),I(C)||(v=v.withOptions(C)),(null==c?void 0:c.length)&&(v=v.withDateFilters(c));const y=function(e,t,n,i){return(0,g.attributeElementsIsEmpty)(n)?null!=t?t:[]:[{attributeFilter:(0,g.newNegativeAttributeFilter)(e,n),overAttribute:i.ref},...null!=t?t:[]]}(l,s,n.hiddenElements,n.attribute);return y.length&&(v=v.withAttributeFilters(y)),(null==u?void 0:u.length)&&(v=v.withMeasures(u)),b&&v.withSignal(b),v.query().catch((e=>{throw(0,R.convertError)(e)}))}(e,t,n)}function*tl(e){const t=yield(0,dr.RE)(mr),n=yield(0,dr.Ys)(br),i=yield(0,dr.Ys)(kr),r=yield(0,dr.Ys)(Er),l=yield(0,dr.Ys)(_r),a=yield(0,dr.RE)(el,t,Object.assign({displayFormRef:r},e),{hiddenElements:n,attribute:i},l);return{elements:a.items,totalCount:a.totalCount,options:Fr(e,"signal")}}async function nl(e,t){const n=t.map((e=>(0,g.filterObjRef)(e.attributeFilter)));return Promise.all(n.map((t=>e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t)))).catch((e=>{throw(0,R.convertError)(e)}))}function*il(){yield(0,dr.Fm)([ur.loadInitialElementsPageRequest.match,ur.loadInitialElementsPageCancelRequest.match],rl)}function*rl(e){var t;if(ur.loadInitialElementsPageCancelRequest.match(e))return;const n=yield(0,dr.RE)(mr),i=new AbortController,{payload:{correlation:r}}=e;try{yield(0,dr.gz)(ur.loadInitialElementsPageStart({correlation:r}));const e=yield(0,dr.Ys)(Wr),l=yield(0,dr.Ys)(Zi),a=Object.assign(Object.assign({},e),{signal:i.signal,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===l}),o=yield(0,dr.RE)(tl,a),s=yield(0,dr.RE)(nl,n,null!==(t=e.limitingAttributeFilters)&&void 0!==t?t:[]);yield(0,dr.gz)(ur.setLimitingAttributeFiltersAttributes({attributes:s})),yield(0,dr.gz)(ur.loadInitialElementsPageSuccess(Object.assign(Object.assign({},o),{correlation:r})))}catch(e){yield(0,dr.gz)(ur.loadInitialElementsPageError({error:e,correlation:r}))}finally{(yield(0,dr.By)())&&(i.abort(),yield(0,dr.gz)(ur.loadInitialElementsPageCancel({correlation:r})))}}const ll=(0,Gi.createSelector)(Hi,(e=>e.elements.nextPageLoad.status)),al=(0,Gi.createSelector)(Hi,(e=>e.elements.nextPageLoad.error)),ol=(0,Gi.createSelector)(Gr,(e=>Object.assign(Object.assign({},e),{offset:e.offset+e.limit}))),sl=(0,Gi.createSelector)(Gr,Lr,((e,t)=>e.offset+e.limit<t)),cl=(0,Gi.createSelector)(Wr,Gr,((e,t)=>!W(Fr(e,"offset","excludePrimaryLabel"),Fr(t,"offset","excludePrimaryLabel"))));function*ul(){yield(0,dr.Fm)([ur.loadNextElementsPageRequest.match,ur.loadNextElementsPageCancelRequest.match,ur.loadInitialElementsPageRequest.match],dl)}function*dl(e){const t=yield(0,dr.RE)(mr);if(ur.loadNextElementsPageCancelRequest.match(e)||ur.loadInitialElementsPageRequest.match(e))return;const{payload:{correlation:n}}=e;if(yield(0,dr.Ys)(sl))try{yield(0,dr.gz)(ur.loadNextElementsPageStart({correlation:n}));const e=yield(0,dr.Ys)(ol),i=yield(0,dr.Ys)(Zi),r=Object.assign(Object.assign({},e),{excludePrimaryLabel:!t.backend.capabilities.supportsElementUris&&"values"===i}),l=yield(0,dr.RE)(tl,r);yield(0,dr.gz)(ur.loadNextElementsPageSuccess(Object.assign(Object.assign({},l),{correlation:n})))}catch(e){yield(0,dr.gz)(ur.loadNextElementsPageError({error:e,correlation:n}))}finally{(yield(0,dr.By)())&&(yield(0,dr.gz)(ur.loadNextElementsPageCancel({correlation:n})))}}function*ml(){yield(0,dr.ib)([ur.loadCustomElementsRequest.match],gl)}function*gl(e){const{payload:{correlation:t,options:n}}=e;try{yield(0,dr.gz)(ur.loadCustomElementsStart({correlation:t}));const{result:e,canceled:i,anotherRequest:r}=yield(0,dr.S3)({result:(0,dr.RE)(tl,n),anotherRequest:(0,dr.qn)((e=>ur.loadCustomElementsRequest.match(e)&&(!t||e.payload.correlation===t))),canceled:(0,dr.qn)((e=>ur.loadCustomElementsCancelRequest.match(e)&&(!t||e.payload.correlation===t)))});if(e)return yield(0,dr.gz)(ur.loadCustomElementsSuccess(Object.assign(Object.assign({},e),{correlation:t}))),e;(i||r)&&(yield(0,dr.gz)(ur.loadCustomElementsCancel({correlation:t})))}catch(e){yield(0,dr.gz)(ur.loadCustomElementsError({error:e,correlation:t}))}finally{(yield(0,dr.By)())&&(yield(0,dr.gz)(ur.loadCustomElementsCancel({correlation:t})))}}function*pl(){yield(0,dr.Fm)([ur.loadIrrelevantElementsRequest.match,ur.loadIrrelevantElementsCancelRequest.match],hl)}function*hl(e){if(ur.loadIrrelevantElementsCancelRequest.match(e))return;const t=yield(0,dr.RE)(mr),n=new AbortController,{payload:{correlation:i}}=e;try{yield(0,dr.gz)(ur.loadIrrelevantElementsStart({correlation:i}));const e=yield(0,dr.Ys)(Zi),r=yield(0,dr.Ys)(Wr),l=yield(0,dr.Ys)(Yi),a="values"===e?{values:l}:{uris:l},o=Object.assign(Object.assign({},r),{signal:n.signal,excludePrimaryLabel:!t.backend.capabilities.supportsElementUris&&"values"===e,search:"",elements:a}),s=(yield(0,dr.RE)(tl,o)).elements.map((e=>e.title)),c=gr(l,s);yield(0,dr.gz)(ur.loadIrrelevantElementsSuccess({elementTitles:c,correlation:i}))}catch(e){yield(0,dr.gz)(ur.loadIrrelevantElementsError({error:e,correlation:i}))}finally{(yield(0,dr.By)())&&(n.abort(),yield(0,dr.gz)(ur.loadIrrelevantElementsCancel({correlation:i})))}}function*fl(e){yield(0,dr.rM)(wr,ur.loadAttributeRequest({correlation:e}));const{error:t}=yield(0,dr.S3)({success:(0,dr.qn)((t=>ur.loadAttributeSuccess.match(t)&&t.payload.correlation===e)),error:(0,dr.qn)((t=>ur.loadAttributeError.match(t)&&t.payload.correlation===e)),cancel:(0,dr.qn)((t=>ur.loadAttributeCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*bl(e){const t=yield(0,dr.Ys)(vr),n=yield(0,dr.RE)(mr),i=yield(0,dr.Ys)(Zi);if(0===((0,g.isAttributeElementsByRef)(t)?t.uris:t.values).length)return;const r=`initSelection_${e}`;yield(0,dr.rM)(gl,ur.loadCustomElementsRequest({options:{elements:t,offset:0,limit:550,search:void 0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===i},correlation:r}));const{error:l}=yield(0,dr.S3)({success:(0,dr.qn)((e=>ur.loadCustomElementsSuccess.match(e)&&e.payload.correlation===r)),error:(0,dr.qn)((e=>ur.loadCustomElementsError.match(e)&&e.payload.correlation===r)),cancel:(0,dr.qn)((e=>ur.loadCustomElementsCancel.match(e)&&e.payload.correlation===r))});if(l)throw l.payload.error}function*El(e){yield(0,dr.rM)(rl,ur.loadInitialElementsPageRequest({correlation:e}));const{error:t}=yield(0,dr.S3)({success:(0,dr.qn)((t=>ur.loadInitialElementsPageSuccess.match(t)&&t.payload.correlation===e)),error:(0,dr.qn)((t=>ur.loadInitialElementsPageError.match(t)&&t.payload.correlation===e)),cancel:(0,dr.qn)((t=>ur.loadInitialElementsPageCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*vl(e){const t=`initTotalCount_${e}`,n=yield(0,dr.RE)(mr),i=yield(0,dr.Ys)(Zi);yield(0,dr.rM)(gl,ur.loadCustomElementsRequest({options:{limit:1,includeTotalCountWithoutFilters:!0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===i},correlation:t}));const{success:r,error:l}=yield(0,dr.S3)({success:(0,dr.qn)((e=>ur.loadCustomElementsSuccess.match(e)&&e.payload.correlation===t)),error:(0,dr.qn)((e=>ur.loadCustomElementsError.match(e)&&e.payload.correlation===t)),cancel:(0,dr.qn)((e=>ur.loadCustomElementsCancel.match(e)&&e.payload.correlation===t))});if(l)throw l.payload.error;r&&(yield(0,dr.gz)(ur.setElementsTotalCount({totalCount:r.payload.totalCount})))}function Cl(e){return I(e)||e.every((e=>!!(0,g.isNegativeAttributeFilter)(e.attributeFilter)&&(0,g.attributeElementsIsEmpty)((0,g.filterAttributeElements)(e.attributeFilter))))}function*yl(e){yield(0,dr.rM)(hl,ur.loadIrrelevantElementsRequest({correlation:e}));const{error:t}=yield(0,dr.S3)({success:(0,dr.qn)((t=>ur.loadIrrelevantElementsSuccess.match(t)&&t.payload.correlation===e)),error:(0,dr.qn)((t=>ur.loadIrrelevantElementsError.match(t)&&t.payload.correlation===e)),cancel:(0,dr.qn)((t=>ur.loadIrrelevantElementsCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*Sl(){yield(0,dr.Fm)(ur.init.match,Il)}function*Il(e){const{payload:{correlation:t}}=e;try{yield(0,dr.gz)(ur.initStart({correlation:t}));const e=yield(0,dr.RE)(mr),n=yield(0,dr.Ys)(fr),i=yield(0,dr.Ys)(Zr),r=yield(0,dr.Ys)(nr),l=e.backend.capabilities.supportsShowingFilteredElements,a=!Cl(i),o=[bl,El];(null==n?void 0:n.length)>0?yield(0,dr.RE)(fl,t):o.unshift(fl),a&&o.push(vl),a&&!r&&l&&o.push(yl),yield(0,dr.$6)(o.map((e=>(0,dr.RE)(e,t)))),yield(0,dr.gz)(ur.initSuccess({correlation:t}))}catch(e){yield(0,dr.gz)(ur.initError({error:e,correlation:t}))}finally{(yield(0,dr.By)())&&(yield(0,dr.$6)([(0,dr.gz)(ur.initCancel({correlation:t}))]))}}function*wl(){yield(0,dr.Fm)(ur.initTotalCount.match,Fl)}function*Fl(e){const{payload:{correlation:t}}=e;try{yield(0,dr.gz)(ur.initTotalCountStart({correlation:t})),yield(0,dr.RE)(vl,t),yield(0,dr.gz)(ur.initTotalCountSuccess({correlation:t}))}catch(e){yield(0,dr.gz)(ur.initTotalCountError({error:e,correlation:t}))}finally{(yield(0,dr.By)())&&(yield(0,dr.gz)(ur.initTotalCountCancel({correlation:t})))}}function*kl(){try{yield(0,dr.$6)([Ir,il,ul,ml,pl,Sl,wl].map((e=>(0,dr.rM)(e))))}catch(e){console.error("Root saga failed",e)}}const xl=[ur.loadAttributeError.type,ur.loadInitialElementsPageError.type,ur.loadNextElementsPageError.type,ur.loadCustomElementsError.type,ur.initError.type],Ol=(0,Q.b)(Li.ZP),Pl=(0,Gi.createSelector)(Hi,(e=>e.initialization.status)),Dl=(0,Gi.createSelector)(Hi,(e=>e.initialization.error)),Al=(0,Gi.createSelector)(Hi,(e=>e.elements.initialPageLoad.status)),Nl=(0,Gi.createSelector)(Hi,(e=>e.elements.initialPageLoad.error));function Tl(e,t){const n=t.getCause(),i=n?`\nInner error: ${n}`:"";console.error(`Error while ${e}: ${t.getMessage()}${i}`)}function Ml(){let e=[];return{invoke:t=>{e.forEach((e=>e(t)))},subscribe:t=>(e.push(t),function(){e=e.filter((e=>e!=t))})}}class Rl{constructor(e){this.initializeBridge=()=>{this.callbacks=(()=>{const{registerCallback:e,registrations:t,unsubscribeAll:n}=(()=>{const e=[];return{registrations:{initStart:Ml(),initSuccess:Ml(),initError:Ml(),initCancel:Ml(),initTotalCountStart:Ml(),initTotalCountSuccess:Ml(),initTotalCountError:Ml(),initTotalCountCancel:Ml(),loadAttributeStart:Ml(),loadAttributeSuccess:Ml(),loadAttributeError:Ml(),loadAttributeCancel:Ml(),loadInitialElementsPageStart:Ml(),loadInitialElementsPageSuccess:Ml(),loadInitialElementsPageError:Ml(),loadInitialElementsPageCancel:Ml(),loadNextElementsPageStart:Ml(),loadNextElementsPageSuccess:Ml(),loadNextElementsPageError:Ml(),loadNextElementsPageCancel:Ml(),loadCustomElementsStart:Ml(),loadCustomElementsSuccess:Ml(),loadCustomElementsError:Ml(),loadCustomElementsCancel:Ml(),loadIrrelevantElementsStart:Ml(),loadIrrelevantElementsSuccess:Ml(),loadIrrelevantElementsError:Ml(),loadIrrelevantElementsCancel:Ml(),selectionChanged:Ml(),selectionCommitted:Ml(),update:Ml()},registerCallback:(t,n)=>{const i=n.subscribe(t);return e.push(i),i},unsubscribeAll:()=>{e.forEach((e=>{e()}))}}})();return{registrations:t,registerCallback:e,unsubscribeAll:n,eventListener:(e,n)=>{ur.initStart.match(e)?t.initStart.invoke(e.payload):ur.initSuccess.match(e)?t.initSuccess.invoke(e.payload):ur.initError.match(e)?(Tl("initializing",e.payload.error),t.initError.invoke(e.payload)):ur.initCancel.match(e)&&t.initCancel.invoke(e.payload),ur.initTotalCountStart.match(e)?t.initTotalCountStart.invoke(e.payload):ur.initTotalCountSuccess.match(e)?t.initTotalCountSuccess.invoke(e.payload):ur.initTotalCountError.match(e)?(Tl("initializing total count",e.payload.error),t.initTotalCountError.invoke(e.payload)):ur.initTotalCountCancel.match(e)&&t.initTotalCountCancel.invoke(e.payload),ur.loadAttributeStart.match(e)?t.loadAttributeStart.invoke(e.payload):ur.loadAttributeSuccess.match(e)?t.loadAttributeSuccess.invoke(e.payload):ur.loadAttributeError.match(e)?(Tl("loading attribute",e.payload.error),t.loadAttributeError.invoke(e.payload)):ur.loadAttributeCancel.match(e)&&t.loadAttributeCancel.invoke(e.payload),ur.loadInitialElementsPageStart.match(e)?t.loadInitialElementsPageStart.invoke(e.payload):ur.loadInitialElementsPageSuccess.match(e)?t.loadInitialElementsPageSuccess.invoke(e.payload):ur.loadInitialElementsPageError.match(e)?(Tl("loading initial elements page",e.payload.error),t.loadInitialElementsPageError.invoke(e.payload)):ur.loadInitialElementsPageCancel.match(e)&&t.loadInitialElementsPageCancel.invoke(e.payload),ur.loadNextElementsPageStart.match(e)?t.loadNextElementsPageStart.invoke(e.payload):ur.loadNextElementsPageSuccess.match(e)?t.loadNextElementsPageSuccess.invoke(e.payload):ur.loadNextElementsPageError.match(e)?(Tl("loading next elements page",e.payload.error),t.loadNextElementsPageError.invoke(e.payload)):ur.loadNextElementsPageCancel.match(e)&&t.loadNextElementsPageCancel.invoke(e.payload),ur.loadCustomElementsStart.match(e)?t.loadCustomElementsStart.invoke(e.payload):ur.loadCustomElementsSuccess.match(e)?t.loadCustomElementsSuccess.invoke(e.payload):ur.loadCustomElementsError.match(e)?(Tl("loading custom elements",e.payload.error),t.loadCustomElementsError.invoke(e.payload)):ur.loadCustomElementsCancel.match(e)&&t.loadCustomElementsCancel.invoke(e.payload),ur.loadIrrelevantElementsStart.match(e)?t.loadIrrelevantElementsStart.invoke(e.payload):ur.loadIrrelevantElementsSuccess.match(e)?t.loadIrrelevantElementsSuccess.invoke(e.payload):ur.loadIrrelevantElementsError.match(e)?(Tl("loading irrelevant elements",e.payload.error),t.loadIrrelevantElementsError.invoke(e.payload)):ur.loadIrrelevantElementsCancel.match(e)&&t.loadIrrelevantElementsCancel.invoke(e.payload),[ur.changeSelection.match,ur.revertSelection.match,ur.invertSelection.match,ur.clearSelection.match].some((t=>t(e)))&&t.selectionChanged.invoke({selection:n(Xi)}),ur.commitSelection.match(e)&&t.selectionCommitted.invoke({selection:n(er)}),[ur.initStart.match,ur.initSuccess.match,ur.initError.match,ur.initCancel.match,ur.loadAttributeStart.match,ur.loadAttributeSuccess.match,ur.loadAttributeError.match,ur.loadAttributeCancel.match,ur.loadInitialElementsPageStart.match,ur.loadInitialElementsPageSuccess.match,ur.loadInitialElementsPageError.match,ur.loadInitialElementsPageCancel.match,ur.loadNextElementsPageStart.match,ur.loadNextElementsPageSuccess.match,ur.loadNextElementsPageError.match,ur.loadNextElementsPageCancel.match,ur.loadIrrelevantElementsStart.match,ur.loadIrrelevantElementsSuccess.match,ur.loadIrrelevantElementsError.match,ur.loadIrrelevantElementsCancel.match,ur.changeSelection.match,ur.revertSelection.match,ur.invertSelection.match,ur.clearSelection.match,ur.commitSelection.match,ur.setLimit.match,ur.setOrder.match,ur.setSearch.match,ur.setLimitingMeasures.match,ur.setLimitingAttributeFilters.match,ur.setLimitingDateFilters.match].some((t=>t(e)))&&t.update.invoke()}}})(),this.redux=function(e){const t=Ol({context:{attributeFilterContext:e}}),n=(0,g.filterObjRef)(e.attributeFilter),i=(0,g.filterAttributeElements)(e.attributeFilter),r=(0,g.isAttributeElementsByValue)(i)?"values":"uris",l=(0,g.isAttributeElementsByValue)(i)?i.values:i.uris,a=(0,g.isNegativeAttributeFilter)(e.attributeFilter),o=(0,Ri.xC)({preloadedState:Object.assign(Object.assign({},or),{displayFormRef:n,elementsForm:r,selection:{commited:{keys:l,isInverted:a,irrelevantKeys:[]},working:{keys:l,isInverted:a,irrelevantKeys:[]}},config:{hiddenElements:e.hiddenElements,staticElements:e.staticElements}}),reducer:cr,middleware:n=>{return n({thunk:!1,serializableCheck:{ignoredActions:xl,ignoredPaths:["initialization.error","attribute.error","elements.initialPageLoad.error","elements.nextPageLoad.error"]}}).concat([t,(i=e.eventListener,e=>t=>n=>{const r=t(n);return i(r,(t=>t(e.getState()))),r})]);var i},devTools:{name:"AttributeFilter state"}}),s=t.run(kl);return{context:e,cancelRootSaga:()=>{s.cancel()},dispatch:e=>{o.dispatch(e)},select:e=>e(o.getState())}}(Object.assign(Object.assign({},this.config),{eventListener:(e,t)=>{this.callbacks.eventListener(e,t)}}))},this.init=e=>{this.redux.dispatch(ur.init({correlation:e}))},this.getInitStatus=()=>this.redux.select(Pl),this.getInitError=()=>this.redux.select(Dl),this.onInitStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initStart),this.onInitSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initSuccess),this.onInitError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initError),this.onInitCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initCancel),this.initTotalCount=e=>{this.redux.dispatch(ur.initTotalCount({correlation:e}))},this.getInitTotalCountStatus=()=>this.redux.select(Mr),this.getInitTotalCountError=()=>this.redux.select(Rr),this.onInitTotalCountStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountStart),this.onInitTotalCountSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountSuccess),this.onInitTotalCountError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountError),this.onInitTotalCountCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountCancel),this.loadAttribute=e=>{this.redux.dispatch(ur.loadAttributeRequest({correlation:e}))},this.cancelAttributeLoad=()=>{this.redux.dispatch(ur.loadAttributeCancelRequest())},this.getAttribute=()=>this.redux.select(kr),this.getAttributeStatus=()=>this.redux.select(xr),this.getAttributeError=()=>this.redux.select(Or),this.onLoadAttributeStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeStart),this.onLoadAttributeSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeSuccess),this.onLoadAttributeError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeError),this.onLoadAttributeCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeCancel),this.loadInitialElementsPage=e=>{this.redux.dispatch(ur.loadInitialElementsPageRequest({correlation:e}))},this.cancelInitialElementsPageLoad=()=>{this.redux.dispatch(ur.loadInitialElementsPageCancelRequest())},this.getInitialElementsPageStatus=()=>this.redux.select(Al),this.getInitialElementsPageError=()=>this.redux.select(Nl),this.onLoadInitialElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageStart),this.onLoadInitialElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageSuccess),this.onLoadInitialElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageError),this.onLoadInitialElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageCancel),this.loadNextElementsPage=e=>{this.redux.dispatch(ur.loadNextElementsPageRequest({correlation:e}))},this.getNextElementsPageStatus=()=>this.redux.select(ll),this.getNextElementsPageError=()=>this.redux.select(al),this.onLoadNextElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageStart),this.onLoadNextElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageSuccess),this.onLoadNextElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageError),this.onLoadNextElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageCancel),this.loadCustomElements=(e,t)=>{this.redux.dispatch(ur.loadCustomElementsRequest({options:e,correlation:t}))},this.onLoadCustomElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsStart),this.onLoadCustomElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsSuccess),this.onLoadCustomElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsError),this.onLoadCustomElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsCancel),this.loadIrrelevantElements=e=>{this.redux.dispatch(ur.loadIrrelevantElementsRequest({correlation:e}))},this.onLoadIrrelevantElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsStart),this.onLoadIrrelevantElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsSuccess),this.onLoadIrrelevantElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsError),this.onLoadIrrelevantElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsCancel),this.getOffset=()=>this.redux.select(jr),this.setSearch=e=>{this.redux.dispatch(ur.setSearch({search:e}))},this.getSearch=()=>this.redux.select(Br),this.setLimit=e=>{this.redux.dispatch(ur.setLimit({limit:e}))},this.getLimit=()=>this.redux.select(Hr),this.setOrder=e=>{this.redux.dispatch(ur.setOrder({order:e}))},this.getOrder=()=>this.redux.select(Vr),this.setLimitingMeasures=e=>{this.redux.dispatch(ur.setLimitingMeasures({filters:e}))},this.getLimitingMeasures=()=>this.redux.select(qr),this.setLimitingAttributeFilters=e=>{this.redux.dispatch(ur.setLimitingAttributeFilters({filters:e}))},this.getLimitingAttributeFilters=()=>this.redux.select(Zr),this.setLimitingDateFilters=e=>{this.redux.dispatch(ur.setLimitingDateFilters({filters:e}))},this.getLimitingDateFilters=()=>this.redux.select(zr),this.getAllElements=()=>this.redux.select(Nr),this.getElementsByKey=e=>{const t=this.redux.select(Ar);return Pr(e,t)},this.getTotalCount=()=>this.redux.select(Tr),this.getTotalCountWithCurrentSettings=()=>this.redux.select(Lr),this.getLimitingAttributeFiltersAttributes=()=>this.redux.select(Ur),this.changeMultiSelection=({keys:e,isInverted:t,irrelevantKeys:n})=>{this.redux.dispatch(ur.changeSelection({selection:e,isInverted:t,irrelevantSelection:n}))},this.revertMultiSelection=()=>{this.redux.dispatch(ur.revertSelection())},this.commitMultiSelection=()=>{this.redux.dispatch(ur.commitSelection())},this.invertMultiSelection=()=>{this.redux.dispatch(ur.invertSelection())},this.clearMultiSelection=()=>{this.redux.dispatch(ur.clearSelection())},this.getWorkingMultiSelection=()=>this.redux.select(Xi),this.getCommittedMultiSelection=()=>this.redux.select(er),this.changeSingleSelection=e=>{this.redux.dispatch(ur.changeSelection({isInverted:!1,selection:Mi([e])}))},this.revertSingleSelection=()=>{this.redux.dispatch(ur.revertSelection())},this.commitSingleSelection=()=>{this.redux.dispatch(ur.commitSelection())},this.getWorkingSingleSelection=()=>{const[e,...t]=this.redux.select(Ui);return(0,Ti.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e},this.getCommittedSingleSelection=()=>{const[e,...t]=this.redux.select(Yi);return(0,Ti.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e},this.onMultiSelectionChanged=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionChanged),this.onMultiSelectionCommitted=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionCommitted),this.onSingleSelectionChanged=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionChanged),this.onSingleSelectionCommitted=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionCommitted),this.getIsWorkingSelectionEmpty=()=>this.redux.select(nr),this.getIsWorkingSelectionChanged=()=>this.redux.select(tr),this.getFilter=()=>this.redux.select(yr),this.onUpdate=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.update),this.isLoadElementsOptionsChanged=()=>this.redux.select(cl),this.config=e,this.initializeBridge()}cancelNextElementsPageLoad(){this.redux.dispatch(ur.loadNextElementsPageCancelRequest())}cancelCustomElementsLoad(e){this.redux.dispatch(ur.loadCustomElementsCancelRequest({correlation:e}))}cancelIrrelevantElementsLoad(e){this.redux.dispatch(ur.loadIrrelevantElementsCancelRequest({correlation:e}))}}class Ll{constructor(e){this.validateStaticElementsLoad=()=>{var e,t,n,i,r,l;(0,Ti.kG)(!((null===(e=this.config.staticElements)||void 0===e?void 0:e.length)&&(null===(t=this.getLimitingAttributeFilters())||void 0===t?void 0:t.length)),"Using limitingAttributeFilters is not supported when using static attribute elements"),(0,Ti.kG)(!((null===(n=this.config.staticElements)||void 0===n?void 0:n.length)&&(null===(i=this.getLimitingDateFilters())||void 0===i?void 0:i.length)),"Using limitingDateFilters is not supported when using static attribute elements"),(0,Ti.kG)(!((null===(r=this.config.staticElements)||void 0===r?void 0:r.length)&&(null===(l=this.getLimitingMeasures())||void 0===l?void 0:l.length)),"Using limitingMeasures is not supported when using static attribute elements")},this.init=(e=(0,Ni.Z)())=>{this.validateStaticElementsLoad(),this.bridge.init(e)},this.onInitStart=e=>this.bridge.onInitStart(e),this.onInitSuccess=e=>this.bridge.onInitSuccess(e),this.onInitError=e=>this.bridge.onInitError(e),this.onInitCancel=e=>this.bridge.onInitCancel(e),this.getInitStatus=()=>this.bridge.getInitStatus(),this.getInitError=()=>this.bridge.getInitError(),this.initTotalCount=(e=(0,Ni.Z)())=>{this.bridge.initTotalCount(e)},this.getInitTotalCountStatus=()=>this.bridge.getInitTotalCountStatus(),this.getInitTotalCountError=()=>this.bridge.getInitTotalCountError(),this.onInitTotalCountStart=e=>this.bridge.onInitTotalCountStart(e),this.onInitTotalCountSuccess=e=>this.bridge.onInitTotalCountSuccess(e),this.onInitTotalCountError=e=>this.bridge.onInitTotalCountError(e),this.onInitTotalCountCancel=e=>this.bridge.onInitTotalCountCancel(e),this.loadAttribute=(e=(0,Ni.Z)())=>{this.bridge.loadAttribute(e)},this.cancelAttributeLoad=()=>{this.bridge.cancelAttributeLoad()},this.getAttribute=()=>this.bridge.getAttribute(),this.getAttributeError=()=>this.bridge.getAttributeError(),this.getAttributeStatus=()=>this.bridge.getAttributeStatus(),this.onLoadAttributeStart=e=>this.bridge.onLoadAttributeStart(e),this.onLoadAttributeSuccess=e=>this.bridge.onLoadAttributeSuccess(e),this.onLoadAttributeError=e=>this.bridge.onLoadAttributeError(e),this.onLoadAttributeCancel=e=>this.bridge.onLoadAttributeCancel(e),this.loadInitialElementsPage=(e=(0,Ni.Z)())=>{(0,Ti.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadInitialElementsPage() before successful initialization."),this.validateStaticElementsLoad(),this.bridge.loadInitialElementsPage(e)},this.getInitialElementsPageStatus=()=>this.bridge.getInitialElementsPageStatus(),this.getInitialElementsPageError=()=>this.bridge.getInitialElementsPageError(),this.onLoadInitialElementsPageStart=e=>this.bridge.onLoadInitialElementsPageStart(e),this.onLoadInitialElementsPageSuccess=e=>this.bridge.onLoadInitialElementsPageSuccess(e),this.onLoadInitialElementsPageError=e=>this.bridge.onLoadInitialElementsPageError(e),this.onLoadInitialElementsPageCancel=e=>this.bridge.onLoadInitialElementsPageCancel(e),this.loadNextElementsPage=(e=(0,Ni.Z)())=>{(0,Ti.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadNextElementsPage() before successful initialization."),(0,Ti.kG)("success"===this.bridge.getInitialElementsPageStatus(),"Cannot call loadNextElementsPage() before loadInitialElementsPage() completes."),(0,Ti.kG)(!this.bridge.isLoadElementsOptionsChanged(),"Cannot call loadNextElementsPage() when load element options were changed. When options are changed, you should call loadInitialElementsPage() first."),this.bridge.loadNextElementsPage(e)},this.getNextElementsPageStatus=()=>this.bridge.getNextElementsPageStatus(),this.getNextElementsPageError=()=>this.bridge.getNextElementsPageError(),this.onLoadNextElementsPageStart=e=>this.bridge.onLoadNextElementsPageStart(e),this.onLoadNextElementsPageSuccess=e=>this.bridge.onLoadNextElementsPageSuccess(e),this.onLoadNextElementsPageError=e=>this.bridge.onLoadNextElementsPageError(e),this.onLoadNextElementsPageCancel=e=>this.bridge.onLoadNextElementsPageCancel(e),this.loadCustomElements=(e,t)=>{this.bridge.loadCustomElements(e,t)},this.onLoadCustomElementsStart=e=>this.bridge.onLoadCustomElementsStart(e),this.onLoadCustomElementsSuccess=e=>this.bridge.onLoadCustomElementsSuccess(e),this.onLoadCustomElementsError=e=>this.bridge.onLoadCustomElementsError(e),this.onLoadCustomElementsCancel=e=>this.bridge.onLoadCustomElementsCancel(e),this.loadIrrelevantElements=e=>{this.bridge.loadIrrelevantElements(e)},this.onLoadIrrelevantElementsStart=e=>this.bridge.onLoadIrrelevantElementsStart(e),this.onLoadIrrelevantElementsSuccess=e=>this.bridge.onLoadIrrelevantElementsSuccess(e),this.onLoadIrrelevantElementsError=e=>this.bridge.onLoadIrrelevantElementsError(e),this.onLoadIrrelevantElementsCancel=e=>this.bridge.onLoadIrrelevantElementsCancel(e),this.getOffset=()=>this.bridge.getOffset(),this.setSearch=e=>{this.bridge.setSearch(e)},this.getSearch=()=>this.bridge.getSearch(),this.setLimit=e=>{this.bridge.setLimit(e)},this.getLimit=()=>this.bridge.getLimit(),this.setOrder=e=>{this.bridge.setOrder(e)},this.getOrder=()=>this.bridge.getOrder(),this.setLimitingMeasures=e=>{this.bridge.setLimitingMeasures(e)},this.getLimitingMeasures=()=>this.bridge.getLimitingMeasures(),this.setLimitingAttributeFilters=e=>{this.bridge.setLimitingAttributeFilters(e)},this.getLimitingAttributeFilters=()=>this.bridge.getLimitingAttributeFilters(),this.setLimitingDateFilters=e=>{this.bridge.setLimitingDateFilters(e)},this.getLimitingDateFilters=()=>this.bridge.getLimitingDateFilters(),this.getAllElements=()=>this.bridge.getAllElements(),this.getElementsByKey=e=>this.bridge.getElementsByKey(e),this.getTotalElementsCount=()=>this.bridge.getTotalCount(),this.getTotalElementsCountWithCurrentSettings=()=>this.bridge.getTotalCountWithCurrentSettings(),this.getLimitingAttributeFiltersAttributes=()=>this.bridge.getLimitingAttributeFiltersAttributes(),this.getFilter=()=>this.bridge.getFilter(),this.onUpdate=e=>this.bridge.onUpdate(e),this.config=e,this.bridge=new Rl(e)}cancelInitialElementsPageLoad(){this.bridge.cancelInitialElementsPageLoad()}cancelNextElementsPageLoad(){this.bridge.cancelNextElementsPageLoad()}cancelCustomElementsLoad(e){this.bridge.cancelCustomElementsLoad(e)}cancelIrrelevantElementsLoad(e){this.bridge.cancelIrrelevantElementsLoad(e)}}class _l extends Ll{constructor(e){super(e),this.changeSelection=e=>{this.bridge.changeMultiSelection(e)},this.revertSelection=()=>{this.bridge.revertMultiSelection()},this.commitSelection=()=>{this.bridge.commitMultiSelection()},this.invertSelection=()=>{this.bridge.invertMultiSelection()},this.clearSelection=()=>{this.bridge.clearMultiSelection()},this.getWorkingSelection=()=>this.bridge.getWorkingMultiSelection(),this.isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty(),this.isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged(),this.getCommittedSelection=()=>this.bridge.getCommittedMultiSelection(),this.onSelectionChanged=e=>this.bridge.onMultiSelectionChanged(e),this.onSelectionCommitted=e=>this.bridge.onMultiSelectionCommitted(e)}}class Bl extends Ll{static sanitizeConfig(e){const t=(0,g.filterAttributeElements)(e.attributeFilter),n=((0,g.isAttributeElementsByRef)(t)?t.uris:t.values)[0],i=(0,g.isAttributeElementsByRef)(t)?{uris:[n]}:{values:[n]};return Object.assign(Object.assign({},e),{attributeFilter:(0,g.isPositiveAttributeFilter)(e.attributeFilter)?(0,g.newPositiveAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),i):(0,g.newNegativeAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),i)})}constructor(e){super(Bl.sanitizeConfig(e)),this.changeSelection=e=>{this.bridge.changeSingleSelection(e)},this.revertSelection=()=>{this.bridge.revertSingleSelection()},this.commitSelection=()=>{this.bridge.commitSingleSelection()},this.getWorkingSelection=()=>this.bridge.getWorkingSingleSelection(),this.isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty(),this.isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged(),this.getCommittedSelection=()=>this.bridge.getCommittedSingleSelection(),this.onSelectionChanged=e=>this.bridge.onSingleSelectionChanged(e),this.onSelectionCommitted=e=>this.bridge.onSingleSelectionCommitted(e)}}function Vl(e,t,n,i={selectionMode:"multi"}){const{selectionMode:r,hiddenElements:l,staticElements:a}=i;return"multi"===r?new _l({backend:e,workspace:t,attributeFilter:n,hiddenElements:l,staticElements:a}):new Bl({backend:e,workspace:t,attributeFilter:n,hiddenElements:l,staticElements:a})}const Hl=(e,t)=>()=>{throw new R.UnexpectedSdkError(`Component: ${e} is missing in the ${t}.`)};function jl(e,t){return e.formattedTitle||e.title||`(${t.formatMessage({id:"empty_value"})})`}function Zl(e,t){return e.map((e=>jl(e,t))).join(", ")}function ql(e){return e.uri}const zl=(0,z.createContext)({ErrorComponent:Hl("ErrorComponent","AttributeFilterComponentsContext"),LoadingComponent:Hl("LoadingComponent","AttributeFilterComponentsContext"),DropdownButtonComponent:Hl("DropdownButtonComponent","AttributeFilterComponentsContext"),DropdownBodyComponent:Hl("DropdownBodyComponent","AttributeFilterComponentsContext"),DropdownActionsComponent:Hl("DropdownActionsComponent","AttributeFilterComponentsContext"),ElementsSearchBarComponent:Hl("ElementsSearchBarComponent","AttributeFilterComponentsContext"),ElementsSelectComponent:Hl("ElementsSelectComponent","AttributeFilterComponentsContext"),ElementsSelectLoadingComponent:Hl("ElementsSelectLoadingComponent","AttributeFilterComponentsContext"),ElementsSelectItemComponent:Hl("ElementsSelectItemComponent","AttributeFilterComponentsContext"),ElementsSelectErrorComponent:Hl("ElementsSelectErrorComponent","AttributeFilterComponentsContext"),ElementsSelectActionsComponent:Hl("ElementsSelectActionsComponent","AttributeFilterComponentsContext"),EmptyResultComponent:Hl("EmptyResultComponent","AttributeFilterComponentsContext"),StatusBarComponent:Hl("StatusBarComponent","AttributeFilterComponentsContext")});zl.displayName="AttributeFilterComponentsContext";const Wl=()=>(0,z.useContext)(zl),Gl=e=>{const{children:t}=e,n=(0,K._T)(e,["children"]);return z.createElement(zl.Provider,{value:n},t)};var Ul=n(23279),Kl=n(23560);const $l=e=>{const{backend:t,workspace:n,filter:i,hiddenElements:r,staticElements:l}=e,[,a]=(0,z.useState)(0),o=()=>{a((e=>e+1))},s=(0,z.useRef)(),c=(0,z.useCallback)((()=>{const e=Vl(t.withTelemetry("AttributeFilter",{workspace:n,filter:i,hiddenElements:r,staticElements:l}),n,i,{selectionMode:"multi",hiddenElements:r,staticElements:l});s.current=e}),[t,n,i,r,l]);s.current||c();const u=s.current,d=(0,R.usePrevious)(e);return(0,z.useEffect)((()=>{const e=u.onUpdate((()=>{o()}));return t===d.backend&&n===d.workspace&&W((0,g.filterObjRef)(i),(0,g.filterObjRef)(u.getFilter()))&&W(l,d.staticElements)&&W(r,d.hiddenElements)||(c(),o()),()=>{e()}}),[t,n,i,l,r,d,u,c]),u},Yl="reset",Ql="parentFilters";const Jl=e=>{const{backend:t,workspace:n,filter:i,connectToPlaceholder:r,parentFilters:l,parentFilterOverAttribute:a,resetOnParentFilterChange:o=!0,onApply:s,onError:c,hiddenElements:u,staticElements:d,elementsOptions:m,selectionMode:p="multi",selectFirst:h=!1}=e,f=(0,R.useBackendStrict)(t,"AttributeFilter"),b=(0,R.useWorkspaceStrict)(n,"AttributeFilter"),E=f.capabilities.supportsSettingConnectingAttributes,v=f.capabilities.supportsKeepingDependentFiltersSelection,C=f.capabilities.supportsCircularDependencyInFilters,y=f.capabilities.supportsShowingFilteredElements,S=f.capabilities.supportsSingleSelectDependentFilters,{shouldReloadElements:w,setShouldReloadElements:F}=ea(v,C),{shouldIncludeLimitingFilters:k,setShouldIncludeLimitingFilters:x}=ta(y),{filter:O,setConnectedPlaceholderValue:P}=((e,t)=>{const[n,i]=(0,R.usePlaceholder)(t),r=null!=n?n:e,l=(0,z.useCallback)((e=>{t&&i(e)}),[t,i]);return{filter:r,setConnectedPlaceholderValue:l}})(i,r),D=((e,t,n)=>{const i=(0,R.useResolveValueWithPlaceholders)(e);return(0,z.useMemo)((()=>n?((e,t)=>{if(!e||!t)return[];const n=Kl(t)?t:()=>t;return e.map(((e,t)=>({attributeFilter:e,overAttribute:n(e,t)}))).filter((e=>!(0,g.filterIsEmpty)(e.attributeFilter)))})(i,t):(e=>e?e.map((e=>({attributeFilter:e,overAttribute:null}))):[])(i)),[n,i,t])})(l,a,E),A=$l({backend:f,filter:O,workspace:b,hiddenElements:u,staticElements:d}),N=function(e,t,n){var i;const r=(e=>{const t=e.getWorkingSelection(),n=e.getCommittedSelection(),i=e.getInitStatus();return{attributeFilter:e.getFilter(),initialization:{status:e.getInitStatus(),error:e.getInitError()},attribute:{data:e.getAttribute(),status:e.getAttributeStatus(),error:e.getAttributeError()},elements:{data:e.getAllElements(),totalCount:e.getTotalElementsCount(),totalCountWithCurrentSettings:e.getTotalElementsCountWithCurrentSettings(),initialPageLoad:{status:e.getInitialElementsPageStatus(),error:e.getInitialElementsPageError()},nextPageLoad:{status:e.getNextElementsPageStatus(),error:e.getNextElementsPageError()},options:{search:e.getSearch(),offset:e.getOffset(),limit:e.getLimit(),limitingAttributeFilters:e.getLimitingAttributeFilters(),limitingDateFilters:e.getLimitingDateFilters(),limitingMeasures:e.getLimitingMeasures(),order:e.getOrder()}},selection:{committed:{elements:"success"===i?e.getElementsByKey(n.keys):[],keys:n.keys,isInverted:n.isInverted,irrelevantElements:"success"===i?e.getElementsByKey(n.irrelevantKeys):[]},working:{elements:"success"===i?e.getElementsByKey(t.keys):[],keys:t.keys,isInverted:t.isInverted,isChanged:e.isWorkingSelectionChanged(),isEmpty:e.isWorkingSelectionEmpty(),irrelevantElements:"success"===i?e.getElementsByKey(t.irrelevantKeys):[]}}}})(e),l=r.initialization.status,a=r.initialization.error,o="loading"===l,s=r.attribute.data,c=r.elements.initialPageLoad.status,u=r.elements.initialPageLoad.error,d="loading"===c,m=r.elements.nextPageLoad.status,p=r.elements.nextPageLoad.error,h="loading"===m,f=r.elements.data,b=r.elements.totalCount,E=r.elements.totalCountWithCurrentSettings,v=r.selection.working.isChanged,C=r.selection.working.isEmpty,y=r.selection.working.isInverted,S=r.selection.working.elements,I=r.selection.committed.isInverted,w=r.selection.committed.elements,F=r.elements.options.search,k=r.elements.options.limit,x=r.elements.options.limitingAttributeFilters,O=f.length<E?Math.min(k,E-f.length):0,P=S.length>500||!v||!y&&C,D=Cl(x),A=n&&"success"===c&&!D,N=function(e){const[t,n]=(0,z.useState)(!1);return(0,z.useEffect)((()=>{const t=[e.onLoadInitialElementsPageStart(i),e.onLoadInitialElementsPageSuccess(r),e.onLoadInitialElementsPageError(r),e.onLoadInitialElementsPageCancel(r),e.onInitStart(i),e.onInitSuccess(r),e.onInitError(r),e.onInitCancel(r)];function i(e){e.correlation===Ql&&n(!0)}function r(e){e.correlation===Ql&&n(!1)}return()=>{t.forEach((e=>{e()}))}}),[e]),t}(e),T=e.getLimitingAttributeFiltersAttributes(),M=null!==(i=null==s?void 0:s.displayForms)&&void 0!==i?i:[],R=(0,g.filterObjRef)(r.attributeFilter);return{attribute:s,offset:r.elements.options.offset,limit:k,isFiltering:N,isInitializing:o,initError:a,isLoadingInitialElementsPage:d,initialElementsPageError:u,isLoadingNextElementsPage:h,nextElementsPageError:p,nextElementsPageSize:O,elements:f,totalElementsCount:b,totalElementsCountWithCurrentSettings:E,isApplyDisabled:P,isWorkingSelectionInverted:y,workingSelectionElements:S,isCommittedSelectionInverted:I,committedSelectionElements:w,searchString:F,isFilteredByParentFilters:A,parentFilterAttributes:T,displayForms:M,currentDisplayFormRef:R,enableShowingFilteredElements:t,irrelevantSelection:t?r.selection.working.irrelevantElements:[]}}(A,y,k),T=function(e,t,n,i){const r="single"===e,l=I(n),a=(0,g.isPositiveAttributeFilter)(t)&&(0,g.attributeElementsCount)((0,g.filterAttributeElements)(t))<2;if(r){if(!a)return console.error("Provided 'filter' or 'connectToPlaceholder' property is not compatible with given single selection mode. It needs to be positive filter with max one item selected in attribute elements"),!1;if(!l&&!i)return console.error("Parent filtering can not be used together with single selection mode. Use only one of these properties at the same time."),!1}return!0}(p,O,D,S)?{}:{initError:new R.UnexpectedSdkError};!function(e,t){const{onError:n}=t;(0,z.useEffect)((()=>{function t(e){null==n||n(e.error)}const i=[e.onInitError(t),e.onLoadAttributeError(t),e.onLoadInitialElementsPageError(t),e.onLoadNextElementsPageError(t),e.onLoadCustomElementsError(t)];return()=>{i.forEach((e=>{e()}))}}),[e,n])}(A,{onError:c}),function(e,t,n,i){const{filter:r,limitingAttributeFilters:l,limit:a,resetOnParentFilterChange:o,setConnectedPlaceholderValue:s,onApply:c,selectionMode:u,setShouldReloadElements:d}=t;(0,z.useEffect)((()=>{l.length>0&&e.setLimitingAttributeFilters(l),a&&e.setLimit(a),e.init()}),[e]),(0,z.useEffect)((()=>{const t=!W(l,e.getLimitingAttributeFilters()),a=!W(r,e.getFilter()),m={filter:r,limitingAttributeFilters:l,limitingAttributesChanged:t,filterChanged:a,setConnectedPlaceholderValue:s,onApply:c,selectionMode:u,setShouldReloadElements:d},p=o?function(e,{filter:t,limitingAttributeFilters:n,limitingAttributesChanged:i,filterChanged:r,setConnectedPlaceholderValue:l,onApply:a,selectionMode:o},s){var c;const u=0===n.length||!s;if((0,Ti.kG)(u,"It is not possible to automatically reset dependent filters with current backend. Please set attribute filter to not reset on parent filter change (resetOnParentFilterChange prop)."),i){e.changeSelection({keys:[],isInverted:"single"!==o}),e.setLimitingAttributeFilters(n),e.commitSelection();const t=e.getFilter(),i=null===(c=e.getCommittedSelection())||void 0===c?void 0:c.isInverted;return l(t),null==a||a(t,i),"init-parent"}if(r){const n=(0,g.filterAttributeElements)(t),i=(0,g.isAttributeElementsByValue)(n)?n.values:n.uris,r=(0,g.isNegativeAttributeFilter)(t);return e.changeSelection({keys:i,isInverted:r}),e.commitSelection(),"init-self"}}(e,m,i):function(e,{filter:t,limitingAttributeFilters:n,limitingAttributesChanged:i,filterChanged:r,setConnectedPlaceholderValue:l,setShouldReloadElements:a},o){if(i||r){const r=(0,g.filterAttributeElements)(t),s=(0,g.isAttributeElementsByValue)(r)?r.values:r.uris,c=(0,g.isNegativeAttributeFilter)(t),u=e.getCommittedSelection().irrelevantKeys,d=gr(u,s),m=e.getLimitingAttributeFilters().length!==n.length,p=o&&(m||!I(d)),h=p?{irrelevantKeys:[]}:{};return e.changeSelection(Object.assign({keys:s,isInverted:c},h)),e.setLimitingAttributeFilters(n),e.commitSelection(),l(e.getFilter()),p?"init-self":i?(a(!0),"init-parent"):"init-self"}}(e,m,n);!function(e,t,n){if("init-parent"===t){if(n)return;"success"!==e.getInitStatus()?e.init(Ql):(e.initTotalCount(Ql),e.loadInitialElementsPage(Ql))}"init-self"===t&&e.init()}(e,p,n)}),[r,l,o,e,c,s,u,n,i,d])}(A,{filter:O,limitingAttributeFilters:D,limit:null==m?void 0:m.limit,onApply:s,setConnectedPlaceholderValue:P,resetOnParentFilterChange:o,selectionMode:p,setShouldReloadElements:F},v,C);const M=function(e,t,n,i){const{onApply:r,setConnectedPlaceholderValue:l,selectionMode:a,shouldReloadElements:o,setShouldReloadElements:s,shouldIncludeLimitingFilters:c,setShouldIncludeLimitingFilters:u,limitingAttributeFilters:d}=t,m=(0,z.useCallback)(((t,n)=>{const i=e.getFilter(),r=(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(i)),l=t.map((e=>r?e.uri:e.title)),o="single"===a?{irrelevantKeys:[]}:{};e.changeSelection(Object.assign({keys:l,isInverted:n},o))}),[e,a]),p=(0,z.useCallback)(Ul((t=>{e.getSearch()!==t&&(e.setSearch(t),e.loadInitialElementsPage("search"))}),200),[e]),h=(0,z.useCallback)((()=>{e.loadNextElementsPage()}),[e]),f=(0,z.useCallback)((()=>{e.revertSelection(),e.getSearch().length>0&&(e.setSearch(""),e.loadInitialElementsPage(Yl)),n&&!c&&(u(!0),s(!0),e.setLimitingAttributeFilters(d))}),[e,d,u,s,c,n]);return{onApply:(0,z.useCallback)((()=>{var t;e.commitSelection();const n=e.getFilter(),i=null===(t=e.getCommittedSelection())||void 0===t?void 0:t.isInverted;l(n),null==r||r(n,i,a)}),[r,l,e,a]),onLoadNextElementsPage:h,onSearch:p,onSelect:m,onReset:f,onOpen:(0,z.useCallback)((()=>{o&&(e.loadInitialElementsPage(Yl),!e.isWorkingSelectionEmpty()&&e.loadIrrelevantElements("irrelevantSelection"),s(!1))}),[e,o,s]),onShowFilteredElements:(0,z.useCallback)((()=>{n&&(u(!1),e.changeSelection(Object.assign(Object.assign({},e.getWorkingSelection()),{irrelevantKeys:[]})),e.setLimitingAttributeFilters([]),e.loadInitialElementsPage("showFilteredElements"))}),[e,u,n]),onClearIrrelevantSelection:(0,z.useCallback)((()=>{if(i&&n){const t=e.getWorkingSelection(),n=gr(t.keys,t.irrelevantKeys);e.changeSelection(Object.assign(Object.assign({},t),{keys:n,irrelevantKeys:[]}))}}),[e,i,n])}}(A,{onApply:s,setConnectedPlaceholderValue:P,selectionMode:p,shouldReloadElements:w,setShouldReloadElements:F,shouldIncludeLimitingFilters:k,setShouldIncludeLimitingFilters:x,limitingAttributeFilters:D},y,v);return Xl(A,{selectFirst:h,onApply:M.onApply,selectionMode:p}),Object.assign(Object.assign(Object.assign({},N),M),T)},Xl=(e,t)=>{const{selectFirst:n,selectionMode:i,onApply:r}=t,l=e.getCommittedSelection().keys,a=e.getInitialElementsPageStatus(),o=e.getAllElements(),s=e.getFilter();(0,z.useEffect)((()=>{if(n&&"single"===i&&I(l)&&"success"===a&&!I(o)){const t=[(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(s))?o[0].uri:o[0].title];e.changeSelection({keys:t,isInverted:!1,irrelevantKeys:[]}),e.commitSelection(),r()}}),[n,i,l,a,o,s,e,r])},ea=(e,t)=>{const[n,i]=(0,z.useState)(!1);return{shouldReloadElements:n,setShouldReloadElements:(0,z.useCallback)((n=>{e&&t&&i(n)}),[t,e])}},ta=e=>{const[t,n]=(0,z.useState)(!0);return{shouldIncludeLimitingFilters:t,setShouldIncludeLimitingFilters:(0,z.useCallback)((t=>{e&&n(t)}),[e])}},na=z.createContext(null);na.displayName="AttributeFilterContext";const ia=()=>(0,z.useContext)(na),ra=e=>{var t,n;const{children:i,fullscreenOnMobile:r,title:l,selectionMode:a,selectFirst:o,disabled:s,customIcon:c}=e,u=Jl(e),d=null!==(n=null!=l?l:null===(t=null==u?void 0:u.attribute)||void 0===t?void 0:t.title)&&void 0!==n?n:"";return z.createElement(na.Provider,{value:Object.assign(Object.assign({},u),{fullscreenOnMobile:r,title:d,selectionMode:a,selectFirst:o,disabled:s,customIcon:c})},i)};var la=n(86896);const aa=[{align:"cr cl",offset:{x:0,y:50}}],oa=({children:e})=>z.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},z.createElement(J.BubbleHoverTrigger,null,z.createElement(J.Icon.QuestionMark,{height:16,width:14,className:"s-attribute-filter-tooltip-icon"}),z.createElement(J.Bubble,{className:"gd-attribute-filter-details s-attribute-filter-details-bubble",alignPoints:aa,arrowStyle:{display:"none"}},e))),sa=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}],ca=e=>{const{isOpen:t,title:n,selectedItemsCount:i,showSelectionCount:r=!0,subtitle:l,disabled:a,customIcon:o,isFiltering:s,isLoading:c,isLoaded:u,isError:d,isDraggable:m,icon:g,TooltipContentComponent:p,titleExtension:h,onClick:f}=e,b=(0,la.Z)(),E=(0,z.useRef)(null),[v,C]=(0,z.useState)(!1),y=d?z.createElement("i",{className:"gd-icon gd-icon-circle-cross"}):g;(0,z.useEffect)((()=>{const e=E.current;if(!e)return;const t=Math.ceil(e.getBoundingClientRect().width)<e.scrollWidth;C(t)}),[l]);let S=n,I=l;return c?(S=b.formatMessage({id:"loading"}),I=b.formatMessage({id:"loading"})):s&&(I=b.formatMessage({id:"filtering"})),z.createElement("div",{className:te("gd-attribute-filter-dropdown-button__next","s-attribute-filter",`s-${Nn.gl(n)}`,{"gd-message":d,"gd-is-filtering":s,"gd-is-active":t,"gd-is-loaded":u,"gd-is-draggable":m,disabled:a}),onClick:f},y?z.createElement("div",{className:"gd-attribute-filter-dropdown-button-icon__next"},y):null,z.createElement("div",{className:"gd-attribute-filter-dropdown-button-content__next"},z.createElement("div",{className:"gd-attribute-filter-dropdown_button-title-content__next"},z.createElement("div",{className:"gd-attribute-filter-dropdown-button-title__next"},z.createElement(J.ShortenedText,{tooltipAlignPoints:sa,className:"s-attribute-filter-button-title"},`${S}`)),h,z.createElement(ie,{customIcon:o,disabled:a}),p&&u?z.createElement(oa,null,z.createElement(p,null)):null),z.createElement("div",{className:"gd-attribute-filter-dropdown-button-subtitle__next"},z.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items__next s-attribute-filter-button-subtitle",ref:E},I),r&&v?z.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items-count__next"},`(${i})`):null)))},ua=({onClick:e})=>z.createElement(ca,{isLoading:!0,onClick:e}),da=e=>{const{isOpen:t,isDraggable:n}=e;return z.createElement("div",{className:te("gd-attribute-filter-dropdown-button__next","s-attribute-filter","gd-message error s-button-error",{"gd-is-active":t,"gd-is-draggable":n})},z.createElement(ee.Z,{id:"gs.filter.error"}))},ma=245,ga=e=>{const{onApplyButtonClick:t,onCancelButtonClick:n,width:i=ma}=e,{DropdownActionsComponent:r,ElementsSelectComponent:l}=Wl(),a=(0,J.useMediaQuery)("mobileDevice"),{initialElementsPageError:o,nextElementsPageError:s,isApplyDisabled:c,isWorkingSelectionInverted:u,isLoadingInitialElementsPage:d,isLoadingNextElementsPage:m,onLoadNextElementsPage:g,elements:p,onSearch:h,onSelect:f,nextElementsPageSize:b,searchString:E,totalElementsCount:v,totalElementsCountWithCurrentSettings:C,workingSelectionElements:y,parentFilterAttributes:S,isFilteredByParentFilters:I,fullscreenOnMobile:w,selectionMode:F,title:k,enableShowingFilteredElements:x,onShowFilteredElements:O,irrelevantSelection:P,onClearIrrelevantSelection:D}=ia(),A=(0,z.useMemo)((()=>S.map((e=>e.title))),[S]),N={width:a&&w?"100%":i},T=(0,z.useCallback)(((e,n)=>{f(e,n),"single"===F&&t()}),[f,t,F]);return z.createElement("div",{className:"gd-attribute-filter-dropdown-body__next",style:N},z.createElement(l,{isInverted:u,isLoading:d,isLoadingNextPage:m,items:p,onLoadNextPage:g,onSearch:h,onSelect:T,nextPageSize:b,searchString:E,selectedItems:y,totalItemsCount:v,totalItemsCountWithCurrentSettings:C,parentFilterTitles:A,isFilteredByParentFilters:I,error:null!=o?o:s,attributeTitle:k,enableShowingFilteredElements:x,onShowFilteredElements:O,irrelevantSelection:P,onClearIrrelevantSelection:D}),z.createElement(r,{onApplyButtonClick:t,onCancelButtonClick:n,isApplyDisabled:c}))},pa=({isApplyDisabled:e,onApplyButtonClick:t,onCancelButtonClick:n})=>{const i=(0,la.Z)(),r=i.formatMessage({id:"gs.list.cancel"}),l=i.formatMessage({id:"gs.list.apply"});return z.createElement("div",{className:"gd-attribute-filter-dropdown-actions__next"},z.createElement("div",{className:"gd-attribute-filter-dropdown-actions-left-content__next"}),z.createElement("div",{className:"gd-attribute-filter-dropdown-actions-right-content__next"},z.createElement(J.Button,{className:"gd-attribute-filter-cancel-button__next gd-button-secondary gd-button-small cancel-button s-cancel",onClick:n,value:r,title:r}),z.createElement(J.Button,{disabled:e,className:"gd-attribute-filter-apply-button__next gd-button-action gd-button-small s-apply",onClick:t,value:l,title:l})))},ha=e=>{const{onSearch:t,searchString:n,isSmall:i}=e;return z.createElement(J.InvertableSelectSearchBar,{onSearch:t,searchString:n,isSmall:i})},fa=e=>{const{items:t,totalItemsCount:n,totalItemsCountWithCurrentSettings:i,isInverted:r,selectedItems:l,onSelect:a,searchString:o,onSearch:s,isLoading:c,isLoadingNextPage:u,nextPageSize:d,onLoadNextPage:m,error:g,attributeTitle:p,isFilteredByParentFilters:h,parentFilterTitles:f,enableShowingFilteredElements:b,onShowFilteredElements:E,irrelevantSelection:v,onClearIrrelevantSelection:C}=e,y=(0,la.Z)(),S=(0,J.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:I,selectionMode:w}=ia(),{ElementsSelectLoadingComponent:F,ElementsSelectItemComponent:k,ElementsSelectErrorComponent:x,EmptyResultComponent:O,ElementsSearchBarComponent:P,ElementsSelectActionsComponent:D,StatusBarComponent:A}=Wl(),N=I&&S?40:28,T=S&&I,M=(0,R.usePrevious)(i),L=(0,z.useMemo)((()=>Math.max((Math.min(M,10)||1)*N,20)+32),[M,N]);return z.createElement(z.Fragment,null,z.createElement(J.InvertableSelect,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:T,isSingleSelect:"single"===w,items:t,totalItemsCount:i,itemHeight:N,getItemKey:ql,getItemTitle:e=>jl(e,y),isInverted:r,selectedItems:l,selectedItemsLimit:500,onSelect:a,searchString:o,onSearch:s,isLoading:c,error:g,isLoadingNextPage:u,nextPageItemPlaceholdersCount:d,onLoadNextPage:m,numberOfHiddenSelectedItems:v.length,renderItem:e=>z.createElement(k,Object.assign({},e,{fullscreenOnMobile:I})),renderError:()=>z.createElement(x,{error:g}),renderLoading:()=>z.createElement(F,{height:L}),renderNoData:({height:e})=>z.createElement(O,{height:e,isFilteredByParentFilters:h,searchString:o,totalItemsCount:n,parentFilterTitles:f,enableShowingFilteredElements:b}),renderSearchBar:({onSearch:e,searchString:t})=>z.createElement(P,{onSearch:e,searchString:t,isSmall:!(S&&I)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:n,selectedItemsLimit:r})=>z.createElement(A,{getItemTitle:e,isFilteredByParentFilters:h,isInverted:t,parentFilterTitles:f,selectedItems:n,totalElementsCountWithCurrentSettings:i,selectedItemsLimit:r,attributeTitle:p,enableShowingFilteredElements:b,onShowFilteredElements:E,irrelevantSelection:v,onClearIrrelevantSelection:C}),renderActions:({checked:e,onChange:t,onToggle:n,isFiltered:i,totalItemsCount:r,isPartialSelection:l,isVisible:a})=>z.createElement(D,{isVisible:a,checked:e,onChange:t,onToggle:n,isFiltered:i,totalItemsCount:r,isPartialSelection:l})}))};var ba=n(68929);const Ea=[{align:"bl tc",offset:{x:7,y:0}}],va=e=>{const{item:t,isSelected:n,onSelect:i,onSelectOnly:r,onDeselect:l}=e,a=(0,la.Z)(),o=(0,z.useCallback)((()=>{n?l():i()}),[i,l,n]),s=(0,z.useCallback)((e=>{e.stopPropagation(),r()}),[r]),c=te("gd-attribute-filter-elements-select-item__next","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${ba(t.title)}`,{"is-selected":n},{"s-attribute-filter-list-item-selected":n},{"gd-attribute-filter-list-empty-item":!t.title}),u=te("input-checkbox-label",{"gd-empty-value-label":!t.title}),d=jl(t,a);return z.createElement("div",{className:c,onClick:o,title:d},z.createElement("label",{className:u},z.createElement("input",{type:"checkbox",className:"input-checkbox",readOnly:!0,checked:n}),z.createElement("span",{className:"input-label-text"},d)),!t.title&&z.createElement("div",{className:"gd-empty-list-item-tooltip-wrapper"},z.createElement(J.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0},z.createElement("span",{className:"gd-icon-circle-question gd-empty-value-tooltip-icon"}),z.createElement(J.Bubble,{className:"bubble-primary gd-empty-item-bubble",alignTo:".gd-empty-value-tooltip-icon",alignPoints:Ea},z.createElement(ee.Z,{id:"attributesDropdown.empty.item.tooltip"})))),z.createElement("span",{className:"gd-list-item-only",onClick:s},z.createElement(ee.Z,{id:"gs.list.only"})))},Ca=()=>z.createElement(J.Message,{type:"error"},z.createElement(ee.Z,{id:"gs.list.error"})),ya=e=>z.createElement(J.LoadingMask,{height:e.height}),Sa=()=>{const e=(0,la.Z)();return z.createElement(J.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noResultsMatch"})})},Ia=()=>{const e=(0,la.Z)();return z.createElement(J.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noData"})})},wa=[{align:"cr cl"}],Fa={"cr cl":[10,0]},ka=e=>{const{parentFilterTitles:t,searchString:n,enableShowingFilteredElements:i}=e;return i&&n.length>0?z.createElement(Sa,null):i?z.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement("div",{className:"gd-filtered-message__next"},z.createElement(ee.Z,{id:"attributesDropdown.noRelevantValues"}),z.createElement("span",{className:"gd-icon-circle-question"})),z.createElement(J.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:wa,arrowOffsets:Fa},z.createElement(ee.Z,{id:"attributesDropdown.noRelevantValues.tooltip",values:{break:z.createElement(z.Fragment,null,z.createElement("br",null),z.createElement("br",null))}})))):z.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement("div",{className:"gd-filtered-message__next"},z.createElement(ee.Z,{id:"attributesDropdown.allItemsFiltered"}),z.createElement("span",{className:"gd-icon-circle-question"})),z.createElement(J.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:wa,arrowOffsets:Fa},z.createElement(ee.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:t.join(", "),strong:e=>z.createElement("strong",null,e)}}))))},xa=({height:e,totalItemsCount:t,searchString:n,isFilteredByParentFilters:i,parentFilterTitles:r=[],enableShowingFilteredElements:l=!1})=>{let a=null;const o=(0,z.useMemo)((()=>({height:e})),[e]);return 0===t?a=z.createElement(Ia,null):i?a=z.createElement(ka,{parentFilterTitles:r,searchString:n,enableShowingFilteredElements:l}):n.length>0&&(a=z.createElement(Sa,null)),z.createElement("div",{className:"gd-attribute-filter-empty-result__next",style:o},a)},Oa=[{align:"cr cl"}],Pa={"cr cl":[10,0]},Da=e=>{const{parentFilterTitles:t}=e,n=(0,z.useMemo)((()=>t?t.join(", "):""),[t]);return z.createElement("div",{className:"gd-attribute-filter-filtered-status__next s-attribute-filter-dropdown-items-filtered"},z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement("div",{className:"gd-filtered-message__next"}," ",z.createElement(ee.Z,{id:"attributesDropdown.itemsFiltered"}),z.createElement("span",{className:"gd-icon-circle-question"})),z.createElement(J.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Oa,arrowOffsets:Pa},z.createElement(ee.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:n,strong:e=>z.createElement("strong",null,e)}}))))},Aa=e=>{const{isInverted:t,selectedItems:n,getItemTitle:i,selectedItemsLimit:r}=e;return z.createElement(J.InvertableSelectStatusBar,{className:"gd-attribute-filter-selection-status__next",isInverted:t,getItemTitle:i,selectedItems:n,selectedItemsLimit:r})},Na=[{align:"bl tl"}],Ta={"bl tl":[0,8]},Ma=({attributeTitle:e,onClick:t,parentFilterTitles:n,className:i})=>{const r=(0,z.useMemo)((()=>n?n.join(", "):""),[n]);return z.createElement("div",{className:te("gd-attribute-filter-status-show-all s-attribute-filter-status-show-all",i)},z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement("div",{className:"gd-relevant-values-text"},z.createElement(ee.Z,{id:"attributesDropdown.relevantValues",values:{nbsp:z.createElement(z.Fragment,null," ")}})),z.createElement(J.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Na,arrowOffsets:Ta},z.createElement(ee.Z,{id:"attributesDropdown.relevantValues.tooltip",values:{child:e,parents:r,strong:e=>z.createElement("strong",null,e)}}))),z.createElement("span",{className:"gd-action-show-all s-action-show-all",onClick:t},z.createElement(ee.Z,{id:"attributesDropdown.showAll"})))},Ra=[{align:"bl tl"}],La={"bl tl":[-10,12]},_a=({parentFilterTitles:e,irrelevantSelection:t,onClear:n,showClearButton:i=!0})=>{const r=(0,z.useMemo)((()=>e?e.join(", "):""),[e]);return 0===t.length?null:z.createElement(J.Message,{className:"gd-attribute-filter-status-irrelevant-message s-attribute-filter-status-irrelevant-message",type:"warning"},z.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},z.createElement(ee.Z,{id:"attributesDropdown.irrelevantValues",values:{nbsp:z.createElement(z.Fragment,null," ")}}),z.createElement(J.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Ra,arrowOffsets:La},z.createElement(ee.Z,{id:"attributesDropdown.irrelevantValues.tooltip",values:{parents:r,strong:e=>z.createElement("strong",null,e)}}))),i?z.createElement("span",{className:"gd-action-clear s-action-clear",onClick:n},z.createElement(ee.Z,{id:"attributesDropdown.irrelevantValues.clear"})):null)},Ba=e=>{const{attributeTitle:t,isFilteredByParentFilters:n,parentFilterTitles:i,totalElementsCountWithCurrentSettings:r,getItemTitle:l,isInverted:a,selectedItems:o,selectedItemsLimit:s,enableShowingFilteredElements:c=!1,onShowFilteredElements:u=U,irrelevantSelection:d=[],onClearIrrelevantSelection:m=U}=e;return c?z.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n?z.createElement(Ma,{attributeTitle:t,onClick:u,parentFilterTitles:i}):null,z.createElement(Aa,{isInverted:a,getItemTitle:l,selectedItems:o,selectedItemsLimit:s}),z.createElement(_a,{parentFilterTitles:i,irrelevantSelection:d,onClear:m})):z.createElement("div",{className:"gd-attribute-filter-status-bar__next"},z.createElement(Aa,{isInverted:a,getItemTitle:l,selectedItems:o,selectedItemsLimit:s}),n&&r>0?z.createElement(Da,{parentFilterTitles:i}):null)},Va=e=>{const{checked:t,isVisible:n,onChange:i,onToggle:r,isFiltered:l,totalItemsCount:a,isPartialSelection:o}=e;return z.createElement(J.InvertableSelectAllCheckbox,{isVisible:n,checked:t,onChange:i,onToggle:r,isFiltered:l,totalItemsCount:a,isPartialSelection:o})},Ha=e=>{const{item:t,onSelectOnly:n,isSelected:i,fullscreenOnMobile:r=!1}=e,l=(0,la.Z)(),a=(0,z.useCallback)((e=>{e.stopPropagation(),n()}),[n]),o=(0,z.useMemo)((()=>jl(t,l)),[t,l]),s=(0,J.useMediaQuery)("mobileDevice"),c=te("gd-single-selection-attribute-filter-elements-select-item","gd-list-item","s-attribute-filter-list-item",`s-attribute-filter-list-item-${ba(t.title)}`,{"is-selected":i},{"s-attribute-filter-list-item-selected":i});return z.createElement("div",{className:c,onClick:a,title:o},z.createElement("span",null,o),i&&s&&r?z.createElement("span",{className:"gd-customizable-checkmark-mobile-navigation-wrapper"},z.createElement(J.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-navigation"})):null)};function ja(){return z.createElement("div",{style:{marginTop:-5}})}const Za=e=>{const{enableShowingFilteredElements:t,isFilteredByParentFilters:n,parentFilterTitles:i,totalElementsCountWithCurrentSettings:r,attributeTitle:l,onShowFilteredElements:a,irrelevantSelection:o}=e;return t?z.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n?z.createElement(Ma,{attributeTitle:l,onClick:a,parentFilterTitles:i,className:"no-divider"}):null,z.createElement(_a,{parentFilterTitles:i,irrelevantSelection:o,showClearButton:!1})):z.createElement("div",{className:"gd-attribute-filter-status-bar__next"},n&&r>0?z.createElement(Da,{parentFilterTitles:i}):null)},qa=()=>z.createElement("div",null),za={ErrorComponent:da,LoadingComponent:ua,DropdownButtonComponent:ca,DropdownBodyComponent:ga,DropdownActionsComponent:pa,ElementsSearchBarComponent:ha,ElementsSelectComponent:fa,ElementsSelectItemComponent:va,ElementsSelectErrorComponent:Ca,ElementsSelectLoadingComponent:ya,ElementsSelectActionsComponent:Va,EmptyResultComponent:xa,StatusBarComponent:Ba},Wa=e=>{const{resetOnParentFilterChange:t=!0,children:n,locale:i,backend:r,workspace:l,title:a,filter:o,connectToPlaceholder:s,parentFilters:c,parentFilterOverAttribute:u,hiddenElements:d,staticElements:m,fullscreenOnMobile:g=!1,selectionMode:p="multi",selectFirst:h=!1,disabled:f,customIcon:b,onApply:E,onError:v,ErrorComponent:C,LoadingComponent:y,DropdownButtonComponent:S,DropdownBodyComponent:I,DropdownActionsComponent:w,ElementsSearchBarComponent:F,ElementsSelectComponent:k,ElementsSelectItemComponent:x,ElementsSelectErrorComponent:O,ElementsSelectLoadingComponent:P,ElementsSelectActionsComponent:D,EmptyResultComponent:A,StatusBarComponent:N}=e,T=(({selectionMode:e})=>Object.assign(Object.assign({},za),"single"===e?{ElementsSelectItemComponent:Ha,ElementsSelectActionsComponent:ja,StatusBarComponent:Za,DropdownActionsComponent:qa}:{}))(e);return z.createElement(R.IntlWrapper,{locale:i},z.createElement(Gl,{ErrorComponent:null!=C?C:T.ErrorComponent,LoadingComponent:null!=y?y:T.LoadingComponent,DropdownButtonComponent:null!=S?S:T.DropdownButtonComponent,DropdownBodyComponent:null!=I?I:T.DropdownBodyComponent,DropdownActionsComponent:null!=w?w:T.DropdownActionsComponent,ElementsSearchBarComponent:null!=F?F:T.ElementsSearchBarComponent,ElementsSelectComponent:null!=k?k:T.ElementsSelectComponent,ElementsSelectItemComponent:null!=x?x:T.ElementsSelectItemComponent,ElementsSelectErrorComponent:null!=O?O:T.ElementsSelectErrorComponent,ElementsSelectLoadingComponent:null!=P?P:T.ElementsSelectLoadingComponent,ElementsSelectActionsComponent:null!=D?D:T.ElementsSelectActionsComponent,EmptyResultComponent:null!=A?A:T.EmptyResultComponent,StatusBarComponent:null!=N?N:T.StatusBarComponent},z.createElement(ra,{backend:r,workspace:l,title:a,filter:o,connectToPlaceholder:s,resetOnParentFilterChange:t,parentFilters:c,parentFilterOverAttribute:u,onApply:E,onError:v,hiddenElements:d,staticElements:m,fullscreenOnMobile:g,selectionMode:p,selectFirst:h,disabled:f,customIcon:b},n)))},Ga=[{align:"bc tc"}],Ua=({children:e,errorMessage:t})=>t?z.createElement("div",{className:"gd-attribute-filter-button-wrapper"},z.createElement(J.BubbleHoverTrigger,null,e,z.createElement(J.Bubble,{className:"bubble-negative gd-attribute-filter-button-error s-attribute-filter-error-bubble",alignPoints:Ga},z.createElement("span",null,z.createElement(ee.Z,{id:"gs.filter.error.tooltip"}))))):z.createElement(z.Fragment,null,e),Ka=[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tl bl",offset:{x:0,y:0}},{align:"tr tl",offset:{x:0,y:-50}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-200}},{align:"tr tl",offset:{x:0,y:-300}},{align:"tr tl",offset:{x:0,y:-400}}],$a=()=>{const{DropdownButtonComponent:e,DropdownBodyComponent:t,LoadingComponent:n,ErrorComponent:i}=Wl(),{title:r,isInitializing:l,initError:a,isFiltering:o,committedSelectionElements:s,onReset:c,onApply:u,onOpen:d,fullscreenOnMobile:m,isCommittedSelectionInverted:g,selectionMode:p,disabled:h,customIcon:f}=ia(),b=(0,J.useMediaQuery)("mobileDevice"),E=function(e,t){const n=(0,la.Z)(),i=0===t.length,r=i&&!e,l=!i&&e,a=!i&&!e;let o=n.formatMessage({id:"gs.list.all"});return l?o=`${n.formatMessage({id:"gs.list.all"})} ${n.formatMessage({id:"gs.list.except"})} ${Zl(t,n)}`:a?o=Zl(t,n):r&&(o=n.formatMessage({id:"gs.filterLabel.none"})),o}(g,s),v="single"!==p&&0!==s.length;return z.createElement(J.Dropdown,{className:"gd-attribute-filter__next",closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:Ka,fullscreenOnMobile:m,renderButton:({toggleDropdown:t,isOpen:c})=>{const u=h?U:t;return z.createElement("div",{className:te({"gd-is-mobile":m&&b&&c})},!!l&&z.createElement(n,{onClick:u,isOpen:c}),!l&&!!a&&!r&&z.createElement(i,{message:a.message,error:a}),!l&&!!r&&z.createElement(Ua,{errorMessage:null==a?void 0:a.message},z.createElement(e,{title:r,subtitle:E,isFiltering:o,isLoaded:!l,isLoading:l,isOpen:c,selectedItemsCount:s.length,showSelectionCount:v,disabled:h,customIcon:f,onClick:u,isError:!!a})))},onOpenStateChanged:e=>{e?d():c()},renderBody:({closeDropdown:e})=>z.createElement("div",{className:te({"gd-is-mobile":m&&b}),style:{height:m&&b?"100%":"auto"}},z.createElement(t,{onApplyButtonClick:()=>{u(),e()},onCancelButtonClick:e}))})},Ya=e=>{const t=(0,R.useBackendStrict)(e.backend,"AttributeFilter");return function(e){var t,n;const{connectToPlaceholder:i,filter:r,onApply:l,parentFilters:a,hiddenElements:o,staticElements:s,backend:c}=e;(0,Ti.kG)(!(r&&i),"It's not possible to combine 'filter' property with 'connectToPlaceholder' property. Either provide a filter, or a placeholer."),(0,Ti.kG)(!(r&&!l),"It's not possible to use 'filter' property without 'onApply' property. Either provide 'onApply' callback or use placeholders."),(0,Ti.kG)(r||i,"No filter or placeholer provided. Provide one of the properties: 'filter', 'connectToPlaceholder'."),(0,Ti.kG)(!(!(null===(t=null==c?void 0:c.capabilities)||void 0===t?void 0:t.supportsElementsQueryParentFiltering)&&!I(a)),"Parent filtering is not supported by the current backend implementation."),(0,Ti.kG)(!(!(null===(n=null==c?void 0:c.capabilities)||void 0===n?void 0:n.supportsElementsQueryParentFiltering)&&!I(o)&&I(s)),"Hidden elements are not supported by the current backend implementation.")}(Object.assign({backend:t},e)),z.createElement(Wa,Object.assign({},e),z.createElement($a,null))},Qa=e=>{const{isOpen:t,title:n,isLoading:i,isFiltering:r,onClick:l}=e,a=(0,la.Z)();let o=n;return i?o=a.formatMessage({id:"loading"}):r&&(o=a.formatMessage({id:"filtering"})),z.createElement(J.DropdownButton,{className:"gd-attribute-filter-dropdown-simple-button__next",disabled:i,isOpen:t,value:o,onClick:l})},Ja=e=>{const{isOpen:t,subtitle:n,title:i,selectedItemsCount:r,onClick:l,isLoading:a,isFiltering:o,showSelectionCount:s=!0}=e,c=(0,la.Z)();let u=`${i}: ${n}`;(a||o)&&(u=c.formatMessage({id:"loading"}));const d=te("gd-button-primary","button-dropdown","dropdown-button","gd-button-small","gd-button",{"is-dropdown-open":t},{"is-active":t}),m=te("gd-button-icon",{"gd-icon-navigateup":t},{"gd-icon-navigatedown":!t}),g=s?`(${r})`:void 0;return z.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button__next"},z.createElement("button",{className:d,onClick:l,title:u},z.createElement("span",{className:"gd-button-text"},z.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-text"},z.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection"},u),g?z.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection-count"},g):null)),z.createElement("span",{className:m,role:"button-icon"})))},Xa=e=>{var t;const{titleWithSelection:n}=e,i=(0,K._T)(e,["titleWithSelection"]),r=n?Ja:Qa;return z.createElement(Ya,Object.assign({},i,{DropdownButtonComponent:null!==(t=e.DropdownButtonComponent)&&void 0!==t?t:r}))},eo=e=>{var t;const{attributeFilterMode:n}=e,i=(0,K._T)(e,["attributeFilterMode"]);return"hidden"!==n?z.createElement(Ya,Object.assign({},i,{disabled:"readonly"===n,DropdownButtonComponent:null!==(t=e.DropdownButtonComponent)&&void 0!==t?t:ca})):null},to=({isOpened:e,text:t,toggleDropdown:n})=>{const i=(0,la.Z)(),r=te("gd-button-primary","gd-button-small","button-dropdown","dropdown-button","gd-attribute-filter-display-form-button","s-attribute-display-form-button",{"is-active":e}),l=e?"gd-icon-navigateup":"gd-icon-navigatedown",a=i.formatMessage({id:"attributesDropdown.display_as"},{title:t});return z.createElement(J.Button,{className:r,title:a,value:a,onClick:n,iconRight:l})},no=[{align:"cl cr",offset:{x:-10,y:0}},{align:"cr cl",offset:{x:10,y:0}}],io=e=>{const{displayForm:t,selected:n}=e,{title:i,type:r}=t,l=te("gd-list-item","gd-attribute-display-form","s-attribute-display-form-name",`s-attribute-display-form-name-${Nn.gl(i)}`,(e=>{switch(e){case"GDC.link":return"gd-icon-hyperlink-warning";case"GDC.geo.pin":case"GDC.geo.pin_latitude":case"GDC.geo.pin_longitude":return"gd-icon-earth";default:return"gd-icon-label-warning"}})(r),{"is-selected":n});return z.createElement("div",{className:l,onClick:t=>{const{displayForm:n,onClick:i}=e;i(n.ref),t.preventDefault()}},z.createElement(J.ShortenedText,{className:"gd-attribute-display-form-name",tooltipAlignPoints:no},i))},ro=[{align:"bl tl",offset:{x:0,y:1}},{align:"tl bl",offset:{x:0,y:-1}}],lo=e=>{const{displayForms:t,selectedDisplayForm:n,onSelect:i,alignPoints:r}=e,l=(0,z.useMemo)((()=>{var e;return null===(e=t.find((e=>(0,g.areObjRefsEqual)(e.ref,n))))||void 0===e?void 0:e.title}),[t,n]);return z.createElement(J.Dropdown,{className:"gd-attribute-display-form-dropdown",alignPoints:null!=r?r:ro,closeOnMouseDrag:!0,closeOnParentScroll:!0,renderButton:({isOpen:e,toggleDropdown:t})=>z.createElement(to,{text:l,isOpened:e,toggleDropdown:t}),renderBody:({closeDropdown:e})=>z.createElement(J.DropdownList,{className:"gd-attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body",items:t,itemHeight:23,renderItem:({item:t})=>{const r=(0,g.areObjRefsEqual)(t.ref,n);return z.createElement(io,{key:t.id,displayForm:t,onClick:t=>{e(),r||i(t)},selected:r})}})})},ao=e=>{const{onSelect:t,alignPoints:n}=e,{displayForms:i,currentDisplayFormRef:r}=ia();return z.createElement(lo,{displayForms:i,selectedDisplayForm:r,alignPoints:n,onSelect:t})},oo=[{align:"bc tc",offset:{x:-1,y:5}}],so=e=>{const{onConfiguration:t}=e;return z.createElement("div",{className:"gd-attribute-filter-configuration-button"},z.createElement(J.BubbleHoverTrigger,null,z.createElement(J.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:t}),z.createElement(J.Bubble,{className:"bubble-primary",alignPoints:oo},z.createElement(ee.Z,{id:"attributesDropdown.configuration"}))))},co=[{align:"bc tc",offset:{x:-1,y:5}}],uo=e=>{const{onDelete:t}=e;return z.createElement("div",{className:"gd-attribute-filter-delete-button"},z.createElement(J.BubbleHoverTrigger,null,z.createElement(J.Button,{className:"gd-button-link gd-button-icon-only gd-button-small gd-icon-trash gd-delete-button s-delete-button",disabled:!1,onClick:t}),z.createElement(J.Bubble,{className:"bubble-primary",alignPoints:co},z.createElement(ee.Z,{id:"attributesDropdown.removeTooltip"}))))},mo=({title:e,defaultAttributeFilterTitle:t,attributeDataSet:n})=>z.createElement("div",{className:"gd-attribute-filter-tooltip-content s-attribute-filter-tooltip-content"},z.createElement("h3",{className:"s-attribute-filter-tooltip-header"},null!=e?e:t),z.createElement("h4",null,z.createElement(ee.Z,{id:"attributesDropdown.details.type"})),z.createElement("p",{className:"s-attribute-filter-tooltip-item-name"},t),z.createElement("h4",null,z.createElement(ee.Z,{id:"attributesDropdown.details.dataset"})),z.createElement("p",{className:"s-attribute-filter-tooltip-item-dataset"},n.title)),go=e=>z.createElement("div",{className:"gd-empty-select-search-bar"}),po=(e,t)=>{const{onClick:n}=e,{isOpen:i}=(0,R.usePrevious)(e);(0,z.useEffect)((()=>{t&&!i&&n()}),[n,t,i])},ho=(e,t)=>{const{isOpen:n}=e,{isOpen:i}=(0,R.usePrevious)(e);(0,z.useEffect)((()=>{t&&i&&!n&&t()}),[t,n,i])},fo=e=>{const{onSearch:t,searchString:n}=e,[i,r]=(0,z.useState)(n);(0,z.useEffect)((()=>{r(n)}),[n]);const l=(0,z.useCallback)((e=>{r(e),t(e)}),[t]);return{onSearch:l,search:i}},bo=({tooltipContent:e})=>z.createElement("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip"},z.createElement(J.BubbleHoverTrigger,null,z.createElement(J.Icon.BoldHyperlink,{width:12,height:16}),z.createElement(J.Bubble,{arrowOffsets:{"bc tl":[-12,9],"bc tr":[12,9]},alignPoints:[{align:"bc tl"},{align:"bc tr"}]},e)))}}]);